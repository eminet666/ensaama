function DeviceOrientationControlMethod(){this._dynamics={yaw:new Marzipano.Dynamics,pitch:new Marzipano.Dynamics},this._deviceOrientationHandler=this._handleData.bind(this),window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",this._deviceOrientationHandler),this._previous={},this._current={},this._tmp={},this._getPitchCallbacks=[]}function rotateEuler(t,e){var i,n,r,o=Math.cos(t.yaw),s=Math.sin(t.yaw),a=Math.cos(t.pitch),l=Math.sin(t.pitch),u=Math.cos(t.roll),h=Math.sin(t.roll),c=[s*h-o*l*u,-o*a,o*l*h+s*u,a*u,-l,-a*h,s*l*u+o*h,s*a,-s*l*h+o*u];c[3]>.9999?(i=Math.atan2(c[2],c[8]),r=Math.PI/2,n=0):c[3]<-.9999?(i=Math.atan2(c[2],c[8]),r=-Math.PI/2,n=0):(i=Math.atan2(-c[6],c[0]),n=Math.atan2(-c[5],c[4]),r=Math.asin(c[3])),e.yaw=i,e.pitch=r,e.roll=n}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e="length"in t&&t.length,i=re.type(t);return"function"===i||re.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(re.isFunction(e))return re.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return re.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(pe.test(e))return re.filter(e,t,i);e=re.filter(e,t)}return re.grep(t,function(t){return re.inArray(t,e)>=0!==i})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=Te[t]={};return re.each(t.match(_e)||[],function(t,i){e[i]=!0}),e}function s(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(fe.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(s(),re.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(we,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:xe.test(i)?re.parseJSON(i):i}catch(r){}re.data(t,e,i)}else i=void 0}return i}function u(t){var e;for(e in t)if(("data"!==e||!re.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(re.acceptData(t)){var r,o,s=re.expando,a=t.nodeType,l=a?re.cache:t,u=a?t[s]:t[s]&&s;if(u&&l[u]&&(n||l[u].data)||void 0!==i||"string"!=typeof e)return u||(u=a?t[s]=U.pop()||re.guid++:s),l[u]||(l[u]=a?{}:{toJSON:re.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[u]=re.extend(l[u],e):l[u].data=re.extend(l[u].data,e)),o=l[u],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[re.camelCase(e)]=i),"string"==typeof e?(r=o[e],null==r&&(r=o[re.camelCase(e)])):r=o,r}}function c(t,e,i){if(re.acceptData(t)){var n,r,o=t.nodeType,s=o?re.cache:t,a=o?t[re.expando]:re.expando;if(s[a]){if(e&&(n=i?s[a]:s[a].data)){re.isArray(e)?e=e.concat(re.map(e,re.camelCase)):e in n?e=[e]:(e=re.camelCase(e),e=e in n?[e]:e.split(" ")),r=e.length;for(;r--;)delete n[e[r]];if(i?!u(n):!re.isEmptyObject(n))return}(i||(delete s[a].data,u(s[a])))&&(o?re.cleanData([t],!0):ie.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function p(){return!0}function d(){return!1}function f(){try{return fe.activeElement}catch(t){}}function m(t){var e=Be.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function v(t,e){var i,n,r=0,o=typeof t.getElementsByTagName!==Me?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Me?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[r]);r++)!e||re.nodeName(n,e)?o.push(n):re.merge(o,v(n,e));return void 0===e||e&&re.nodeName(t,e)?re.merge([t],o):o}function y(t){Ie.test(t.type)&&(t.defaultChecked=t.checked)}function g(t,e){return re.nodeName(t,"table")&&re.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function _(t){return t.type=(null!==re.find.attr(t,"type"))+"/"+t.type,t}function T(t){var e=Ye.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function S(t,e){for(var i,n=0;null!=(i=t[n]);n++)re._data(i,"globalEval",!e||re._data(e[n],"globalEval"))}function b(t,e){if(1===e.nodeType&&re.hasData(t)){var i,n,r,o=re._data(t),s=re._data(e,o),a=o.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,r=a[i].length;r>n;n++)re.event.add(e,i,a[i][n])}s.data&&(s.data=re.extend({},s.data))}}function M(t,e){var i,n,r;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[re.expando]){r=re._data(e);for(n in r.events)re.removeEvent(e,n,r.handle);e.removeAttribute(re.expando)}"script"===i&&e.text!==t.text?(_(e).text=t.text,T(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!re.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ie.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function x(e,i){var n,r=re(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(r[0]))?n.display:re.css(r[0],"display");return r.detach(),o}function w(t){var e=fe,i=Je[t];return i||(i=x(t,e),"none"!==i&&i||($e=($e||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=($e[0].contentWindow||$e[0].contentDocument).document,e.write(),e.close(),i=x(t,e),$e.detach()),Je[t]=i),i}function E(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function P(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=pi.length;r--;)if(e=pi[r]+i,e in t)return e;return n}function A(t,e){for(var i,n,r,o=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(o[s]=re._data(n,"olddisplay"),i=n.style.display,e?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Ae(n)&&(o[s]=re._data(n,"olddisplay",w(n.nodeName)))):(r=Ae(n),(i&&"none"!==i||!r)&&re._data(n,"olddisplay",r?i:re.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[s]||"":"none"));return t}function C(t,e,i){var n=li.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function I(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===i&&(s+=re.css(t,i+Pe[o],!0,r)),n?("content"===i&&(s-=re.css(t,"padding"+Pe[o],!0,r)),"margin"!==i&&(s-=re.css(t,"border"+Pe[o]+"Width",!0,r))):(s+=re.css(t,"padding"+Pe[o],!0,r),"padding"!==i&&(s+=re.css(t,"border"+Pe[o]+"Width",!0,r)));return s}function D(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=ti(t),s=ie.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=ei(t,e,o),(0>r||null==r)&&(r=t.style[e]),ni.test(r))return r;n=s&&(ie.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+I(t,e,i||(s?"border":"content"),n,o)+"px"}function L(t,e,i,n,r){return new L.prototype.init(t,e,i,n,r)}function H(){return setTimeout(function(){di=void 0}),di=re.now()}function F(t,e){var i,n={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)i=Pe[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function G(t,e,i){for(var n,r=(_i[e]||[]).concat(_i["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,e,t))return n}function B(t,e,i){var n,r,o,s,a,l,u,h,c=this,p={},d=t.style,f=t.nodeType&&Ae(t),m=re._data(t,"fxshow");i.queue||(a=re._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,re.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],u=re.css(t,"display"),h="none"===u?re._data(t,"olddisplay")||w(t.nodeName):u,"inline"===h&&"none"===re.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==w(t.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ie.shrinkWrapBlocks()||c.always(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],mi.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||re.style(t,n)}else u=void 0;if(re.isEmptyObject(p))"inline"===("none"===u?w(t.nodeName):u)&&(d.display=u);else{m?"hidden"in m&&(f=m.hidden):m=re._data(t,"fxshow",{}),o&&(m.hidden=!f),f?re(t).show():c.done(function(){re(t).hide()}),c.done(function(){var e;re._removeData(t,"fxshow");for(e in p)re.style(t,e,p[e])});for(n in p)s=G(f?m[n]:0,n,c),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function R(t,e){var i,n,r,o,s;for(i in t)if(n=re.camelCase(i),r=e[n],o=t[i],re.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),s=re.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function N(t,e,i){var n,r,o=0,s=gi.length,a=re.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=di||H(),i=Math.max(0,u.startTime+u.duration-e),n=i/u.duration||0,o=1-n,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(t,[u,o,i]),1>o&&l?i:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:re.extend({},e),opts:re.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:di||H(),duration:i.duration,tweens:[],createTween:function(e,i){var n=re.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)u.tweens[i].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),h=u.props;for(R(h,u.opts.specialEasing);s>o;o++)if(n=gi[o].call(u,t,h,u.opts))return n;return re.map(h,G,u),re.isFunction(u.opts.start)&&u.opts.start.call(t,u),re.fx.timer(re.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function O(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(_e)||[];if(re.isFunction(i))for(;n=o[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function k(t,e,i,n){function r(a){var l;return o[a]=!0,re.each(t[a]||[],function(t,a){var u=a(e,i,n);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=t===Xi;return r(e.dataTypes[0])||!o["*"]&&r("*")}function z(t,e){var i,n,r=re.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&re.extend(!0,t,i),t}function V(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}n||(n=s)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function X(t,e,i,n){var r,o,s,a,l,u={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],h.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function W(t,e,i,n){var r;if(re.isArray(e))re.each(e,function(e,r){i||Yi.test(t)?n(t,r):W(t+"["+("object"==typeof r?e:"")+"]",r,i,n)});else if(i||"object"!==re.type(e))n(t,e);else for(r in e)W(t+"["+r+"]",e[r],i,n)}function j(){try{return new t.XMLHttpRequest}catch(e){}}function q(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function Y(t){return re.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var U=[],K=U.slice,Q=U.concat,Z=U.push,$=U.indexOf,J={},te=J.toString,ee=J.hasOwnProperty,ie={},ne="1.11.3",re=function(t,e){return new re.fn.init(t,e)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,ae=/-([\da-z])/gi,le=function(t,e){return e.toUpperCase()};re.fn=re.prototype={jquery:ne,constructor:re,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=re.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return re.each(this,t,e)},map:function(t){return this.pushStack(re.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:U.sort,splice:U.splice},re.extend=re.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||re.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(r=arguments[a]))for(n in r)t=s[n],i=r[n],s!==i&&(u&&i&&(re.isPlainObject(i)||(e=re.isArray(i)))?(e?(e=!1,o=t&&re.isArray(t)?t:[]):o=t&&re.isPlainObject(t)?t:{},s[n]=re.extend(u,o,i)):void 0!==i&&(s[n]=i));return s},re.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===re.type(t)},isArray:Array.isArray||function(t){return"array"===re.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!re.isArray(t)&&t-parseFloat(t)+1>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==re.type(t)||t.nodeType||re.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[te.call(t)]||"object":typeof t},globalEval:function(e){e&&re.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(se,"ms-").replace(ae,le)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,o=0,s=t.length,a=i(t);if(n){if(a)for(;s>o&&(r=e.apply(t[o],n),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],n),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(oe,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?re.merge(n,"string"==typeof t?[t]:t):Z.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if($)return $.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;)t[r++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[r++]=e[n++];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],o=0,s=t.length,a=!i;s>o;o++)n=!e(t[o],o),n!==a&&r.push(t[o]);return r},map:function(t,e,n){var r,o=0,s=t.length,a=i(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,n),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,n),null!=r&&l.push(r);return Q.apply([],l)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(r=t[e],e=t,t=r),re.isFunction(t)?(i=K.call(arguments,2),n=function(){return t.apply(e||this,i.concat(K.call(arguments)))},n.guid=t.guid=t.guid||re.guid++,n):void 0},now:function(){return+new Date},support:ie}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()});var ue=function(t){function e(t,e,i,n){var r,o,s,a,l,u,c,d,f,m;if((e?e.ownerDocument||e:k)!==L&&D(e),e=e||L,i=i||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return i;if(!n&&F){if(11!==a&&(r=ge.exec(t)))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return i;if(o.id===s)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&N(e,o)&&o.id===s)return i.push(o),i}else{if(r[2])return $.apply(i,e.getElementsByTagName(t)),i;if((s=r[3])&&S.getElementsByClassName)return $.apply(i,e.getElementsByClassName(s)),i}if(S.qsa&&(!G||!G.test(t))){if(d=c=O,f=e,m=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=w(t),(c=e.getAttribute("id"))?d=c.replace(Te,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",l=u.length;l--;)u[l]=d+p(u[l]);f=_e.test(t)&&h(e.parentNode)||e,m=u.join(",")}if(m)try{return $.apply(i,f.querySelectorAll(m)),i}catch(v){}finally{c||e.removeAttribute("id")}}}return P(t.replace(le,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>b.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[O]=!0,t}function r(t){var e=L.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)b.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||Y)-(~t.sourceIndex||Y);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function h(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function c(){}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function d(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=V++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,s){var a,l,u=[z,o];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[O]||(e[O]={}),(a=l[n])&&a[0]===z&&a[1]===o)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,s))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function m(t,i,n){for(var r=0,o=i.length;o>r;r++)e(t,i[r],n);return n}function v(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(o=t[a])&&(!i||i(o,n,r))&&(s.push(o),u&&e.push(a));return s}function y(t,e,i,r,o,s){return r&&!r[O]&&(r=y(r)),o&&!o[O]&&(o=y(o,s)),n(function(n,s,a,l){var u,h,c,p=[],d=[],f=s.length,y=n||m(e||"*",a.nodeType?[a]:a,[]),g=!t||!n&&e?y:v(y,p,t,a,l),_=i?o||(n?t:f||r)?[]:s:g;if(i&&i(g,_,a,l),r)for(u=v(_,d),r(u,[],a,l),h=u.length;h--;)(c=u[h])&&(_[d[h]]=!(g[d[h]]=c));if(n){if(o||t){if(o){for(u=[],h=_.length;h--;)(c=_[h])&&u.push(g[h]=c);o(null,_=[],u,l)}for(h=_.length;h--;)(c=_[h])&&(u=o?te(n,c):p[h])>-1&&(n[u]=!(s[u]=c))}}else _=v(_===s?_.splice(f,_.length):_),o?o(null,s,_,l):$.apply(s,_)})}function g(t){for(var e,i,n,r=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],a=o?1:0,l=d(function(t){return t===e},s,!0),u=d(function(t){return te(e,t)>-1},s,!0),h=[function(t,i,n){var r=!o&&(n||i!==A)||((e=i).nodeType?l(t,i,n):u(t,i,n));return e=null,r}];r>a;a++)if(i=b.relative[t[a].type])h=[d(f(h),i)];else{if(i=b.filter[t[a].type].apply(null,t[a].matches),i[O]){for(n=++a;r>n&&!b.relative[t[n].type];n++);return y(a>1&&f(h),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),i,n>a&&g(t.slice(a,n)),r>n&&g(t=t.slice(n)),r>n&&p(t))}h.push(i)}return f(h)}function _(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,l,u){var h,c,p,d=0,f="0",m=n&&[],y=[],g=A,_=n||o&&b.find.TAG("*",u),T=z+=null==g?1:Math.random()||.1,S=_.length;for(u&&(A=s!==L&&s);f!==S&&null!=(h=_[f]);f++){if(o&&h){for(c=0;p=t[c++];)if(p(h,s,a)){l.push(h);break}u&&(z=T)}r&&((h=!p&&h)&&d--,n&&m.push(h))}if(d+=f,r&&f!==d){for(c=0;p=i[c++];)p(m,y,s,a);if(n){if(d>0)for(;f--;)m[f]||y[f]||(y[f]=Q.call(l));y=v(y)}$.apply(l,y),u&&!n&&y.length>0&&d+i.length>1&&e.uniqueSort(l)}return u&&(z=T,A=g),m};return r?n(s):s}var T,S,b,M,x,w,E,P,A,C,I,D,L,H,F,G,B,R,N,O="sizzle"+1*new Date,k=t.document,z=0,V=0,X=i(),W=i(),j=i(),q=function(t,e){return t===e&&(I=!0),0},Y=1<<31,U={}.hasOwnProperty,K=[],Q=K.pop,Z=K.push,$=K.push,J=K.slice,te=function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ne.replace("w","w#"),oe="\\["+ie+"*("+ne+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ie+"*\\]",se=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ie+"+","g"),le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),he=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),pe=new RegExp(se),de=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_e=/[+~]/,Te=/'|\\/g,Se=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),be=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Me=function(){D()};try{$.apply(K=J.call(k.childNodes),k.childNodes),K[k.childNodes.length].nodeType}catch(xe){$={apply:K.length?function(t,e){Z.apply(t,J.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}S=e.support={},x=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},D=e.setDocument=function(t){var e,i,n=t?t.ownerDocument||t:k;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,H=n.documentElement,i=n.defaultView,i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",Me,!1):i.attachEvent&&i.attachEvent("onunload",Me)),F=!x(n),S.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),S.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),S.getElementsByClassName=ye.test(n.getElementsByClassName),S.getById=r(function(t){return H.appendChild(t).id=O,!n.getElementsByName||!n.getElementsByName(O).length}),S.getById?(b.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&F){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},b.filter.ID=function(t){var e=t.replace(Se,be);return function(t){return t.getAttribute("id")===e}}):(delete b.find.ID,b.filter.ID=function(t){var e=t.replace(Se,be);return function(t){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),b.find.TAG=S.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):S.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},b.find.CLASS=S.getElementsByClassName&&function(t,e){return F?e.getElementsByClassName(t):void 0},B=[],G=[],(S.qsa=ye.test(n.querySelectorAll))&&(r(function(t){H.appendChild(t).innerHTML="<a id='"+O+"'></a><select id='"+O+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&G.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||G.push("\\["+ie+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+O+"-]").length||G.push("~="),t.querySelectorAll(":checked").length||G.push(":checked"),t.querySelectorAll("a#"+O+"+*").length||G.push(".#.+[+~]")}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&G.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||G.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),G.push(",.*:")})),(S.matchesSelector=ye.test(R=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&r(function(t){S.disconnectedMatch=R.call(t,"div"),R.call(t,"[s!='']:x"),B.push("!=",se)}),G=G.length&&new RegExp(G.join("|")),B=B.length&&new RegExp(B.join("|")),e=ye.test(H.compareDocumentPosition),N=e||ye.test(H.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return I=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!S.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===k&&N(k,t)?-1:e===n||e.ownerDocument===k&&N(k,e)?1:C?te(C,t)-te(C,e):0:4&i?-1:1)}:function(t,e){if(t===e)return I=!0,0;var i,r=0,o=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!o||!a)return t===n?-1:e===n?1:o?-1:a?1:C?te(C,t)-te(C,e):0;if(o===a)return s(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===k?-1:u[r]===k?1:0},n):L},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==L&&D(t),i=i.replace(ce,"='$1']"),!(!S.matchesSelector||!F||B&&B.test(i)||G&&G.test(i)))try{var n=R.call(t,i);if(n||S.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,L,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==L&&D(t),N(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==L&&D(t);var i=b.attrHandle[e.toLowerCase()],n=i&&U.call(b.attrHandle,e.toLowerCase())?i(t,e,!F):void 0;return void 0!==n?n:S.attributes||!F?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(I=!S.detectDuplicates,C=!S.sortStable&&t.slice(0),t.sort(q),I){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return C=null,t},M=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=M(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=M(e);return i},b=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Se,be),t[3]=(t[3]||t[4]||t[5]||"").replace(Se,be),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&pe.test(i)&&(e=w(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Se,be).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=X[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&X(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(ae," ")+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var u,h,c,p,d,f,m=o!==s?"nextSibling":"previousSibling",v=e.parentNode,y=a&&e.nodeName.toLowerCase(),g=!l&&!a;if(v){if(o){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?v.firstChild:v.lastChild],s&&g){for(h=v[O]||(v[O]={}),u=h[t]||[],d=u[0]===z&&u[1],p=u[0]===z&&u[2],c=d&&v.childNodes[d];c=++d&&c&&c[m]||(p=d=0)||f.pop();)if(1===c.nodeType&&++p&&c===e){h[t]=[z,d,p];break}}else if(g&&(u=(e[O]||(e[O]={}))[t])&&u[0]===z)p=u[1];else for(;(c=++d&&c&&c[m]||(p=d=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==y:1!==c.nodeType)||!++p||(g&&((c[O]||(c[O]={}))[t]=[z,p]),c!==e)););return p-=r,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(t,i){var r,o=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[O]?o(i):o.length>1?(r=[t,t,"",i],b.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=te(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=E(t.replace(le,"$1"));return r[O]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),e[0]=null,!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return t=t.replace(Se,be),function(e){return(e.textContent||e.innerText||M(e)).indexOf(t)>-1}}),lang:n(function(t){return de.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(Se,be).toLowerCase(),function(e){var i;do if(i=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===H},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[0>i?i+e:i]}),even:u(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},b.pseudos.nth=b.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[T]=a(T);for(T in{submit:!0,reset:!0})b.pseudos[T]=l(T);return c.prototype=b.filters=b.pseudos,b.setFilters=new c,w=e.tokenize=function(t,i){var n,r,o,s,a,l,u,h=W[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],u=b.preFilter;a;){(!n||(r=ue.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=he.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(le," ")}),a=a.slice(n.length));for(s in b.filter)!(r=fe[s].exec(a))||u[s]&&!(r=u[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):W(t,l).slice(0)},E=e.compile=function(t,e){var i,n=[],r=[],o=j[t+" "];if(!o){for(e||(e=w(t)),i=e.length;i--;)o=g(e[i]),o[O]?n.push(o):r.push(o);o=j(t,_(r,n)),o.selector=t}return o},P=e.select=function(t,e,i,n){var r,o,s,a,l,u="function"==typeof t&&t,c=!n&&w(t=u.selector||t);if(i=i||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&S.getById&&9===e.nodeType&&F&&b.relative[o[1].type]){if(e=(b.find.ID(s.matches[0].replace(Se,be),e)||[])[0],!e)return i;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(s=o[r],!b.relative[a=s.type]);)if((l=b.find[a])&&(n=l(s.matches[0].replace(Se,be),_e.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),t=n.length&&p(o),!t)return $.apply(i,n),i;break}}return(u||E(t,c))(n,e,!F,i,_e.test(t)&&h(e.parentNode)||e),i},S.sortStable=O.split("").sort(q).join("")===O,S.detectDuplicates=!!I,D(),S.sortDetached=r(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),S.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ee,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);re.find=ue,re.expr=ue.selectors,re.expr[":"]=re.expr.pseudos,re.unique=ue.uniqueSort,re.text=ue.getText,re.isXMLDoc=ue.isXML,re.contains=ue.contains;var he=re.expr.match.needsContext,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;re.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?re.find.matchesSelector(n,t)?[n]:[]:re.find.matches(t,re.grep(e,function(t){return 1===t.nodeType}))},re.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(re(t).filter(function(){for(e=0;r>e;e++)if(re.contains(n[e],this))return!0}));for(e=0;r>e;e++)re.find(t,n[e],i);return i=this.pushStack(r>1?re.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&he.test(t)?re(t):t||[],!1).length}});var de,fe=t.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ve=re.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:me.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||de).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof re?e[0]:e,re.merge(this,re.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:fe,!0)),ce.test(i[1])&&re.isPlainObject(e))for(i in e)re.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=fe.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return de.find(t);this.length=1,this[0]=n}return this.context=fe,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):re.isFunction(t)?"undefined"!=typeof de.ready?de.ready(t):t(re):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),re.makeArray(t,this))};ve.prototype=re.fn,de=re(fe);var ye=/^(?:parents|prev(?:Until|All))/,ge={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(t,e,i){for(var n=[],r=t[e];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!re(r).is(i));)1===r.nodeType&&n.push(r),r=r[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),re.fn.extend({has:function(t){var e,i=re(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(re.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],s=he.test(t)||"string"!=typeof t?re(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&re.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?re.unique(o):o)},index:function(t){return t?"string"==typeof t?re.inArray(this[0],re(t)):re.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(re.unique(re.merge(this.get(),re(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),re.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return re.dir(t,"parentNode")},parentsUntil:function(t,e,i){return re.dir(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return re.dir(t,"nextSibling")},prevAll:function(t){return re.dir(t,"previousSibling")},nextUntil:function(t,e,i){return re.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return re.dir(t,"previousSibling",i)},siblings:function(t){return re.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return re.sibling(t.firstChild)},contents:function(t){return re.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:re.merge([],t.childNodes)}},function(t,e){re.fn[t]=function(i,n){var r=re.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=re.filter(n,r)),this.length>1&&(ge[t]||(r=re.unique(r)),ye.test(t)&&(r=r.reverse())),this.pushStack(r)}});var _e=/\S+/g,Te={};re.Callbacks=function(t){t="string"==typeof t?Te[t]||o(t):re.extend({},t);var e,i,n,r,s,a,l=[],u=!t.once&&[],h=function(o){for(i=t.memory&&o,n=!0,s=a||0,a=0,r=l.length,e=!0;l&&r>s;s++)if(l[s].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(u?u.length&&h(u.shift()):i?l=[]:c.disable())},c={add:function(){if(l){var n=l.length;!function o(e){re.each(e,function(e,i){var n=re.type(i);"function"===n?t.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?r=l.length:i&&(a=n,h(i))}return this},remove:function(){return l&&re.each(arguments,function(t,i){for(var n;(n=re.inArray(i,l,n))>-1;)l.splice(n,1),e&&(r>=n&&r--,s>=n&&s--)}),this},has:function(t){return t?re.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=i=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,i||c.disable(),this},locked:function(){return!u},fireWith:function(t,i){return!l||n&&!u||(i=i||[],i=[t,i.slice?i.slice():i],e?u.push(i):h(i)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},re.extend({Deferred:function(t){var e=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return re.Deferred(function(i){re.each(e,function(e,o){var s=re.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&re.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?re.extend(t,n):n}},r={};return n.pipe=n.then,re.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,o=K.call(arguments),s=o.length,a=1!==s||t&&re.isFunction(t.promise)?s:0,l=1===a?t:re.Deferred(),u=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?K.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)o[r]&&re.isFunction(o[r].promise)?o[r].promise().done(u(r,n,o)).fail(l.reject).progress(u(r,i,e)):--a;return a||l.resolveWith(n,o),l.promise()}});var Se;re.fn.ready=function(t){return re.ready.promise().done(t),this},re.extend({isReady:!1,readyWait:1,holdReady:function(t){t?re.readyWait++:re.ready(!0)},ready:function(t){if(t===!0?!--re.readyWait:!re.isReady){if(!fe.body)return setTimeout(re.ready);re.isReady=!0,t!==!0&&--re.readyWait>0||(Se.resolveWith(fe,[re]),re.fn.triggerHandler&&(re(fe).triggerHandler("ready"),re(fe).off("ready")))}}}),re.ready.promise=function(e){if(!Se)if(Se=re.Deferred(),"complete"===fe.readyState)setTimeout(re.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{fe.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&fe.documentElement}catch(n){}i&&i.doScroll&&!function r(){if(!re.isReady){try{i.doScroll("left")}catch(t){return setTimeout(r,50)}s(),re.ready()}}()}return Se.promise(e)};var be,Me="undefined";for(be in re(ie))break;ie.ownLast="0"!==be,ie.inlineBlockNeedsLayout=!1,re(function(){var t,e,i,n;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Me&&(e.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=t=3===e.offsetWidth,t&&(i.style.zoom=1)),i.removeChild(n))}),function(){var t=fe.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),re.acceptData=function(t){var e=re.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,we=/([A-Z])/g;re.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?re.cache[t[re.expando]]:t[re.expando],!!t&&!u(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return c(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return c(t,e,!0)}}),re.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=re.data(o),1===o.nodeType&&!re._data(o,"parsedAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=re.camelCase(n.slice(5)),l(o,n,r[n])));re._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){re.data(this,t)}):arguments.length>1?this.each(function(){re.data(this,t,e)}):o?l(o,t,re.data(o,t)):void 0},removeData:function(t){return this.each(function(){re.removeData(this,t)})}}),re.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=re._data(t,e),i&&(!n||re.isArray(i)?n=re._data(t,e,re.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=re.queue(t,e),n=i.length,r=i.shift(),o=re._queueHooks(t,e),s=function(){re.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return re._data(t,i)||re._data(t,i,{empty:re.Callbacks("once memory").add(function(){re._removeData(t,e+"queue"),re._removeData(t,i)})})}}),re.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?re.queue(this[0],t):void 0===e?this:this.each(function(){var i=re.queue(this,t,e);re._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&re.dequeue(this,t)})},dequeue:function(t){return this.each(function(){re.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=re.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=re._data(o[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Pe=["Top","Right","Bottom","Left"],Ae=function(t,e){return t=e||t,"none"===re.css(t,"display")||!re.contains(t.ownerDocument,t)},Ce=re.access=function(t,e,i,n,r,o,s){var a=0,l=t.length,u=null==i;if("object"===re.type(i)){r=!0;for(a in i)re.access(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,re.isFunction(n)||(s=!0),u&&(s?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(re(t),i)})),e))for(;l>a;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:u?e.call(t):l?e(t[0],i):o},Ie=/^(?:checkbox|radio)$/i;!function(){var t=fe.createElement("input"),e=fe.createElement("div"),i=fe.createDocumentFragment();if(e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,t.type="checkbox",t.checked=!0,i.appendChild(t),ie.appendChecked=t.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,i.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(n){ie.deleteExpando=!1}}}(),function(){var e,i,n=fe.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ie[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ie[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var De=/^(?:input|select|textarea)$/i,Le=/^key/,He=/^(?:mouse|pointer|contextmenu)|click/,Fe=/^(?:focusinfocus|focusoutblur)$/,Ge=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,u,h,c,p,d,f,m,v=re._data(t);if(v){for(i.handler&&(l=i,i=l.handler,r=l.selector),i.guid||(i.guid=re.guid++),(s=v.events)||(s=v.events={}),(h=v.handle)||(h=v.handle=function(t){return typeof re===Me||t&&re.event.triggered===t.type?void 0:re.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(_e)||[""],a=e.length;a--;)o=Ge.exec(e[a])||[],d=m=o[1],f=(o[2]||"").split(".").sort(),d&&(u=re.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=re.event.special[d]||{},c=re.extend({type:d,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:f.join(".")},l),(p=s[d])||(p=s[d]=[],p.delegateCount=0,u.setup&&u.setup.call(t,n,f,h)!==!1||(t.addEventListener?t.addEventListener(d,h,!1):t.attachEvent&&t.attachEvent("on"+d,h))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),re.event.global[d]=!0);t=null}},remove:function(t,e,i,n,r){var o,s,a,l,u,h,c,p,d,f,m,v=re.hasData(t)&&re._data(t);if(v&&(h=v.events)){for(e=(e||"").match(_e)||[""],u=e.length;u--;)if(a=Ge.exec(e[u])||[],d=m=a[1],f=(a[2]||"").split(".").sort(),d){for(c=re.event.special[d]||{},d=(n?c.delegateType:c.bindType)||d,p=h[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=p.length;o--;)s=p[o],!r&&m!==s.origType||i&&i.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(p.splice(o,1),s.selector&&p.delegateCount--,c.remove&&c.remove.call(t,s));l&&!p.length&&(c.teardown&&c.teardown.call(t,f,v.handle)!==!1||re.removeEvent(t,d,v.handle),delete h[d])}else for(d in h)re.event.remove(t,d+e[u],i,n,!0);re.isEmptyObject(h)&&(delete v.handle,re._removeData(t,"events"))}},trigger:function(e,i,n,r){var o,s,a,l,u,h,c,p=[n||fe],d=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=h=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!Fe.test(d+re.event.triggered)&&(d.indexOf(".")>=0&&(f=d.split("."),d=f.shift(),f.sort()),s=d.indexOf(":")<0&&"on"+d,e=e[re.expando]?e:new re.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:re.makeArray(i,[e]),u=re.event.special[d]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!re.isWindow(n)){for(l=u.delegateType||d,Fe.test(l+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),h=a;h===(n.ownerDocument||fe)&&p.push(h.defaultView||h.parentWindow||t)}for(c=0;(a=p[c++])&&!e.isPropagationStopped();)e.type=c>1?l:u.bindType||d,o=(re._data(a,"events")||{})[e.type]&&re._data(a,"handle"),o&&o.apply(a,i),o=s&&a[s],o&&o.apply&&re.acceptData(a)&&(e.result=o.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=d,!r&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(p.pop(),i)===!1)&&re.acceptData(n)&&s&&n[d]&&!re.isWindow(n)){h=n[s],h&&(n[s]=null),re.event.triggered=d;try{n[d]()}catch(m){}re.event.triggered=void 0,h&&(n[s]=h)}return e.result}},dispatch:function(t){t=re.event.fix(t);var e,i,n,r,o,s=[],a=K.call(arguments),l=(re._data(this,"events")||{})[t.type]||[],u=re.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(s=re.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(n=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((re.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],o=0;a>o;o++)n=e[o],i=n.selector+" ",void 0===r[i]&&(r[i]=n.needsContext?re(i,this).index(l)>=0:re.find(i,this,null,[l]).length),r[i]&&r.push(n);r.length&&s.push({elem:l,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[re.expando])return t;var e,i,n,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=He.test(r)?this.mouseHooks:Le.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new re.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||fe),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||fe,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return re.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=re.extend(new re.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?re.event.trigger(r,null,e):re.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},re.removeEvent=fe.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Me&&(t[n]=null),t.detachEvent(n,i))},re.Event=function(t,e){return this instanceof re.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?p:d):this.type=t,e&&re.extend(this,e),this.timeStamp=t&&t.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(t,e)},re.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=p,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=p,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=p,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){re.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==n&&!re.contains(n,r))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ie.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=re.nodeName(e,"input")||re.nodeName(e,"button")?e.form:void 0;i&&!re._data(i,"submitBubbles")&&(re.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),re._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&re.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),ie.changeBubbles||(re.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(re.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,t,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(t){var e=t.target;De.test(e.nodeName)&&!re._data(e,"changeBubbles")&&(re.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||re.event.simulate("change",this.parentNode,t,!0)}),re._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!De.test(this.nodeName)}}),ie.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){re.event.simulate(e,t.target,re.event.fix(t),!0)};re.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=re._data(n,e);r||n.addEventListener(t,i,!0),re._data(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=re._data(n,e)-1;r?re._data(n,e,r):(n.removeEventListener(t,i,!0),re._removeData(n,e))}}}),re.fn.extend({on:function(t,e,i,n,r){var o,s;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=d;else if(!n)return this;return 1===r&&(s=n,n=function(t){return re().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=re.guid++)),this.each(function(){re.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,re(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=d),this.each(function(){re.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){re.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?re.event.trigger(t,e,i,!0):void 0}});var Be="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Re=/ jQuery\d+="(?:null|\d+)"/g,Ne=new RegExp("<(?:"+Be+")[\\s/>]","i"),Oe=/^\s+/,ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,Ve=/<tbody/i,Xe=/<|&#?\w+;/,We=/<(?:script|style|link)/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,qe=/^$|\/(?:java|ecma)script/i,Ye=/^true\/(.*)/,Ue=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Qe=m(fe),Ze=Qe.appendChild(fe.createElement("div"));Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,re.extend({clone:function(t,e,i){var n,r,o,s,a,l=re.contains(t.ownerDocument,t);if(ie.html5Clone||re.isXMLDoc(t)||!Ne.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Ze.innerHTML=t.outerHTML,Ze.removeChild(o=Ze.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||re.isXMLDoc(t)))for(n=v(o),a=v(t),s=0;null!=(r=a[s]);++s)n[s]&&M(r,n[s]);if(e)if(i)for(a=a||v(t),n=n||v(o),s=0;null!=(r=a[s]);s++)b(r,n[s]);else b(t,o);return n=v(o,"script"),n.length>0&&S(n,!l&&v(t,"script")),n=a=r=null,o},buildFragment:function(t,e,i,n){for(var r,o,s,a,l,u,h,c=t.length,p=m(e),d=[],f=0;c>f;f++)if(o=t[f],o||0===o)if("object"===re.type(o))re.merge(d,o.nodeType?[o]:o);else if(Xe.test(o)){for(a=a||p.appendChild(e.createElement("div")),l=(ze.exec(o)||["",""])[1].toLowerCase(),h=Ke[l]||Ke._default,a.innerHTML=h[1]+o.replace(ke,"<$1></$2>")+h[2],r=h[0];r--;)a=a.lastChild;if(!ie.leadingWhitespace&&Oe.test(o)&&d.push(e.createTextNode(Oe.exec(o)[0])),!ie.tbody)for(o="table"!==l||Ve.test(o)?"<table>"!==h[1]||Ve.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)re.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(re.merge(d,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else d.push(e.createTextNode(o));for(a&&p.removeChild(a),ie.appendChecked||re.grep(v(d,"input"),y),f=0;o=d[f++];)if((!n||-1===re.inArray(o,n))&&(s=re.contains(o.ownerDocument,o),a=v(p.appendChild(o),"script"),s&&S(a),i))for(r=0;o=a[r++];)qe.test(o.type||"")&&i.push(o);return a=null,p},cleanData:function(t,e){for(var i,n,r,o,s=0,a=re.expando,l=re.cache,u=ie.deleteExpando,h=re.event.special;null!=(i=t[s]);s++)if((e||re.acceptData(i))&&(r=i[a],o=r&&l[r])){if(o.events)for(n in o.events)h[n]?re.event.remove(i,n):re.removeEvent(i,n,o.handle);l[r]&&(delete l[r],u?delete i[a]:typeof i.removeAttribute!==Me?i.removeAttribute(a):i[a]=null,U.push(r))}}}),re.fn.extend({text:function(t){return Ce(this,function(t){return void 0===t?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=g(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=g(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?re.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||re.cleanData(v(i)),i.parentNode&&(e&&re.contains(i.ownerDocument,i)&&S(v(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&re.cleanData(v(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&re.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return re.clone(this,t,e)})},html:function(t){return Ce(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Re,""):void 0;if(!("string"!=typeof t||We.test(t)||!ie.htmlSerialize&&Ne.test(t)||!ie.leadingWhitespace&&Oe.test(t)||Ke[(ze.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(ke,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(re.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,re.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=Q.apply([],t);var i,n,r,o,s,a,l=0,u=this.length,h=this,c=u-1,p=t[0],d=re.isFunction(p);if(d||u>1&&"string"==typeof p&&!ie.checkClone&&je.test(p))return this.each(function(i){var n=h.eq(i);d&&(t[0]=p.call(this,i,n.html())),n.domManip(t,e)});if(u&&(a=re.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(o=re.map(v(a,"script"),_),r=o.length;u>l;l++)n=a,l!==c&&(n=re.clone(n,!0,!0),r&&re.merge(o,v(n,"script"))),e.call(this[l],n,l);if(r)for(s=o[o.length-1].ownerDocument,re.map(o,T),l=0;r>l;l++)n=o[l],qe.test(n.type||"")&&!re._data(n,"globalEval")&&re.contains(s,n)&&(n.src?re._evalUrl&&re._evalUrl(n.src):re.globalEval((n.text||n.textContent||n.innerHTML||"").replace(Ue,"")));a=i=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){re.fn[t]=function(t){for(var i,n=0,r=[],o=re(t),s=o.length-1;s>=n;n++)i=n===s?this:this.clone(!0),re(o[n])[e](i),Z.apply(r,i.get());return this.pushStack(r)}});var $e,Je={};!function(){var t;ie.shrinkWrapBlocks=function(){if(null!=t)return t;t=!1;var e,i,n;return i=fe.getElementsByTagName("body")[0],i&&i.style?(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),typeof e.style.zoom!==Me&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(fe.createElement("div")).style.width="5px",t=3!==e.offsetWidth),i.removeChild(n),t):void 0}}();var ti,ei,ii=/^margin/,ni=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),ri=/^(top|right|bottom|left)$/;t.getComputedStyle?(ti=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)},ei=function(t,e,i){var n,r,o,s,a=t.style;return i=i||ti(t),s=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==s||re.contains(t.ownerDocument,t)||(s=re.style(t,e)),ni.test(s)&&ii.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0===s?s:s+""}):fe.documentElement.currentStyle&&(ti=function(t){return t.currentStyle},ei=function(t,e,i){var n,r,o,s,a=t.style;return i=i||ti(t),s=i?i[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),ni.test(s)&&!ri.test(e)&&(n=a.left,r=t.runtimeStyle,o=r&&r.left,o&&(r.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=n,o&&(r.left=o)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,i,n,r;i=fe.getElementsByTagName("body")[0],i&&i.style&&(e=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=s=!1,l=!0,t.getComputedStyle&&(o="1%"!==(t.getComputedStyle(e,null)||{}).top,s="4px"===(t.getComputedStyle(e,null)||{width:"4px"}).width,r=e.appendChild(fe.createElement("div")),r.style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",e.style.width="1px",l=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight),e.removeChild(r)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=e.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===r[0].offsetHeight,a&&(r[0].style.display="",r[1].style.display="none",a=0===r[0].offsetHeight),i.removeChild(n))}var i,n,r,o,s,a,l;i=fe.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=i.getElementsByTagName("a")[0],n=r&&r.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,re.extend(ie,{reliableHiddenOffsets:function(){return null==a&&e(),a},boxSizingReliable:function(){return null==s&&e(),s},pixelPosition:function(){return null==o&&e(),o},reliableMarginRight:function(){return null==l&&e(),l}}))}(),re.swap=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r};var oi=/alpha\([^)]*\)/i,si=/opacity\s*=\s*([^)]*)/,ai=/^(none|table(?!-c[ea]).+)/,li=new RegExp("^("+Ee+")(.*)$","i"),ui=new RegExp("^([+-])=("+Ee+")","i"),hi={position:"absolute",visibility:"hidden",display:"block"},ci={letterSpacing:"0",fontWeight:"400"},pi=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ei(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=re.camelCase(e),l=t.style;if(e=re.cssProps[a]||(re.cssProps[a]=P(l,a)),s=re.cssHooks[e]||re.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e];if(o=typeof i,"string"===o&&(r=ui.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(re.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||re.cssNumber[a]||(i+="px"),ie.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(i=s.set(t,i,n)))))try{l[e]=i}catch(u){}}},css:function(t,e,i,n){var r,o,s,a=re.camelCase(e);return e=re.cssProps[a]||(re.cssProps[a]=P(t.style,a)),s=re.cssHooks[e]||re.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=ei(t,e,n)),"normal"===o&&e in ci&&(o=ci[e]),""===i||i?(r=parseFloat(o),i===!0||re.isNumeric(r)?r||0:o):o}}),re.each(["height","width"],function(t,e){re.cssHooks[e]={get:function(t,i,n){return i?ai.test(re.css(t,"display"))&&0===t.offsetWidth?re.swap(t,hi,function(){return D(t,e,n)}):D(t,e,n):void 0},set:function(t,i,n){var r=n&&ti(t);return C(t,i,n?I(t,e,n,ie.boxSizing&&"border-box"===re.css(t,"boxSizing",!1,r),r):0)}}}),ie.opacity||(re.cssHooks.opacity={get:function(t,e){return si.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=re.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===re.trim(o.replace(oi,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=oi.test(o)?o.replace(oi,r):o+" "+r)}}),re.cssHooks.marginRight=E(ie.reliableMarginRight,function(t,e){return e?re.swap(t,{display:"inline-block"},ei,[t,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(t,e){re.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+Pe[n]+e]=o[n]||o[n-2]||o[0];return r}},ii.test(t)||(re.cssHooks[t+e].set=C)}),re.fn.extend({css:function(t,e){return Ce(this,function(t,e,i){var n,r,o={},s=0;if(re.isArray(e)){for(n=ti(t),r=e.length;r>s;s++)o[e[s]]=re.css(t,e[s],!1,n);return o}return void 0!==i?re.style(t,e,i):re.css(t,e)},t,e,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ae(this)?re(this).show():re(this).hide()})}}),re.Tween=L,L.prototype={constructor:L,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(re.cssNumber[i]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,i=L.propHooks[this.prop];return this.pos=e=this.options.duration?re.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=re.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){re.fx.step[t.prop]?re.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[re.cssProps[t.prop]]||re.cssHooks[t.prop])?re.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},re.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},re.fx=L.prototype.init,re.fx.step={};var di,fi,mi=/^(?:toggle|show|hide)$/,vi=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),yi=/queueHooks$/,gi=[B],_i={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=vi.exec(e),o=r&&r[3]||(re.cssNumber[t]?"":"px"),s=(re.cssNumber[t]||"px"!==o&&+n)&&vi.exec(re.css(i.elem,t)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+n||1;do a=a||".5",s/=a,re.style(i.elem,t,s+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(s=i.start=+s||+n||0,i.unit=o,i.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),i}]};re.Animation=re.extend(N,{tweener:function(t,e){re.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;r>n;n++)i=t[n],_i[i]=_i[i]||[],_i[i].unshift(e)},prefilter:function(t,e){e?gi.unshift(t):gi.push(t)}}),re.speed=function(t,e,i){var n=t&&"object"==typeof t?re.extend({},t):{complete:i||!i&&e||re.isFunction(t)&&t,duration:t,easing:i&&e||e&&!re.isFunction(e)&&e};return n.duration=re.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in re.fx.speeds?re.fx.speeds[n.duration]:re.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){re.isFunction(n.old)&&n.old.call(this),n.queue&&re.dequeue(this,n.queue)},n},re.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=re.isEmptyObject(t),o=re.speed(e,i,n),s=function(){var e=N(this,re.extend({},t),o);(r||re._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=re.timers,s=re._data(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&yi.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));(e||!i)&&re.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=re._data(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=re.timers,s=n?n.length:0;for(i.finish=!0,re.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),re.each(["toggle","show","hide"],function(t,e){var i=re.fn[e];re.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(F(e,!0),t,n,r)}}),re.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){re.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),re.timers=[],re.fx.tick=function(){var t,e=re.timers,i=0;for(di=re.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||re.fx.stop(),di=void 0},re.fx.timer=function(t){re.timers.push(t),t()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){fi||(fi=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(fi),fi=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(t,e){return t=re.fx?re.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,r;e=fe.createElement("div"),e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=e.getElementsByTagName("a")[0],i=fe.createElement("select"),r=i.appendChild(fe.createElement("option")),t=e.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==e.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!t.value,ie.optSelected=r.selected,ie.enctype=!!fe.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!r.disabled,t=fe.createElement("input"),t.setAttribute("value",""),ie.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ie.radioValue="t"===t.value}();var Ti=/\r/g;re.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=re.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,re(this).val()):t,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(t){return null==t?"":t+""})),e=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(Ti,""):null==i?"":i)}}}),re.extend({valHooks:{option:{get:function(t){var e=re.find.attr(t,"value");return null!=e?e:re.trim(re.text(t))}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:n.length,l=0>r?a:o?r:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(ie.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&re.nodeName(i.parentNode,"optgroup"))){if(e=re(i).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=re.makeArray(e),s=r.length;s--;)if(n=r[s],re.inArray(re.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(t,e){return re.isArray(e)?t.checked=re.inArray(re(t).val(),e)>=0:void 0}},ie.checkOn||(re.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Si,bi,Mi=re.expr.attrHandle,xi=/^(?:checked|selected)$/i,wi=ie.getSetAttribute,Ei=ie.input;re.fn.extend({attr:function(t,e){return Ce(this,re.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){re.removeAttr(this,t)})}}),re.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Me?re.prop(t,e,i):(1===o&&re.isXMLDoc(t)||(e=e.toLowerCase(),n=re.attrHooks[e]||(re.expr.match.bool.test(e)?bi:Si)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=re.find.attr(t,e),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void re.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(_e);if(o&&1===t.nodeType)for(;i=o[r++];)n=re.propFix[i]||i,re.expr.match.bool.test(i)?Ei&&wi||!xi.test(i)?t[n]=!1:t[re.camelCase("default-"+i)]=t[n]=!1:re.attr(t,i,""),t.removeAttribute(wi?i:n)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&re.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),bi={set:function(t,e,i){return e===!1?re.removeAttr(t,i):Ei&&wi||!xi.test(i)?t.setAttribute(!wi&&re.propFix[i]||i,i):t[re.camelCase("default-"+i)]=t[i]=!0,i}},re.each(re.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Mi[e]||re.find.attr;Mi[e]=Ei&&wi||!xi.test(e)?function(t,e,n){var r,o;return n||(o=Mi[e],Mi[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,Mi[e]=o),r}:function(t,e,i){return i?void 0:t[re.camelCase("default-"+e)]?e.toLowerCase():null}}),Ei&&wi||(re.attrHooks.value={set:function(t,e,i){return re.nodeName(t,"input")?void(t.defaultValue=e):Si&&Si.set(t,e,i)}}),wi||(Si={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Mi.id=Mi.name=Mi.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},re.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:Si.set},re.attrHooks.contenteditable={set:function(t,e,i){Si.set(t,""===e?!1:e,i)}},re.each(["width","height"],function(t,e){re.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ie.style||(re.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Pi=/^(?:input|select|textarea|button|object)$/i,Ai=/^(?:a|area)$/i;re.fn.extend({prop:function(t,e){return Ce(this,re.prop,t,e,arguments.length>1)},removeProp:function(t){return t=re.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,r,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!re.isXMLDoc(t),o&&(e=re.propFix[e]||e,r=re.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=re.find.attr(t,"tabindex");return e?parseInt(e,10):Pi.test(t.nodeName)||Ai.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||re.each(["href","src"],function(t,e){re.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(re.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),ie.enctype||(re.propFix.enctype="encoding");var Ci=/[\t\r\n\f]/g;re.fn.extend({addClass:function(t){var e,i,n,r,o,s,a=0,l=this.length,u="string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(_e)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ci," "):" ")){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=re.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(t){var e,i,n,r,o,s,a=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(re.isFunction(t))return this.each(function(e){re(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(_e)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Ci," "):"")){for(o=0;r=e[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=t?re.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(re.isFunction(t)?function(i){re(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,r=re(this),o=t.match(_e)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(i===Me||"boolean"===i)&&(this.className&&re._data(this,"__className__",this.className),this.className=this.className||t===!1?"":re._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Ci," ").indexOf(e)>=0)return!0;return!1}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){re.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),re.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Ii=re.now(),Di=/\?/,Li=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;re.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,r=re.trim(e+"");return r&&!re.trim(r.replace(Li,function(t,e,r,o){return i&&e&&(n=0),0===n?t:(i=r||e,n+=!o-!r,"")}))?Function("return "+r)():re.error("Invalid JSON: "+e)},re.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(r){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+e),i};var Hi,Fi,Gi=/#.*$/,Bi=/([?&])_=[^&]*/,Ri=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ni=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Oi=/^(?:GET|HEAD)$/,ki=/^\/\//,zi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Vi={},Xi={},Wi="*/".concat("*");try{Fi=location.href}catch(ji){Fi=fe.createElement("a"),Fi.href="",Fi=Fi.href}Hi=zi.exec(Fi.toLowerCase())||[],re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fi,type:"GET",isLocal:Ni.test(Hi[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?z(z(t,re.ajaxSettings),e):z(re.ajaxSettings,t)},ajaxPrefilter:O(Vi),ajaxTransport:O(Xi),ajax:function(t,e){function i(t,e,i,n){var r,h,y,g,T,b=e;2!==_&&(_=2,a&&clearTimeout(a),u=void 0,s=n||"",S.readyState=t>0?4:0,r=t>=200&&300>t||304===t,i&&(g=V(c,S,i)),g=X(c,g,S,r),r?(c.ifModified&&(T=S.getResponseHeader("Last-Modified"),T&&(re.lastModified[o]=T),T=S.getResponseHeader("etag"),T&&(re.etag[o]=T)),204===t||"HEAD"===c.type?b="nocontent":304===t?b="notmodified":(b=g.state,h=g.data,y=g.error,r=!y)):(y=b,(t||!b)&&(b="error",0>t&&(t=0))),S.status=t,S.statusText=(e||b)+"",r?f.resolveWith(p,[h,b,S]):f.rejectWith(p,[S,b,y]),S.statusCode(v),v=void 0,l&&d.trigger(r?"ajaxSuccess":"ajaxError",[S,c,r?h:y]),m.fireWith(p,[S,b]),l&&(d.trigger("ajaxComplete",[S,c]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,o,s,a,l,u,h,c=re.ajaxSetup({},e),p=c.context||c,d=c.context&&(p.nodeType||p.jquery)?re(p):re.event,f=re.Deferred(),m=re.Callbacks("once memory"),v=c.statusCode||{},y={},g={},_=0,T="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(2===_){if(!h)for(h={};e=Ri.exec(s);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return _||(t=g[i]=g[i]||t,y[t]=e),this},overrideMimeType:function(t){return _||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>_)for(e in t)v[e]=[v[e],t[e]];else S.always(t[S.status]);return this},abort:function(t){var e=t||T;return u&&u.abort(e),i(0,e),this}};if(f.promise(S).complete=m.add,S.success=S.done,S.error=S.fail,c.url=((t||c.url||Fi)+"").replace(Gi,"").replace(ki,Hi[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=re.trim(c.dataType||"*").toLowerCase().match(_e)||[""],null==c.crossDomain&&(n=zi.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Hi[1]&&n[2]===Hi[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Hi[3]||("http:"===Hi[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=re.param(c.data,c.traditional)),k(Vi,c,e,S),2===_)return S;l=re.event&&c.global,l&&0===re.active++&&re.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Oi.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(Di.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Bi.test(o)?o.replace(Bi,"$1_="+Ii++):o+(Di.test(o)?"&":"?")+"_="+Ii++)),c.ifModified&&(re.lastModified[o]&&S.setRequestHeader("If-Modified-Since",re.lastModified[o]),re.etag[o]&&S.setRequestHeader("If-None-Match",re.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&S.setRequestHeader("Content-Type",c.contentType),S.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Wi+"; q=0.01":""):c.accepts["*"]);for(r in c.headers)S.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(c.beforeSend.call(p,S,c)===!1||2===_))return S.abort();T="abort";for(r in{success:1,error:1,complete:1})S[r](c[r]);if(u=k(Xi,c,e,S)){S.readyState=1,l&&d.trigger("ajaxSend",[S,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){S.abort("timeout")},c.timeout));try{_=1,u.send(y,i)}catch(b){if(!(2>_))throw b;i(-1,b)}}else i(-1,"No Transport");return S},getJSON:function(t,e,i){return re.get(t,e,i,"json")},getScript:function(t,e){return re.get(t,void 0,e,"script")}}),re.each(["get","post"],function(t,e){re[e]=function(t,i,n,r){return re.isFunction(i)&&(r=r||n,n=i,i=void 0),re.ajax({url:t,type:e,dataType:r,data:i,success:n})}}),re._evalUrl=function(t){return re.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(t){if(re.isFunction(t))return this.each(function(e){re(this).wrapAll(t.call(this,e))});if(this[0]){var e=re(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(re.isFunction(t)?function(e){re(this).wrapInner(t.call(this,e))}:function(){var e=re(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=re.isFunction(t);return this.each(function(i){re(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||re.css(t,"display"))},re.expr.filters.visible=function(t){return!re.expr.filters.hidden(t)};var qi=/%20/g,Yi=/\[\]$/,Ui=/\r?\n/g,Ki=/^(?:submit|button|image|reset|file)$/i,Qi=/^(?:input|select|textarea|keygen)/i;re.param=function(t,e){var i,n=[],r=function(t,e){e=re.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(t)||t.jquery&&!re.isPlainObject(t))re.each(t,function(){r(this.name,this.value)});else for(i in t)W(i,t[i],e,r);return n.join("&").replace(qi,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=re.prop(this,"elements");return t?re.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!re(this).is(":disabled")&&Qi.test(this.nodeName)&&!Ki.test(t)&&(this.checked||!Ie.test(t))}).map(function(t,e){var i=re(this).val();return null==i?null:re.isArray(i)?re.map(i,function(t){return{name:e.name,value:t.replace(Ui,"\r\n")}}):{name:e.name,value:i.replace(Ui,"\r\n")}}).get()}}),re.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&j()||q()}:j;var Zi=0,$i={},Ji=re.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in $i)$i[t](void 0,!0)}),ie.cors=!!Ji&&"withCredentials"in Ji,Ji=ie.ajax=!!Ji,Ji&&re.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(i,n){var r,o=t.xhr(),s=++Zi;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&o.setRequestHeader(r,i[r]+"");o.send(t.hasContent&&t.data||null),e=function(i,r){var a,l,u;if(e&&(r||4===o.readyState))if(delete $i[s],e=void 0,o.onreadystatechange=re.noop,r)4!==o.readyState&&o.abort();else{u={},a=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(h){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&n(a,l,u,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=$i[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return re.globalEval(t),t}}}),re.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),re.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=fe.head||re("head")[0]||fe.documentElement;return{send:function(n,r){e=fe.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||r(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var tn=[],en=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=tn.pop()||re.expando+"_"+Ii++;return this[t]=!0,t}}),re.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==!1&&(en.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=re.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(en,"$1"+r):e.jsonp!==!1&&(e.url+=(Di.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||re.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,tn.push(r)),s&&re.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),re.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||fe;var n=ce.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=re.buildFragment([t],e,r),r&&r.length&&re(r).remove(),re.merge([],n.childNodes))};var nn=re.fn.load;re.fn.load=function(t,e,i){if("string"!=typeof t&&nn)return nn.apply(this,arguments);var n,r,o,s=this,a=t.indexOf(" ");return a>=0&&(n=re.trim(t.slice(a,t.length)),t=t.slice(0,a)),re.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&re.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?re("<div>").append(re.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,r||[t.responseText,e,t])}),this},re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){re.fn[e]=function(t){return this.on(e,t)}}),re.expr.filters.animated=function(t){return re.grep(re.timers,function(e){return t===e.elem}).length};var rn=t.document.documentElement;re.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,u,h=re.css(t,"position"),c=re(t),p={};"static"===h&&(t.style.position="relative"),a=c.offset(),o=re.css(t,"top"),l=re.css(t,"left"),u=("absolute"===h||"fixed"===h)&&re.inArray("auto",[o,l])>-1,u?(n=c.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),re.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+r),"using"in e?e.using.call(t,p):c.css(p)}},re.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){re.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return e=o.documentElement,re.contains(e,r)?(typeof r.getBoundingClientRect!==Me&&(n=r.getBoundingClientRect()),i=Y(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===re.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),re.nodeName(t[0],"html")||(i=t.offset()),i.top+=re.css(t[0],"borderTopWidth",!0),i.left+=re.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-re.css(n,"marginTop",!0),left:e.left-i.left-re.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||rn;t&&!re.nodeName(t,"html")&&"static"===re.css(t,"position");)t=t.offsetParent;return t||rn})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);re.fn[t]=function(n){return Ce(this,function(t,n,r){var o=Y(t);return void 0===r?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?re(o).scrollLeft():r,i?r:re(o).scrollTop()):t[n]=r)},t,n,arguments.length,null)}}),re.each(["top","left"],function(t,e){re.cssHooks[e]=E(ie.pixelPosition,function(t,i){return i?(i=ei(t,e),ni.test(i)?re(t).position()[e]+"px":i):void 0})}),re.each({Height:"height",Width:"width"},function(t,e){re.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){re.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return Ce(this,function(e,i,n){var r;return re.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?re.css(e,i,s):re.style(e,i,n,s)},e,o?n:void 0,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var on=t.jQuery,sn=t.$;return re.noConflict=function(e){return t.$===re&&(t.$=sn),e&&t.jQuery===re&&(t.jQuery=on),re},typeof e===Me&&(t.jQuery=t.$=re),re}),function(t,e){t(function(){"use strict";function t(t,e){return null!=t&&null!=e&&t.toLowerCase()===e.toLowerCase()}function i(t,e){var i,n,r=t.length;if(!r||!e)return!1;for(i=e.toLowerCase(),n=0;r>n;++n)if(i===t[n].toLowerCase())return!0;return!1}function n(t){for(var e in t)l.call(t,e)&&(t[e]=new RegExp(t[e],"i"))}function r(t){return(t||"").substr(0,500)}function o(t,e){this.ua=r(t),this._cache={},this.maxPhoneWidth=e||600}var s={};s.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b(?!\\))",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},s.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var a,l=Object.prototype.hasOwnProperty;return s.FALLBACK_PHONE="UnknownPhone",s.FALLBACK_TABLET="UnknownTablet",s.FALLBACK_MOBILE="UnknownMobile",a="isArray"in Array?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},function(){var t,e,i,r,o,u,h=s.mobileDetectRules;for(t in h.props)if(l.call(h.props,t)){for(e=h.props[t],a(e)||(e=[e]),o=e.length,r=0;o>r;++r)i=e[r],u=i.indexOf("[VER]"),u>=0&&(i=i.substring(0,u)+"([\\w._\\+]+)"+i.substring(u+5)),e[r]=new RegExp(i,"i");h.props[t]=e}n(h.oss),n(h.phones),n(h.tablets),n(h.uas),n(h.utils),h.oss0={WindowsPhoneOS:h.oss.WindowsPhoneOS,WindowsMobileOS:h.oss.WindowsMobileOS}}(),s.findMatch=function(t,e){for(var i in t)if(l.call(t,i)&&t[i].test(e))return i;return null},s.findMatches=function(t,e){var i=[];for(var n in t)l.call(t,n)&&t[n].test(e)&&i.push(n);return i},s.getVersionStr=function(t,e){var i,n,r,o,a=s.mobileDetectRules.props;if(l.call(a,t))for(i=a[t],r=i.length,n=0;r>n;++n)if(o=i[n].exec(e),null!==o)return o[1];return null},s.getVersion=function(t,e){var i=s.getVersionStr(t,e);return i?s.prepareVersionNo(i):0/0},s.prepareVersionNo=function(t){var e;return e=t.split(/[a-z._ \/\-]/i),1===e.length&&(t=e[0]),e.length>1&&(t=e[0]+".",e.shift(),t+=e.join("")),Number(t)},s.isMobileFallback=function(t){return s.detectMobileBrowsers.fullPattern.test(t)||s.detectMobileBrowsers.shortPattern.test(t.substr(0,4))},s.isTabletFallback=function(t){return s.detectMobileBrowsers.tabletPattern.test(t)},s.prepareDetectionCache=function(t,i,n){if(t.mobile===e){var r,a,l;return(a=s.findMatch(s.mobileDetectRules.tablets,i))?(t.mobile=t.tablet=a,void(t.phone=null)):(r=s.findMatch(s.mobileDetectRules.phones,i))?(t.mobile=t.phone=r,void(t.tablet=null)):void(s.isMobileFallback(i)?(l=o.isPhoneSized(n),l===e?(t.mobile=s.FALLBACK_MOBILE,t.tablet=t.phone=null):l?(t.mobile=t.phone=s.FALLBACK_PHONE,t.tablet=null):(t.mobile=t.tablet=s.FALLBACK_TABLET,t.phone=null)):s.isTabletFallback(i)?(t.mobile=t.tablet=s.FALLBACK_TABLET,t.phone=null):t.mobile=t.tablet=t.phone=null)}},s.mobileGrade=function(t){var e=null!==t.mobile();return t.os("iOS")&&t.version("iPad")>=4.3||t.os("iOS")&&t.version("iPhone")>=3.1||t.os("iOS")&&t.version("iPod")>=3.1||t.version("Android")>2.1&&t.is("Webkit")||t.version("Windows Phone OS")>=7||t.is("BlackBerry")&&t.version("BlackBerry")>=6||t.match("Playbook.*Tablet")||t.version("webOS")>=1.4&&t.match("Palm|Pre|Pixi")||t.match("hp.*TouchPad")||t.is("Firefox")&&t.version("Firefox")>=12||t.is("Chrome")&&t.is("AndroidOS")&&t.version("Android")>=4||t.is("Skyfire")&&t.version("Skyfire")>=4.1&&t.is("AndroidOS")&&t.version("Android")>=2.3||t.is("Opera")&&t.version("Opera Mobi")>11&&t.is("AndroidOS")||t.is("MeeGoOS")||t.is("Tizen")||t.is("Dolfin")&&t.version("Bada")>=2||(t.is("UC Browser")||t.is("Dolfin"))&&t.version("Android")>=2.3||t.match("Kindle Fire")||t.is("Kindle")&&t.version("Kindle")>=3||t.is("AndroidOS")&&t.is("NookTablet")||t.version("Chrome")>=11&&!e||t.version("Safari")>=5&&!e||t.version("Firefox")>=4&&!e||t.version("MSIE")>=7&&!e||t.version("Opera")>=10&&!e?"A":t.os("iOS")&&t.version("iPad")<4.3||t.os("iOS")&&t.version("iPhone")<3.1||t.os("iOS")&&t.version("iPod")<3.1||t.is("Blackberry")&&t.version("BlackBerry")>=5&&t.version("BlackBerry")<6||t.version("Opera Mini")>=5&&t.version("Opera Mini")<=6.5&&(t.version("Android")>=2.3||t.is("iOS"))||t.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||t.version("Opera Mobi")>=11&&t.is("SymbianOS")?"B":t.version("BlackBerry")<5||t.match("MSIEMobile|Windows CE.*Mobile")||t.version("Windows Mobile")<=5.2?"C":"C"},s.detectOS=function(t){return s.findMatch(s.mobileDetectRules.oss0,t)||s.findMatch(s.mobileDetectRules.oss,t)},s.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},o.prototype={constructor:o,mobile:function(){return s.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return s.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return s.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===e&&(this._cache.userAgent=s.findMatch(s.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===e&&(this._cache.userAgents=s.findMatches(s.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===e&&(this._cache.os=s.detectOS(this.ua)),this._cache.os},version:function(t){return s.getVersion(t,this.ua)},versionStr:function(t){return s.getVersionStr(t,this.ua)},is:function(e){return i(this.userAgents(),e)||t(e,this.os())||t(e,this.phone())||t(e,this.tablet())||i(s.findMatches(s.mobileDetectRules.utils,this.ua),e)},match:function(t){return t instanceof RegExp||(t=new RegExp(t,"i")),t.test(this.ua)},isPhoneSized:function(t){return o.isPhoneSized(t||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===e&&(this._cache.grade=s.mobileGrade(this)),this._cache.grade}},o.isPhoneSized="undefined"!=typeof window&&window.screen?function(t){return 0>t?e:s.getDeviceSmallerSide()<=t}:function(){},o._impl=s,o.version="1.4.4 2019-09-21",o})}(function(){if("undefined"!=typeof module&&module.exports)return function(t){module.exports=t()};if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof window)return function(t){window.MobileDetect=t()};throw new Error("unknown environment")}()),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Marzipano=t()}}(function(){var t;return function(){function t(e,i,n){function r(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}return t}()({1:[function(e,i){!function(e,n,r){void 0!==i&&i.exports?i.exports=r():"function"==typeof t&&t.amd?t("bowser",r):e.bowser=r()}(this,0,function(){function t(t){function e(e){var i=t.match(e);return i&&i.length>1&&i[1]||""}function i(e){var i=t.match(e);return i&&i.length>1&&i[2]||""}var r,o=e(/(ipod|iphone|ipad)/i).toLowerCase(),a=/like android/i.test(t),l=!a&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),h=!u&&/nexus\s*[0-9]+/i.test(t),c=/CrOS/.test(t),p=/silk/i.test(t),d=/sailfish/i.test(t),f=/tizen/i.test(t),m=/(web|hpw)(o|0)s/i.test(t),v=/windows phone/i.test(t),y=(/SamsungBrowser/i.test(t),!v&&/windows/i.test(t)),g=!o&&!p&&/macintosh/i.test(t),_=!l&&!d&&!f&&!m&&/linux/i.test(t),T=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),S=e(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t)&&!/tablet pc/i.test(t),M=!b&&/[^-]mobi/i.test(t),x=/xbox/i.test(t);/opera/i.test(t)?r={name:"Opera",opera:s,version:S||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?r={name:"Opera",opera:s,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||S}:/SamsungBrowser/i.test(t)?r={name:"Samsung Internet for Android",samsungBrowser:s,version:S||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?r={name:"NAVER Whale browser",whale:s,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?r={name:"MZ Browser",mzbrowser:s,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?r={name:"Opera Coast",coast:s,version:S||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?r={name:"Focus",focus:s,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?r={name:"Yandex Browser",yandexbrowser:s,version:S||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?r={name:"UC Browser",ucbrowser:s,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?r={name:"Maxthon",maxthon:s,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?r={name:"Epiphany",epiphany:s,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?r={name:"Puffin",puffin:s,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?r={name:"Sleipnir",sleipnir:s,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?r={name:"K-Meleon",kMeleon:s,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:s},T?(r.msedge=s,r.version=T):(r.msie=s,r.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:s,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?r={name:"Chrome",osname:"Chrome OS",chromeos:s,chromeBook:s,chrome:s,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?r={name:"Microsoft Edge",msedge:s,version:T}:/vivaldi/i.test(t)?r={name:"Vivaldi",vivaldi:s,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||S}:d?r={name:"Sailfish",osname:"Sailfish OS",sailfish:s,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:s,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(r={name:"Firefox",firefox:s,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=s,r.osname="Firefox OS")):p?r={name:"Amazon Silk",silk:s,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:s,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?r={name:"SlimerJS",slimer:s,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:s,version:S||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:m?(r={name:"WebOS",osname:"WebOS",webos:s,version:S||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=s)):/bada/i.test(t)?r={name:"Bada",osname:"Bada",bada:s,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:f?r={name:"Tizen",osname:"Tizen",tizen:s,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||S}:/qupzilla/i.test(t)?r={name:"QupZilla",qupzilla:s,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||S}:/chromium/i.test(t)?r={name:"Chromium",chromium:s,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||S}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:s,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?r={name:"Android",version:S}:/safari|applewebkit/i.test(t)?(r={name:"Safari",safari:s},S&&(r.version=S)):o?(r={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},S&&(r.version=S)):r=/googlebot/i.test(t)?{name:"Googlebot",googlebot:s,version:e(/googlebot\/(\d+(\.\d+))/i)||S}:{name:e(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(r.name=r.name||"Blink",r.blink=s):(r.name=r.name||"Webkit",r.webkit=s),!r.version&&S&&(r.version=S)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=s,r.version=r.version||e(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!l&&!r.silk?!r.windowsphone&&o?(r[o]=s,r.ios=s,r.osname="iOS"):g?(r.mac=s,r.osname="macOS"):x?(r.xbox=s,r.osname="Xbox"):y?(r.windows=s,r.osname="Windows"):_&&(r.linux=s,r.osname="Linux"):(r.android=s,r.osname="Android");var w="";r.windows?w=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return void 0}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?w=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?(w=e(/Mac OS X (\d+([_\.\s]\d+)*)/i),w=w.replace(/[_\s]/g,".")):o?(w=e(/os (\d+([_\s]\d+)*) like mac os x/i),w=w.replace(/[_\s]/g,".")):l?w=e(/android[ \/-](\d+(\.\d+)*)/i):r.webos?w=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?w=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?w=e(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(w=e(/tizen[\/\s](\d+(\.\d+)*)/i)),w&&(r.osversion=w);var E=!r.windows&&w.split(".")[0];return b||h||"ipad"==o||l&&(3==E||E>=4&&!M)||r.silk?r.tablet=s:(M||"iphone"==o||"ipod"==o||l||u||r.blackberry||r.webos||r.bada)&&(r.mobile=s),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.whale&&1===n([r.version,"1.0"])||r.mzbrowser&&1===n([r.version,"6.0"])||r.focus&&1===n([r.version,"1.0"])||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=s:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=s:r.x=s,r}function e(t){return t.split(".").length}function i(t,e){var i,n=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i++)n.push(e(t[i]));return n}function n(t){for(var n=Math.max(e(t[0]),e(t[1])),r=i(t,function(t){var r=n-e(t);return t+=new Array(r+1).join(".0"),i(t.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--n>=0;){if(r[0][n]>r[1][n])return 1;if(r[0][n]!==r[1][n])return-1;if(0===n)return 0}}function r(e,i,r){var o=a;"string"==typeof i&&(r=i,i=void 0),void 0===i&&(i=!1),r&&(o=t(r));var s=""+o.version;for(var l in e)if(e.hasOwnProperty(l)&&o[l]){if("string"!=typeof e[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(e));return n([s,e[l]])<0}return i}function o(t,e,i){return!r(t,e,i)}var s=!0,a=t("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(t){for(var e=0;e<t.length;++e){var i=t[e];if("string"==typeof i&&i in a)return!0}return!1},a.isUnsupportedBrowser=r,a.compareVersions=n,a.check=o,a._detect=t,a.detect=t,a})},{}],2:[function(t,e,i){i.glMatrix=t("./gl-matrix/common.js"),i.mat2=t("./gl-matrix/mat2.js"),i.mat2d=t("./gl-matrix/mat2d.js"),i.mat3=t("./gl-matrix/mat3.js"),i.mat4=t("./gl-matrix/mat4.js"),i.quat=t("./gl-matrix/quat.js"),i.vec2=t("./gl-matrix/vec2.js"),i.vec3=t("./gl-matrix/vec3.js"),i.vec4=t("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":3,"./gl-matrix/mat2.js":4,"./gl-matrix/mat2d.js":5,"./gl-matrix/mat3.js":6,"./gl-matrix/mat4.js":7,"./gl-matrix/quat.js":8,"./gl-matrix/vec2.js":9,"./gl-matrix/vec3.js":10,"./gl-matrix/vec4.js":11}],3:[function(t,e){var i={};i.EPSILON=1e-6,i.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,i.RANDOM=Math.random,i.ENABLE_SIMD=!1,i.SIMD_AVAILABLE=i.ARRAY_TYPE===this.Float32Array&&"undefined"!=typeof SIMD,i.USE_SIMD=i.ENABLE_SIMD&&i.SIMD_AVAILABLE,i.setMatrixArrayType=function(t){i.ARRAY_TYPE=t};var n=Math.PI/180;i.toRadian=function(t){return t*n},i.equals=function(t,e){return Math.abs(t-e)<=i.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},e.exports=i},{}],4:[function(t,e){var i=t("./common.js"),n={};n.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,e,n,r){var o=new i.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},n.set=function(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t},n.transpose=function(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},n.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*o-r*n;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-r*s,t[3]=i*s,t):null},n.adjoint=function(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1],u=i[2],h=i[3];return t[0]=n*a+o*l,t[1]=r*a+s*l,t[2]=n*u+o*h,t[3]=r*u+s*h,t},n.mul=n.multiply,n.rotate=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*a,t[1]=r*l+s*a,t[2]=n*-a+o*l,t[3]=r*-a+s*l,t},n.scale=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1];return t[0]=n*a,t[1]=r*a,t[2]=o*l,t[3]=s*l,t},n.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,e,i,n){return t[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-t[2]*i[1],[t,e,i]},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},n.sub=n.subtract,n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],l=e[1],u=e[2],h=e[3];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-u)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(s-h)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))},n.multiplyScalar=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},n.multiplyScalarAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},e.exports=n},{"./common.js":3}],5:[function(t,e){var i=t("./common.js"),n={};n.create=function(){var t=new i.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var e=new i.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,e,n,r,o,s){var a=new i.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=o,a[5]=s,a},n.set=function(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t},n.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=i*o-n*r;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-r*l,t[3]=i*l,t[4]=(r*a-o*s)*l,t[5]=(n*s-i*a)*l,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=i[0],h=i[1],c=i[2],p=i[3],d=i[4],f=i[5];return t[0]=n*u+o*h,t[1]=r*u+s*h,t[2]=n*c+o*p,t[3]=r*c+s*p,t[4]=n*d+o*f+a,t[5]=r*d+s*f+l,t},n.mul=n.multiply,n.rotate=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=Math.sin(i),h=Math.cos(i);return t[0]=n*h+o*u,t[1]=r*h+s*u,t[2]=n*-u+o*h,t[3]=r*-u+s*h,t[4]=a,t[5]=l,t},n.scale=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=i[0],h=i[1];return t[0]=n*u,t[1]=r*u,t[2]=o*h,t[3]=s*h,t[4]=a,t[5]=l,t},n.translate=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=i[0],h=i[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=n*u+o*h+a,t[5]=r*u+s*h+l,t},n.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t},n.multiplyScalarAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=e[0],h=e[1],c=e[2],p=e[3],d=e[4],f=e[5];return Math.abs(n-u)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-h)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(o-c)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(s-p)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-d)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(l-f)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))},e.exports=n},{"./common.js":3}],6:[function(t,e){var i=t("./common.js"),n={};n.create=function(){var t=new i.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},n.clone=function(t){var e=new i.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromValues=function(t,e,n,r,o,s,a,l,u){var h=new i.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=n,h[3]=r,h[4]=o,h[5]=s,h[6]=a,h[7]=l,h[8]=u,h},n.set=function(t,e,i,n,r,o,s,a,l,u){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=u,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},n.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8],c=h*s-a*u,p=-h*o+a*l,d=u*o-s*l,f=i*c+n*p+r*d;return f?(f=1/f,t[0]=c*f,t[1]=(-h*n+r*u)*f,t[2]=(a*n-r*s)*f,t[3]=p*f,t[4]=(h*i-r*l)*f,t[5]=(-a*i+r*o)*f,t[6]=d*f,t[7]=(-u*i+n*l)*f,t[8]=(s*i-n*o)*f,t):null},n.adjoint=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t[0]=s*h-a*u,t[1]=r*u-n*h,t[2]=n*a-r*s,t[3]=a*l-o*h,t[4]=i*h-r*l,t[5]=r*o-i*a,t[6]=o*u-s*l,t[7]=n*l-i*u,t[8]=i*s-n*o,t},n.determinant=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8];return e*(u*o-s*l)+i*(-u*r+s*a)+n*(l*r-o*a)},n.multiply=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],p=i[0],d=i[1],f=i[2],m=i[3],v=i[4],y=i[5],g=i[6],_=i[7],T=i[8];return t[0]=p*n+d*s+f*u,t[1]=p*r+d*a+f*h,t[2]=p*o+d*l+f*c,t[3]=m*n+v*s+y*u,t[4]=m*r+v*a+y*h,t[5]=m*o+v*l+y*c,t[6]=g*n+_*s+T*u,t[7]=g*r+_*a+T*h,t[8]=g*o+_*l+T*c,t},n.mul=n.multiply,n.translate=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],p=i[0],d=i[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=p*n+d*s+u,t[7]=p*r+d*a+h,t[8]=p*o+d*l+c,t},n.rotate=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],p=Math.sin(i),d=Math.cos(i);return t[0]=d*n+p*s,t[1]=d*r+p*a,t[2]=d*o+p*l,t[3]=d*s-p*n,t[4]=d*a-p*r,t[5]=d*l-p*o,t[6]=u,t[7]=h,t[8]=c,t},n.scale=function(t,e,i){var n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},n.fromRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},n.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i+i,a=n+n,l=r+r,u=i*s,h=n*s,c=n*a,p=r*s,d=r*a,f=r*l,m=o*s,v=o*a,y=o*l;return t[0]=1-c-f,t[3]=h-y,t[6]=p+v,t[1]=h+y,t[4]=1-u-f,t[7]=d-m,t[2]=p-v,t[5]=d+m,t[8]=1-u-c,t},n.normalFromMat4=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],y=e[15],g=i*a-n*s,_=i*l-r*s,T=i*u-o*s,S=n*l-r*a,b=n*u-o*a,M=r*u-o*l,x=h*m-c*f,w=h*v-p*f,E=h*y-d*f,P=c*v-p*m,A=c*y-d*m,C=p*y-d*v,I=g*C-_*A+T*P+S*E-b*w+M*x;return I?(I=1/I,t[0]=(a*C-l*A+u*P)*I,t[1]=(l*E-s*C-u*w)*I,t[2]=(s*A-a*E+u*x)*I,t[3]=(r*A-n*C-o*P)*I,t[4]=(i*C-r*E+o*w)*I,t[5]=(n*E-i*A-o*x)*I,t[6]=(m*M-v*b+y*S)*I,t[7]=(v*T-f*M-y*_)*I,t[8]=(f*b-m*T+y*g)*I,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t},n.multiplyScalarAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],h=t[7],c=t[8],p=e[0],d=e[1],f=e[2],m=e[3],v=e[4],y=e[5],g=e[6],_=e[7],T=e[8];return Math.abs(n-p)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(r-d)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-f)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-m)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(a-v)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(l-y)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-g)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(h-_)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(c-T)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))},e.exports=n},{"./common.js":3}],7:[function(t,e){var i=t("./common.js"),n={scalar:{},SIMD:{}};n.create=function(){var t=new i.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var e=new i.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.fromValues=function(t,e,n,r,o,s,a,l,u,h,c,p,d,f,m,v){var y=new i.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=o,y[5]=s,y[6]=a,y[7]=l,y[8]=u,y[9]=h,y[10]=c,y[11]=p,y[12]=d,y[13]=f,y[14]=m,y[15]=v,y},n.set=function(t,e,i,n,r,o,s,a,l,u,h,c,p,d,f,m,v){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t[6]=a,t[7]=l,t[8]=u,t[9]=h,t[10]=c,t[11]=p,t[12]=d,t[13]=f,t[14]=m,t[15]=v,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,e){if(t===e){var i=e[1],n=e[2],r=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=r,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},n.SIMD.transpose=function(t,e){var i,n,r,o,s,a,l,u,h,c;return i=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.shuffle(i,n,0,1,4,5),a=SIMD.Float32x4.shuffle(r,o,0,1,4,5),l=SIMD.Float32x4.shuffle(s,a,0,2,4,6),u=SIMD.Float32x4.shuffle(s,a,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,u),s=SIMD.Float32x4.shuffle(i,n,2,3,6,7),a=SIMD.Float32x4.shuffle(r,o,2,3,6,7),h=SIMD.Float32x4.shuffle(s,a,0,2,4,6),c=SIMD.Float32x4.shuffle(s,a,1,3,5,7),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,c),t},n.transpose=i.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],y=e[15],g=i*a-n*s,_=i*l-r*s,T=i*u-o*s,S=n*l-r*a,b=n*u-o*a,M=r*u-o*l,x=h*m-c*f,w=h*v-p*f,E=h*y-d*f,P=c*v-p*m,A=c*y-d*m,C=p*y-d*v,I=g*C-_*A+T*P+S*E-b*w+M*x;return I?(I=1/I,t[0]=(a*C-l*A+u*P)*I,t[1]=(r*A-n*C-o*P)*I,t[2]=(m*M-v*b+y*S)*I,t[3]=(p*b-c*M-d*S)*I,t[4]=(l*E-s*C-u*w)*I,t[5]=(i*C-r*E+o*w)*I,t[6]=(v*T-f*M-y*_)*I,t[7]=(h*M-p*T+d*_)*I,t[8]=(s*A-a*E+u*x)*I,t[9]=(n*E-i*A-o*x)*I,t[10]=(f*b-m*T+y*g)*I,t[11]=(c*T-h*b-d*g)*I,t[12]=(a*w-s*P-l*x)*I,t[13]=(i*P-n*w+r*x)*I,t[14]=(m*_-f*S-v*g)*I,t[15]=(h*S-c*_+p*g)*I,t):null},n.SIMD.invert=function(t,e){var i,n,r,o,s,a,l,u,h,c,p=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),f=SIMD.Float32x4.load(e,8),m=SIMD.Float32x4.load(e,12);return s=SIMD.Float32x4.shuffle(p,d,0,1,4,5),n=SIMD.Float32x4.shuffle(f,m,0,1,4,5),i=SIMD.Float32x4.shuffle(s,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,s,1,3,5,7),s=SIMD.Float32x4.shuffle(p,d,2,3,6,7),o=SIMD.Float32x4.shuffle(f,m,2,3,6,7),r=SIMD.Float32x4.shuffle(s,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,s,1,3,5,7),s=SIMD.Float32x4.mul(r,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.mul(n,s),l=SIMD.Float32x4.mul(i,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,s),a),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,s),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),s=SIMD.Float32x4.mul(n,r),s=SIMD.Float32x4.swizzle(s,1,0,3,2),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),a),h=SIMD.Float32x4.mul(i,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(o,s)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,s),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),s=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),a=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,s),a),u=SIMD.Float32x4.mul(i,s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.sub(a,SIMD.Float32x4.mul(r,s)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,s),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.mul(i,n),s=SIMD.Float32x4.swizzle(s,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),u),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,s),h),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,s),u),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(r,s)),s=SIMD.Float32x4.mul(i,o),s=SIMD.Float32x4.swizzle(s,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,s)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,s),u),s=SIMD.Float32x4.swizzle(s,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,s),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,s)),s=SIMD.Float32x4.mul(i,r),s=SIMD.Float32x4.swizzle(s,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,s),l),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(n,s)),s=SIMD.Float32x4.swizzle(s,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,s)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,s),h),c=SIMD.Float32x4.mul(i,a),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),s=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(s,s),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(s,s))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,a)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,h)),t):null},n.invert=i.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],h=e[8],c=e[9],p=e[10],d=e[11],f=e[12],m=e[13],v=e[14],y=e[15];return t[0]=a*(p*y-d*v)-c*(l*y-u*v)+m*(l*d-u*p),t[1]=-(n*(p*y-d*v)-c*(r*y-o*v)+m*(r*d-o*p)),t[2]=n*(l*y-u*v)-a*(r*y-o*v)+m*(r*u-o*l),t[3]=-(n*(l*d-u*p)-a*(r*d-o*p)+c*(r*u-o*l)),t[4]=-(s*(p*y-d*v)-h*(l*y-u*v)+f*(l*d-u*p)),t[5]=i*(p*y-d*v)-h*(r*y-o*v)+f*(r*d-o*p),t[6]=-(i*(l*y-u*v)-s*(r*y-o*v)+f*(r*u-o*l)),t[7]=i*(l*d-u*p)-s*(r*d-o*p)+h*(r*u-o*l),t[8]=s*(c*y-d*m)-h*(a*y-u*m)+f*(a*d-u*c),t[9]=-(i*(c*y-d*m)-h*(n*y-o*m)+f*(n*d-o*c)),t[10]=i*(a*y-u*m)-s*(n*y-o*m)+f*(n*u-o*a),t[11]=-(i*(a*d-u*c)-s*(n*d-o*c)+h*(n*u-o*a)),t[12]=-(s*(c*v-p*m)-h*(a*v-l*m)+f*(a*p-l*c)),t[13]=i*(c*v-p*m)-h*(n*v-r*m)+f*(n*p-r*c),t[14]=-(i*(a*v-l*m)-s*(n*v-r*m)+f*(n*l-r*a)),t[15]=i*(a*p-l*c)-s*(n*p-r*c)+h*(n*l-r*a),t},n.SIMD.adjoint=function(t,e){var i,n,r,o,s,a,l,u,h,c,p,d,f;return i=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),r=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),h=SIMD.Float32x4.shuffle(i,n,0,1,4,5),a=SIMD.Float32x4.shuffle(r,o,0,1,4,5),s=SIMD.Float32x4.shuffle(h,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,h,1,3,5,7),h=SIMD.Float32x4.shuffle(i,n,2,3,6,7),u=SIMD.Float32x4.shuffle(r,o,2,3,6,7),l=SIMD.Float32x4.shuffle(h,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,h,1,3,5,7),h=SIMD.Float32x4.mul(l,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.mul(a,h),p=SIMD.Float32x4.mul(s,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,h),c),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),h=SIMD.Float32x4.mul(a,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),c),f=SIMD.Float32x4.mul(s,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,h)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),c),d=SIMD.Float32x4.mul(s,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,h)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),h=SIMD.Float32x4.mul(s,a),h=SIMD.Float32x4.swizzle(h,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),d),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,h),f),h=SIMD.Float32x4.swizzle(h,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,h),d),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,h)),h=SIMD.Float32x4.mul(s,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(l,h)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,h),d),h=SIMD.Float32x4.swizzle(h,2,3,0,1),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),p),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(a,h)),h=SIMD.Float32x4.mul(s,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),p),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,h)),h=SIMD.Float32x4.swizzle(h,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,h)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,h),f),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,p),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,f),t},n.adjoint=i.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],h=t[9],c=t[10],p=t[11],d=t[12],f=t[13],m=t[14],v=t[15];return(e*s-i*o)*(c*v-p*m)-(e*a-n*o)*(h*v-p*f)+(e*l-r*o)*(h*m-c*f)+(i*a-n*s)*(u*v-p*d)-(i*l-r*s)*(u*m-c*d)+(n*l-r*a)*(u*f-h*d)},n.SIMD.multiply=function(t,e,i){var n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),s=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.load(i,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,3,3,3,3),s))));SIMD.Float32x4.store(t,0,l);var u=SIMD.Float32x4.load(i,4),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),s))));SIMD.Float32x4.store(t,4,h);var c=SIMD.Float32x4.load(i,8),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),s))));SIMD.Float32x4.store(t,8,p);var d=SIMD.Float32x4.load(i,12),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),s))));return SIMD.Float32x4.store(t,12,f),t},n.scalar.multiply=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],p=e[9],d=e[10],f=e[11],m=e[12],v=e[13],y=e[14],g=e[15],_=i[0],T=i[1],S=i[2],b=i[3];return t[0]=_*n+T*a+S*c+b*m,t[1]=_*r+T*l+S*p+b*v,t[2]=_*o+T*u+S*d+b*y,t[3]=_*s+T*h+S*f+b*g,_=i[4],T=i[5],S=i[6],b=i[7],t[4]=_*n+T*a+S*c+b*m,t[5]=_*r+T*l+S*p+b*v,t[6]=_*o+T*u+S*d+b*y,t[7]=_*s+T*h+S*f+b*g,_=i[8],T=i[9],S=i[10],b=i[11],t[8]=_*n+T*a+S*c+b*m,t[9]=_*r+T*l+S*p+b*v,t[10]=_*o+T*u+S*d+b*y,t[11]=_*s+T*h+S*f+b*g,_=i[12],T=i[13],S=i[14],b=i[15],t[12]=_*n+T*a+S*c+b*m,t[13]=_*r+T*l+S*p+b*v,t[14]=_*o+T*u+S*d+b*y,t[15]=_*s+T*h+S*f+b*g,t},n.multiply=i.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,e,i){var n,r,o,s,a,l,u,h,c,p,d,f,m=i[0],v=i[1],y=i[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*y+e[12],t[13]=e[1]*m+e[5]*v+e[9]*y+e[13],t[14]=e[2]*m+e[6]*v+e[10]*y+e[14],t[15]=e[3]*m+e[7]*v+e[11]*y+e[15]):(n=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5],u=e[6],h=e[7],c=e[8],p=e[9],d=e[10],f=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=l,t[6]=u,t[7]=h,t[8]=c,t[9]=p,t[10]=d,t[11]=f,t[12]=n*m+a*v+c*y+e[12],t[13]=r*m+l*v+p*y+e[13],t[14]=o*m+u*v+d*y+e[14],t[15]=s*m+h*v+f*y+e[15]),t},n.SIMD.translate=function(t,e,i){var n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),s=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4(i[0],i[1],i[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(a,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,2,2,2,2));var l=SIMD.Float32x4.add(n,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,s)));return SIMD.Float32x4.store(t,12,l),t},n.translate=i.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,e,i){var n=i[0],r=i[1],o=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.SIMD.scale=function(t,e,i){var n,r,o,s=SIMD.Float32x4(i[0],i[1],i[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(s,0,0,0,0))),r=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.scale=i.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,e,n,r){var o,s,a,l,u,h,c,p,d,f,m,v,y,g,_,T,S,b,M,x,w,E,P,A,C=r[0],I=r[1],D=r[2],L=Math.sqrt(C*C+I*I+D*D);return Math.abs(L)<i.EPSILON?null:(L=1/L,C*=L,I*=L,D*=L,o=Math.sin(n),s=Math.cos(n),a=1-s,l=e[0],u=e[1],h=e[2],c=e[3],p=e[4],d=e[5],f=e[6],m=e[7],v=e[8],y=e[9],g=e[10],_=e[11],T=C*C*a+s,S=I*C*a+D*o,b=D*C*a-I*o,M=C*I*a-D*o,x=I*I*a+s,w=D*I*a+C*o,E=C*D*a+I*o,P=I*D*a-C*o,A=D*D*a+s,t[0]=l*T+p*S+v*b,t[1]=u*T+d*S+y*b,t[2]=h*T+f*S+g*b,t[3]=c*T+m*S+_*b,t[4]=l*M+p*x+v*w,t[5]=u*M+d*x+y*w,t[6]=h*M+f*x+g*w,t[7]=c*M+m*x+_*w,t[8]=l*E+p*P+v*A,t[9]=u*E+d*P+y*A,t[10]=h*E+f*P+g*A,t[11]=c*E+m*P+_*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},n.scalar.rotateX=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[4],s=e[5],a=e[6],l=e[7],u=e[8],h=e[9],c=e[10],p=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+u*n,t[5]=s*r+h*n,t[6]=a*r+c*n,t[7]=l*r+p*n,t[8]=u*r-o*n,t[9]=h*r-s*n,t[10]=c*r-a*n,t[11]=p*r-l*n,t},n.SIMD.rotateX=function(t,e,i){var n=SIMD.Float32x4.splat(Math.sin(i)),r=SIMD.Float32x4.splat(Math.cos(i));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),s=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,n))),t},n.rotateX=i.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],u=e[8],h=e[9],c=e[10],p=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-u*n,t[1]=s*r-h*n,t[2]=a*r-c*n,t[3]=l*r-p*n,t[8]=o*n+u*r,t[9]=s*n+h*r,t[10]=a*n+c*r,t[11]=l*n+p*r,t},n.SIMD.rotateY=function(t,e,i){var n=SIMD.Float32x4.splat(Math.sin(i)),r=SIMD.Float32x4.splat(Math.cos(i));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(s,r))),t},n.rotateY=i.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,e,i){var n=Math.sin(i),r=Math.cos(i),o=e[0],s=e[1],a=e[2],l=e[3],u=e[4],h=e[5],c=e[6],p=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+u*n,t[1]=s*r+h*n,t[2]=a*r+c*n,t[3]=l*r+p*n,t[4]=u*r-o*n,t[5]=h*r-s*n,t[6]=c*r-a*n,t[7]=p*r-l*n,t},n.SIMD.rotateZ=function(t,e,i){var n=SIMD.Float32x4.splat(Math.sin(i)),r=SIMD.Float32x4.splat(Math.cos(i));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),s=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(s,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,r),SIMD.Float32x4.mul(o,n))),t},n.rotateZ=i.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,e,n){var r,o,s,a=n[0],l=n[1],u=n[2],h=Math.sqrt(a*a+l*l+u*u);return Math.abs(h)<i.EPSILON?null:(h=1/h,a*=h,l*=h,u*=h,r=Math.sin(e),o=Math.cos(e),s=1-o,t[0]=a*a*s+o,t[1]=l*a*s+u*r,t[2]=u*a*s-l*r,t[3]=0,t[4]=a*l*s-u*r,t[5]=l*l*s+o,t[6]=u*l*s+a*r,t[7]=0,t[8]=a*u*s+l*r,t[9]=l*u*s-a*r,t[10]=u*u*s+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,e){var i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=n+n,l=r+r,u=o+o,h=n*a,c=n*l,p=n*u,d=r*l,f=r*u,m=o*u,v=s*a,y=s*l,g=s*u;return t[0]=1-(d+m),t[1]=c+g,t[2]=p-y,t[3]=0,t[4]=c-g,t[5]=1-(h+m),t[6]=f+v,t[7]=0,t[8]=p+y,t[9]=f-v,t[10]=1-(h+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},n.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},n.getScaling=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[4],s=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(i*i+n*n+r*r),t[1]=Math.sqrt(o*o+s*s+a*a),t[2]=Math.sqrt(l*l+u*u+h*h),t},n.getRotation=function(t,e){var i=e[0]+e[5]+e[10],n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},n.fromRotationTranslationScale=function(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=e[3],l=r+r,u=o+o,h=s+s,c=r*l,p=r*u,d=r*h,f=o*u,m=o*h,v=s*h,y=a*l,g=a*u,_=a*h,T=n[0],S=n[1],b=n[2];return t[0]=(1-(f+v))*T,t[1]=(p+_)*T,t[2]=(d-g)*T,t[3]=0,t[4]=(p-_)*S,t[5]=(1-(c+v))*S,t[6]=(m+y)*S,t[7]=0,t[8]=(d+g)*b,t[9]=(m-y)*b,t[10]=(1-(c+f))*b,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,e,i,n,r){var o=e[0],s=e[1],a=e[2],l=e[3],u=o+o,h=s+s,c=a+a,p=o*u,d=o*h,f=o*c,m=s*h,v=s*c,y=a*c,g=l*u,_=l*h,T=l*c,S=n[0],b=n[1],M=n[2],x=r[0],w=r[1],E=r[2];return t[0]=(1-(m+y))*S,t[1]=(d+T)*S,t[2]=(f-_)*S,t[3]=0,t[4]=(d-T)*b,t[5]=(1-(p+y))*b,t[6]=(v+g)*b,t[7]=0,t[8]=(f+_)*M,t[9]=(v-g)*M,t[10]=(1-(p+m))*M,t[11]=0,t[12]=i[0]+x-(t[0]*x+t[4]*w+t[8]*E),t[13]=i[1]+w-(t[1]*x+t[5]*w+t[9]*E),t[14]=i[2]+E-(t[2]*x+t[6]*w+t[10]*E),t[15]=1,t},n.fromQuat=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i+i,a=n+n,l=r+r,u=i*s,h=n*s,c=n*a,p=r*s,d=r*a,f=r*l,m=o*s,v=o*a,y=o*l;return t[0]=1-c-f,t[1]=h+y,t[2]=p-v,t[3]=0,t[4]=h-y,t[5]=1-u-f,t[6]=d+m,t[7]=0,t[8]=p+v,t[9]=d-m,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,e,i,n,r,o,s){var a=1/(i-e),l=1/(r-n),u=1/(o-s);return t[0]=2*o*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+n)*l,t[10]=(s+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*u,t[15]=0,t},n.perspective=function(t,e,i,n,r){var o=1/Math.tan(e/2),s=1/(n-r);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*s,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,e,i,n){var r=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+a),u=2/(r+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(s-a)*l*.5,t[9]=(r-o)*u*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t},n.ortho=function(t,e,i,n,r,o,s){var a=1/(e-i),l=1/(n-r),u=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(r+n)*l,t[14]=(s+o)*u,t[15]=1,t},n.lookAt=function(t,e,r,o){var s,a,l,u,h,c,p,d,f,m,v=e[0],y=e[1],g=e[2],_=o[0],T=o[1],S=o[2],b=r[0],M=r[1],x=r[2];return Math.abs(v-b)<i.EPSILON&&Math.abs(y-M)<i.EPSILON&&Math.abs(g-x)<i.EPSILON?n.identity(t):(p=v-b,d=y-M,f=g-x,m=1/Math.sqrt(p*p+d*d+f*f),p*=m,d*=m,f*=m,s=T*f-S*d,a=S*p-_*f,l=_*d-T*p,m=Math.sqrt(s*s+a*a+l*l),m?(m=1/m,s*=m,a*=m,l*=m):(s=0,a=0,l=0),u=d*l-f*a,h=f*s-p*l,c=p*a-d*s,m=Math.sqrt(u*u+h*h+c*c),m?(m=1/m,u*=m,h*=m,c*=m):(u=0,h=0,c=0),t[0]=s,t[1]=u,t[2]=p,t[3]=0,t[4]=a,t[5]=h,t[6]=d,t[7]=0,t[8]=l,t[9]=c,t[10]=f,t[11]=0,t[12]=-(s*v+a*y+l*g),t[13]=-(u*v+h*y+c*g),t[14]=-(p*v+d*y+f*g),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t},n.multiplyScalarAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=t[4],l=t[5],u=t[6],h=t[7],c=t[8],p=t[9],d=t[10],f=t[11],m=t[12],v=t[13],y=t[14],g=t[15],_=e[0],T=e[1],S=e[2],b=e[3],M=e[4],x=e[5],w=e[6],E=e[7],P=e[8],A=e[9],C=e[10],I=e[11],D=e[12],L=e[13],H=e[14],F=e[15];return Math.abs(n-_)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-T)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(o-S)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-b)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-M)<=i.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-x)<=i.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(u-w)<=i.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(h-E)<=i.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(c-P)<=i.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(p-A)<=i.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-C)<=i.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(f-I)<=i.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(m-D)<=i.EPSILON*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(v-L)<=i.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(y-H)<=i.EPSILON*Math.max(1,Math.abs(y),Math.abs(H))&&Math.abs(g-F)<=i.EPSILON*Math.max(1,Math.abs(g),Math.abs(F))},e.exports=n},{"./common.js":3}],8:[function(t,e){var i=t("./common.js"),n=t("./mat3.js"),r=t("./vec3.js"),o=t("./vec4.js"),s={};s.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=r.create(),e=r.fromValues(1,0,0),i=r.fromValues(0,1,0);return function(n,o,a){var l=r.dot(o,a);return-.999999>l?(r.cross(t,e,o),r.length(t)<1e-6&&r.cross(t,i,o),r.normalize(t,t),s.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(r.cross(t,o,a),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,s.normalize(n,n))}}(),s.setAxes=function(){var t=n.create();return function(e,i,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=o.clone,s.fromValues=o.fromValues,s.copy=o.copy,s.set=o.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,i){i*=.5;var n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t},s.getAxisAngle=function(t,e){var i=2*Math.acos(e[3]),n=Math.sin(i/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i},s.add=o.add,s.multiply=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],l=i[1],u=i[2],h=i[3];return t[0]=n*h+s*a+r*u-o*l,t[1]=r*h+s*l+o*a-n*u,t[2]=o*h+s*u+n*l-r*a,t[3]=s*h-n*a-r*l-o*u,t},s.mul=s.multiply,s.scale=o.scale,s.rotateX=function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+s*a,t[1]=r*l+o*a,t[2]=o*l-r*a,t[3]=s*l-n*a,t},s.rotateY=function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l-o*a,t[1]=r*l+s*a,t[2]=o*l+n*a,t[3]=s*l-r*a,t},s.rotateZ=function(t,e,i){i*=.5;var n=e[0],r=e[1],o=e[2],s=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+r*a,t[1]=r*l-n*a,t[2]=o*l+s*a,t[3]=s*l-o*a,t},s.calculateW=function(t,e){var i=e[0],n=e[1],r=e[2];return t[0]=i,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-r*r)),t},s.dot=o.dot,s.lerp=o.lerp,s.slerp=function(t,e,i,n){var r,o,s,a,l,u=e[0],h=e[1],c=e[2],p=e[3],d=i[0],f=i[1],m=i[2],v=i[3];return o=u*d+h*f+c*m+p*v,0>o&&(o=-o,d=-d,f=-f,m=-m,v=-v),1-o>1e-6?(r=Math.acos(o),s=Math.sin(r),a=Math.sin((1-n)*r)/s,l=Math.sin(n*r)/s):(a=1-n,l=n),t[0]=a*u+l*d,t[1]=a*h+l*f,t[2]=a*c+l*m,t[3]=a*p+l*v,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(i,n,r,o,a,l){return s.slerp(t,n,a,l),s.slerp(e,r,o,l),s.slerp(i,t,e,2*l*(1-l)),i}}(),s.invert=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o,a=s?1/s:0;return t[0]=-i*a,t[1]=-n*a,t[2]=-r*a,t[3]=o*a,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=o.length,s.len=s.length,s.squaredLength=o.squaredLength,s.sqrLen=s.squaredLength,s.normalize=o.normalize,s.fromMat3=function(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*s+s]+1),t[r]=.5*i,i=.5/i,t[3]=(e[3*o+s]-e[3*s+o])*i,t[o]=(e[3*o+r]+e[3*r+o])*i,t[s]=(e[3*s+r]+e[3*r+s])*i}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=o.exactEquals,s.equals=o.equals,e.exports=s},{"./common.js":3,"./mat3.js":6,"./vec3.js":10,"./vec4.js":11}],9:[function(t,e){var i=t("./common.js"),n={};n.create=function(){var t=new i.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var e=new i.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var n=new i.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,i){return t[0]=e,t[1]=i,t},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},n.sub=n.subtract,n.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},n.mul=n.multiply,n.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},n.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},n.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},n.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},n.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},n.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)},n.dist=n.distance,n.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)},n.len=n.length,n.squaredLength=function(t){var e=t[0],i=t[1];return e*e+i*i},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},n.normalize=function(t,e){var i=e[0],n=e[1],r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.cross=function(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t},n.lerp=function(t,e,i,n){var r=e[0],o=e[1];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t},n.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},n.transformMat2=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t},n.transformMat2d=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},n.transformMat3=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t},n.transformMat4=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t},n.forEach=function(){var t=n.create();return function(e,i,n,r,o,s){var a,l;for(i||(i=2),n||(n=0),l=r?Math.min(r*i+n,e.length):e.length,a=n;l>a;a+=i)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n.equals=function(t,e){var n=t[0],r=t[1],o=e[0],s=e[1];return Math.abs(n-o)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))},e.exports=n},{"./common.js":3}],10:[function(t,e){var i=t("./common.js"),n={};n.create=function(){var t=new i.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var e=new i.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.fromValues=function(t,e,n){var r=new i.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.set=function(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t},n.sub=n.subtract,n.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t},n.mul=n.multiply,n.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},n.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t},n.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},n.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t},n.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t},n.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+n*n+r*r)},n.dist=n.distance,n.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)},n.len=n.length,n.squaredLength=function(t){var e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},n.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],o=i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},n.cross=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2];return t[0]=r*l-o*a,t[1]=o*s-n*l,t[2]=n*a-r*s,t},n.lerp=function(t,e,i,n){var r=e[0],o=e[1],s=e[2];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t[2]=s+n*(i[2]-s),t},n.hermite=function(t,e,i,n,r,o){var s=o*o,a=s*(2*o-3)+1,l=s*(o-2)+o,u=s*(o-1),h=s*(3-2*o);return t[0]=e[0]*a+i[0]*l+n[0]*u+r[0]*h,t[1]=e[1]*a+i[1]*l+n[1]*u+r[1]*h,t[2]=e[2]*a+i[2]*l+n[2]*u+r[2]*h,t},n.bezier=function(t,e,i,n,r,o){var s=1-o,a=s*s,l=o*o,u=a*s,h=3*o*a,c=3*l*s,p=l*o;return t[0]=e[0]*u+i[0]*h+n[0]*c+r[0]*p,t[1]=e[1]*u+i[1]*h+n[1]*c+r[1]*p,t[2]=e[2]*u+i[2]*h+n[2]*c+r[2]*p,t},n.random=function(t,e){e=e||1;var n=2*i.RANDOM()*Math.PI,r=2*i.RANDOM()-1,o=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=r*e,t},n.transformMat4=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[3]*n+i[7]*r+i[11]*o+i[15];return s=s||1,t[0]=(i[0]*n+i[4]*r+i[8]*o+i[12])/s,t[1]=(i[1]*n+i[5]*r+i[9]*o+i[13])/s,t[2]=(i[2]*n+i[6]*r+i[10]*o+i[14])/s,t},n.transformMat3=function(t,e,i){var n=e[0],r=e[1],o=e[2];return t[0]=n*i[0]+r*i[3]+o*i[6],t[1]=n*i[1]+r*i[4]+o*i[7],t[2]=n*i[2]+r*i[5]+o*i[8],t},n.transformQuat=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2],u=i[3],h=u*n+a*o-l*r,c=u*r+l*n-s*o,p=u*o+s*r-a*n,d=-s*n-a*r-l*o;return t[0]=h*u+d*-s+c*-l-p*-a,t[1]=c*u+d*-a+p*-s-h*-l,t[2]=p*u+d*-l+h*-a-c*-s,t},n.rotateX=function(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},n.rotateY=function(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},n.rotateZ=function(t,e,i,n){var r=[],o=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+i[0],t[1]=o[1]+i[1],t[2]=o[2]+i[2],t},n.forEach=function(){var t=n.create();return function(e,i,n,r,o,s){var a,l;for(i||(i=3),n||(n=0),l=r?Math.min(r*i+n,e.length):e.length,a=n;l>a;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}}(),n.angle=function(t,e){var i=n.fromValues(t[0],t[1],t[2]),r=n.fromValues(e[0],e[1],e[2]);n.normalize(i,i),n.normalize(r,r);var o=n.dot(i,r);return o>1?0:-1>o?Math.PI:Math.acos(o)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=e[0],a=e[1],l=e[2];return Math.abs(n-s)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-l)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},e.exports=n},{"./common.js":3}],11:[function(t,e){var i=t("./common.js"),n={};n.create=function(){var t=new i.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var e=new i.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.fromValues=function(t,e,n,r){var o=new i.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.set=function(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t},n.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},n.subtract=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t},n.sub=n.subtract,n.multiply=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t},n.mul=n.multiply,n.divide=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},n.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t},n.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},n.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},n.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t},n.distance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(i*i+n*n+r*r+o*o)},n.dist=n.distance,n.squaredDistance=function(t,e){var i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return i*i+n*n+r*r+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+i*i+n*n+r*r)},n.len=n.length,n.squaredLength=function(t){var e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},n.normalize=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],s=i*i+n*n+r*r+o*o;return s>0&&(s=1/Math.sqrt(s),t[0]=i*s,t[1]=n*s,t[2]=r*s,t[3]=o*s),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},n.lerp=function(t,e,i,n){var r=e[0],o=e[1],s=e[2],a=e[3];return t[0]=r+n*(i[0]-r),t[1]=o+n*(i[1]-o),t[2]=s+n*(i[2]-s),t[3]=a+n*(i[3]-a),t},n.random=function(t,e){return e=e||1,t[0]=i.RANDOM(),t[1]=i.RANDOM(),t[2]=i.RANDOM(),t[3]=i.RANDOM(),n.normalize(t,t),n.scale(t,t,e),t},n.transformMat4=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*s,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*s,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*s,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*s,t},n.transformQuat=function(t,e,i){var n=e[0],r=e[1],o=e[2],s=i[0],a=i[1],l=i[2],u=i[3],h=u*n+a*o-l*r,c=u*r+l*n-s*o,p=u*o+s*r-a*n,d=-s*n-a*r-l*o;return t[0]=h*u+d*-s+c*-l-p*-a,t[1]=c*u+d*-a+p*-s-h*-l,t[2]=p*u+d*-l+h*-a-c*-s,t[3]=e[3],t},n.forEach=function(){var t=n.create();return function(e,i,n,r,o,s){var a,l;for(i||(i=4),n||(n=0),l=r?Math.min(r*i+n,e.length):e.length,a=n;l>a;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var n=t[0],r=t[1],o=t[2],s=t[3],a=e[0],l=e[1],u=e[2],h=e[3];return Math.abs(n-a)<=i.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=i.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-u)<=i.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(s-h)<=i.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))},e.exports=n},{"./common.js":3}],12:[function(e,i){!function(e,n,r,o){"use strict";function s(t,e,i){return setTimeout(d(t,i),e)}function a(t,e,i){return!!Array.isArray(t)&&(l(t,i[e],i),!0)}function l(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==o)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function u(t,e,i){for(var n=Object.keys(e),r=0;r<n.length;)(!i||i&&t[n[r]]===o)&&(t[n[r]]=e[n[r]]),r++;return t}function h(t,e){return u(t,e,!0)}function c(t){if(Object.create)return Object.create(t);var e=function(){};e.prototype=t;var i=new e;return e.prototype=null,i}function p(t,e,i){var n,r=e.prototype;n=t.prototype=c(r),n.constructor=t,n._super=r,i&&u(n,i)}function d(t,e){return function(){return t.apply(e,arguments)}}function f(t,e){return typeof t==de?t.apply(e?e[0]||o:o,e):t}function m(t,e){return t===o?e:t}function v(t,e,i){l(T(e),function(e){t.addEventListener(e,i,!1)})}function y(t,e,i){l(T(e),function(e){t.removeEventListener(e,i,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function T(t){return t.trim().split(/\s+/g)}function S(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function M(t,e,i){for(var n=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];S(r,s)<0&&n.push(t[o]),r[o]=s,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function x(t,e){for(var i,n,r=e[0].toUpperCase()+e.slice(1),s=0;s<ce.length;){if(i=ce[s],(n=i?i+r:e)in t)return n;s++}return o}function w(){return ye++}function E(t){var i=t.ownerDocument||t;return i.defaultView||i.parentWindow||e}function P(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){f(t.options.enable,[t])&&i.handler(e)},this.init()}function A(t){var e=t.options.inputClass;return new(e||(Te?V:Se?j:_e?Y:z))(t,C)}function C(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,o=e&Me&&n-r==0,s=e&(we|Ee)&&n-r==0;i.isFirst=!!o,i.isFinal=!!s,o&&(t.session={}),i.eventType=e,I(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function I(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=H(e)),r>1&&!i.firstMultiple?i.firstMultiple=H(e):1===r&&(i.firstMultiple=!1);var o=i.firstInput,s=i.firstMultiple,a=s?s.center:o.center,l=e.center=F(n);e.timeStamp=ve(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=N(a,l),e.distance=R(a,l),D(i,e),e.offsetDirection=B(e.deltaX,e.deltaY),e.scale=s?k(s.pointers,n):1,e.rotation=s?O(s.pointers,n):0,L(i,e);var u=t.element;g(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function D(t,e){var i=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==Me&&o.eventType!==we||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=r.x+(i.x-n.x),e.deltaY=r.y+(i.y-n.y)}function L(t,e){var i,n,r,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Ee&&(l>be||a.velocity===o)){var u=a.deltaX-e.deltaX,h=a.deltaY-e.deltaY,c=G(l,u,h);n=c.x,r=c.y,i=me(c.x)>me(c.y)?c.x:c.y,s=B(u,h),t.lastInterval=e}else i=a.velocity,n=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=i,e.velocityX=n,e.velocityY=r,e.direction=s}function H(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:fe(t.pointers[i].clientX),clientY:fe(t.pointers[i].clientY)},i++;return{timeStamp:ve(),pointers:e,center:F(e),deltaX:t.deltaX,deltaY:t.deltaY}}function F(t){var e=t.length;if(1===e)return{x:fe(t[0].clientX),y:fe(t[0].clientY)};for(var i=0,n=0,r=0;e>r;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:fe(i/e),y:fe(n/e)}}function G(t,e,i){return{x:e/t||0,y:i/t||0}}function B(t,e){return t===e?Pe:me(t)>=me(e)?t>0?Ae:Ce:e>0?Ie:De}function R(t,e,i){i||(i=Ge);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function N(t,e,i){i||(i=Ge);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function O(t,e){return N(e[1],e[0],Be)-N(t[1],t[0],Be)}function k(t,e){return R(e[0],e[1],Be)/R(t[0],t[1],Be)}function z(){this.evEl=Ne,ke?this.evDoc=Oe:this.evWin=Oe,this.allow=!0,this.pressed=!1,P.apply(this,arguments)}function V(){this.evEl=Xe,this.evWin=We,P.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function X(){this.evTarget=qe,this.evWin=Ye,this.started=!1,P.apply(this,arguments)}function W(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(we|Ee)&&(i=M(i.concat(n),"identifier",!0)),[i,n]}function j(){this.evTarget=Ke,this.targetIds={},P.apply(this,arguments)}function q(t,e){var i=b(t.touches),n=this.targetIds;if(e&(Me|xe)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var r,o,s=b(t.changedTouches),a=[],l=this.target;if(o=i.filter(function(t){return g(t.target,l)}),e===Me)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<s.length;)n[s[r].identifier]&&a.push(s[r]),e&(we|Ee)&&delete n[s[r].identifier],r++;return a.length?[M(o.concat(a),"identifier",!0),a]:void 0}function Y(){P.apply(this,arguments);var t=d(this.handler,this);this.touch=new j(this.manager,t),this.mouse=new z(this.manager,t)}function U(t,e){this.manager=t,this.set(e)}function K(t){if(_(t,ti))return ti;var e=_(t,ei),i=_(t,ii);return e&&i?ei+" "+ii:e||i?e?ei:ii:_(t,Je)?Je:$e}function Q(t){this.id=w(),this.manager=null,this.options=h(t||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=ni,this.simultaneous={},this.requireFail=[]}function Z(t){return t&li?"cancel":t&si?"end":t&oi?"move":t&ri?"start":""}function $(t){return t==De?"down":t==Ie?"up":t==Ae?"left":t==Ce?"right":""}function J(t,e){var i=e.manager;return i?i.get(t):t}function te(){Q.apply(this,arguments)}function ee(){te.apply(this,arguments),this.pX=null,this.pY=null}function ie(){te.apply(this,arguments)}function ne(){Q.apply(this,arguments),this._timer=null,this._input=null}function re(){te.apply(this,arguments)}function oe(){te.apply(this,arguments)}function se(){Q.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ae(t,e){return e=e||{},e.recognizers=m(e.recognizers,ae.defaults.preset),new le(t,e)}function le(t,e){e=e||{},this.options=h(e,ae.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=A(this),this.touchAction=new U(this,this.options.touchAction),ue(this,!0),l(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ue(t,e){var i=t.element;i.style&&l(t.options.cssProps,function(t,n){i.style[x(i.style,n)]=e?t:""})}function he(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var ce=["","webkit","moz","MS","ms","o"],pe=n.createElement("div"),de="function",fe=Math.round,me=Math.abs,ve=Date.now,ye=1,ge=/mobile|tablet|ip(ad|hone|od)|android/i,_e="ontouchstart"in e,Te=x(e,"PointerEvent")!==o,Se=_e&&ge.test(navigator.userAgent),be=25,Me=1,xe=2,we=4,Ee=8,Pe=1,Ae=2,Ce=4,Ie=8,De=16,Le=Ae|Ce,He=Ie|De,Fe=Le|He,Ge=["x","y"],Be=["clientX","clientY"];P.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(E(this.element),this.evWin,this.domHandler),this.evDoc&&v(n,this.evDoc,this.domHandler),this.evBody&&v(n.body,this.evBody,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(E(this.element),this.evWin,this.domHandler),this.evDoc&&y(n,this.evDoc,this.domHandler),this.evBody&&y(n.body,this.evBody,this.domHandler)}};var Re={mousedown:Me,mousemove:xe,mouseup:we},Ne="mousedown",Oe="mousemove mouseup",ke=e.navigator.userAgent.indexOf("MSIE 8")>0;p(z,P,{handler:function(t){var e=Re[t.type],i=0;ke&&(i=1),e&Me&&t.button===i&&(this.pressed=!0),e&xe&&t.button!==i&&(e=we),this.pressed&&this.allow&&(e&we&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ze={pointerdown:Me,pointermove:xe,pointerup:we,pointercancel:Ee,pointerout:Ee},Ve={2:"touch",3:"pen",4:"mouse",5:"kinect"},Xe="pointerdown",We="pointermove pointerup pointercancel";e.MSPointerEvent&&(Xe="MSPointerDown",We="MSPointerMove MSPointerUp MSPointerCancel"),p(V,P,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=ze[n],o=Ve[t.pointerType]||t.pointerType,s="touch"==o,a=S(e,t.pointerId,"pointerId");r&Me&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):r&(we|Ee)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var je={touchstart:Me,touchmove:xe,touchend:we,touchcancel:Ee},qe="touchstart",Ye="touchstart touchmove touchend touchcancel";p(X,P,{handler:function(t){var e=je[t.type];if(e===Me&&(this.started=!0),this.started){var i=W.call(this,t,e);e&(we|Ee)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var Ue={touchstart:Me,touchmove:xe,touchend:we,touchcancel:Ee},Ke="touchstart touchmove touchend touchcancel";p(j,P,{handler:function(t){var e=Ue[t.type],i=q.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}),p(Y,P,{handler:function(t,e,i){var n="touch"==i.pointerType,r="mouse"==i.pointerType;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(we|Ee)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Qe=x(pe.style,"touchAction"),Ze=Qe!==o,$e="auto",Je="manipulation",ti="none",ei="pan-x",ii="pan-y";U.prototype={set:function(t){"compute"==t&&(t=this.compute()),Ze&&this.manager.element.style&&(this.manager.element.style[Qe]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){f(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),K(t.join(" "))},preventDefaults:function(t){if(!Ze){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=_(n,ti),o=_(n,ii),s=_(n,ei);return r||o&&i&Le||s&&i&He?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ni=1,ri=2,oi=4,si=8,ai=si,li=16;Q.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(a(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return a(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(a(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===S(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(a(t,"dropRequireFailure",this))return this;t=J(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?Z(n):""),t)}var i=this,n=this.state;si>n&&e(!0),e(),n>=si&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ni)))return!1;t++}return!0},recognize:function(t){var e=u({},t);return f(this.options.enable,[this,e])?(this.state&(ai|li|32)&&(this.state=ni),this.state=this.process(e),this.state&(ri|oi|si|li)&&this.tryEmit(e),void 0):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},p(te,Q,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(ri|oi),r=this.attrTest(t);return n&&(i&Ee||!r)?e|li:n||r?i&we?e|si:e&ri?e|oi:ri:32}}),p(ee,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:Fe},getTouchAction:function(){var t=this.options.direction,e=[];return t&Le&&e.push(ii),t&He&&e.push(ei),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Le?(r=0===o?Pe:0>o?Ae:Ce,i=o!=this.pX,n=Math.abs(t.deltaX)):(r=0===s?Pe:0>s?Ie:De,i=s!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return te.prototype.attrTest.call(this,t)&&(this.state&ri||!(this.state&ri)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=$(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),p(ie,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ti]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ri)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),p(ne,Q,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[$e]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(we|Ee)&&!r)this.reset();else if(t.eventType&Me)this.reset(),this._timer=s(function(){this.state=ai,this.tryEmit()},e.time,this);else if(t.eventType&we)return ai;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ai&&(t&&t.eventType&we?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),p(re,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ti]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ri)}}),p(oe,te,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Le|He,pointers:1},getTouchAction:function(){return ee.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Le|He)?e=t.velocity:i&Le?e=t.velocityX:i&He&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&me(e)>this.options.velocity&&t.eventType&we},emit:function(t){var e=$(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),p(se,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Je]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Me&&0===this.count)return this.failTimeout();if(n&&r&&i){if(t.eventType!=we)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||R(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ai,this.tryEmit()},e.interval,this),ri):ai}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ai&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ae.VERSION="2.0.4",ae.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[re,{enable:!1}],[ie,{enable:!1},["rotate"]],[oe,{direction:Le}],[ee,{direction:Le},["swipe"]],[se],[se,{event:"doubletap",taps:2},["tap"]],[ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},le.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&ai)&&(r=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],2===e.stopped||r&&i!=r&&!i.canRecognizeWith(r)?i.reset():i.recognize(t),!r&&i.state&(ri|oi|si)&&(r=e.curRecognizer=i),o++}},get:function(t){if(t instanceof Q)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(a(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(a(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(S(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return l(T(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return l(T(t),function(t){e?i[t].splice(S(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&he(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&ue(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(ae,{INPUT_START:Me,INPUT_MOVE:xe,INPUT_END:we,INPUT_CANCEL:Ee,STATE_POSSIBLE:ni,STATE_BEGAN:ri,STATE_CHANGED:oi,STATE_ENDED:si,STATE_RECOGNIZED:ai,STATE_CANCELLED:li,STATE_FAILED:32,DIRECTION_NONE:Pe,DIRECTION_LEFT:Ae,DIRECTION_RIGHT:Ce,DIRECTION_UP:Ie,DIRECTION_DOWN:De,DIRECTION_HORIZONTAL:Le,DIRECTION_VERTICAL:He,DIRECTION_ALL:Fe,Manager:le,Input:P,TouchAction:U,TouchInput:j,MouseInput:z,PointerEventInput:V,TouchMouseInput:Y,SingleTouchInput:X,Recognizer:Q,AttrRecognizer:te,Tap:se,Pan:ee,Swipe:oe,Pinch:ie,Rotate:re,Press:ne,on:v,off:y,each:l,merge:h,extend:u,inherit:p,bindFn:d,prefixed:x}),typeof t==de&&t.amd?t(function(){return ae}):void 0!==i&&i.exports?i.exports=ae:e.Hammer=ae}(window,document)},{}],13:[function(t,e){"use strict";function i(){}function n(t){for(var e in i.prototype)i.prototype.hasOwnProperty(e)&&(t.prototype[e]=i.prototype[e])}i.prototype.addEventListener=function(t,e){var i=this.__events=this.__events||{},n=i[t]=i[t]||[];n.indexOf(e)<0&&n.push(e)},i.prototype.removeEventListener=function(t,e){var i=this.__events=this.__events||{},n=i[t];if(n){var r=n.indexOf(e);r>=0&&n.splice(r,1)}},i.prototype.emit=function(t){var e=this.__events=this.__events||{},i=e[t],n=Array.prototype.slice.call(arguments,1);if(i)for(var r=0;r<i.length;r++){var o=i[r];o.apply(this,n)}},e.exports=n},{}],14:[function(t,e){"use strict";function i(t,e,i,n,o){if(o=o||{},o.perspective=o.perspective||{},o.perspective.extraTransforms=null!=o.perspective.extraTransforms?o.perspective.extraTransforms:"",(o.perspective.radius||o.perspective.extraTransforms)&&!r())throw new Error("CSS transforms on hotspots are not supported on this browser");this._domElement=t,this._parentDomElement=e,this._view=i,this._coords={},this._perspective={},this.setPosition(n),this._parentDomElement.appendChild(this._domElement),this.setPerspective(o.perspective),this._visible=!0,this._position={x:0,y:0}}var n=t("minimal-event-emitter"),r=t("./support/Css"),o=t("./util/positionAbsolutely"),s=t("./util/dom").setTransform,a=t("./util/clearOwnProperties");n(i),i.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),a(this)},i.prototype.domElement=function(){return this._domElement},i.prototype.position=function(){return this._coords},i.prototype.setPosition=function(t){for(var e in t)this._coords[e]=t[e];this._update()},i.prototype.perspective=function(){return this._perspective},i.prototype.setPerspective=function(t){for(var e in t)this._perspective[e]=t[e];this._update()},i.prototype.show=function(){this._visible||(this._visible=!0,this._update())},i.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())},i.prototype._update=function(){var t,e,i=this._domElement,n=this._coords,r=this._position,o=!1;if(this._visible){var s=this._view;this._perspective.radius?(o=!0,this._setEmbeddedPosition(s,n)):(s.coordinatesToScreen(n,r),t=r.x,e=r.y,null!=t&&null!=e&&(o=!0,this._setPosition(t,e)))}o?(i.style.display="block",i.style.position="absolute"):(i.style.display="none",i.style.position="")},i.prototype._setEmbeddedPosition=function(t,e){var i=t.coordinatesToPerspectiveTransform(e,this._perspective.radius,this._perspective.extraTransforms);s(this._domElement,i)},i.prototype._setPosition=function(t,e){o(this._domElement,t,e,this._perspective.extraTransforms)},e.exports=i},{"./support/Css":81,"./util/clearOwnProperties":90,"./util/dom":99,"./util/positionAbsolutely":110,"minimal-event-emitter":13}],15:[function(t,e){"use strict";function i(t,e,i,n,r){r=r||{},this._parentDomElement=t,this._stage=e,this._view=i,this._renderLoop=n,this._hotspots=[],this._visible=!0,this._rect=r.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),l(this._hotspotContainerWrapper),d(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),l(this._hotspotContainer),d(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}var n=t("minimal-event-emitter"),r=t("./Hotspot"),o=t("./util/calcRect"),s=t("./support/cssPointerEvents"),a=t("./util/positionAbsolutely"),l=t("./util/dom").setAbsolute,u=t("./util/dom").setOverflowHidden,h=t("./util/dom").setOverflowVisible,c=t("./util/dom").setNullSize,p=t("./util/dom").setPixelSize,d=t("./util/dom").setWithVendorPrefix("pointer-events"),f=t("./util/clearOwnProperties");n(i),i.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),f(this)},i.prototype.domElement=function(){return this._hotspotContainer},i.prototype.setRect=function(t){t&&!s()&&"undefined"!=typeof console&&console.warn("Using a rect effect is not fully supported on this browser. Hotspots may not be shown."),this._rect=t,this._visibilityOrRectChanged=!0},i.prototype.rect=function(){return this._rect},i.prototype.createHotspot=function(t,e,i){e=e||{};var n=new r(t,this._hotspotContainer,this._view,e,i);return this._hotspots.push(n),n._update(),this.emit("hotspotsChange"),n},i.prototype.hasHotspot=function(t){return this._hotspots.indexOf(t)>=0},i.prototype.listHotspots=function(){return[].concat(this._hotspots)},i.prototype.destroyHotspot=function(t){var e=this._hotspots.indexOf(t);if(0>e)throw new Error("No such hotspot");this._hotspots.splice(e,1),t.destroy(),this.emit("hotspotsChange")},i.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())},i.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())},i.prototype._update=function(){var t=this._hotspotContainerWrapper,e=this._stage.width(),i=this._stage.height(),n=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(e!==this._stageWidth||i!==this._stageHeight)){var r=this._visible&&!(this._rect&&!s());t.style.display=r?"block":"none",r&&(this._rect?(o(e,i,this._rect,n),a(t,e*n.x,i*n.y),p(t,e*n.width,i*n.height),u(t)):(a(t,0,0),c(t),h(t))),this._stageWidth=e,this._stageHeight=i,this._visibilityOrRectChanged=!1}for(var l=0;l<this._hotspots.length;l++)this._hotspots[l]._update()},e.exports=i},{"./Hotspot":14,"./support/cssPointerEvents":84,"./util/calcRect":86,"./util/clearOwnProperties":90,"./util/dom":99,"./util/positionAbsolutely":110,"minimal-event-emitter":13}],16:[function(t,e){"use strict";function i(t,e,i,n,r){r=r||{};var o=this;this._source=t,this._geometry=e,this._view=i,this._textureStore=n,this._effects=r.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){o.emit("viewChange",o.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){o.emit("textureStoreChange",o.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}var n=t("minimal-event-emitter"),r=t("./util/extend"),o=t("./util/clearOwnProperties");n(i),i.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),o(this)},i.prototype.source=function(){return this._source},i.prototype.geometry=function(){return this._geometry},i.prototype.view=function(){return this._view},i.prototype.textureStore=function(){return this._textureStore},i.prototype.effects=function(){return this._effects},i.prototype.setEffects=function(t){this._effects=t,this.emit("effectsChange",this._effects)},i.prototype.mergeEffects=function(t){r(this._effects,t),this.emit("effectsChange",this._effects)},i.prototype.fixedLevel=function(){return this._fixedLevelIndex},i.prototype.setFixedLevel=function(t){if(t!==this._fixedLevelIndex){if(null!=t&&(t>=this._geometry.levelList.length||0>t))throw new Error("Level index out of range: "+t);this._fixedLevelIndex=t,this.emit("fixedLevelChange",this._fixedLevelIndex)}},i.prototype._selectLevel=function(){return null!=this._fixedLevelIndex?this._geometry.levelList[this._fixedLevelIndex]:this._view.selectLevel(this._geometry.selectableLevelList)},i.prototype.visibleTiles=function(t){var e=this._selectLevel();return this._geometry.visibleTiles(this._view,e,t)},i.prototype.pinLevel=function(t){for(var e=this._geometry.levelList[t],i=this._geometry.levelTiles(e),n=0;n<i.length;n++)this._textureStore.pin(i[n])},i.prototype.unpinLevel=function(t){for(var e=this._geometry.levelList[t],i=this._geometry.levelTiles(e),n=0;n<i.length;n++)this._textureStore.unpin(i[n])},i.prototype.pinFirstLevel=function(){return this.pinLevel(0)},i.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)},e.exports=i},{"./util/clearOwnProperties":90,"./util/extend":100,"minimal-event-emitter":13}],17:[function(t,e){"use strict";function i(t){this.constructor.super_.apply(this,arguments),this.message=t}t("./util/inherits")(i,Error),e.exports=i},{"./util/inherits":103}],18:[function(t,e){"use strict";function i(t){var e=this;this._stage=t,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){e._rendering||e.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}var n=t("minimal-event-emitter"),r=t("./util/clearOwnProperties");n(i),i.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),r(this)},i.prototype.stage=function(){return this._stage},i.prototype.start=function(){this._running=!0,this.renderOnNextFrame()},i.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1},i.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))},i.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")},e.exports=i},{"./util/clearOwnProperties":90,"minimal-event-emitter":13}],19:[function(t,e){"use strict";function i(t,e){this._viewer=t,this._view=e,this._layers=[],this._hotspotContainer=new o(t._controlContainer,t.stage(),this._view,t.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}var n=t("./Layer"),r=t("./TextureStore"),o=t("./HotspotContainer"),s=t("minimal-event-emitter"),a=t("./util/now"),l=t("./util/noop"),u=t("./util/type"),h=t("./util/defaults"),c=t("./util/clearOwnProperties");s(i),i.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),c(this)},i.prototype.hotspotContainer=function(){return this._hotspotContainer},i.prototype.layer=function(){return this._layers[0]},i.prototype.listLayers=function(){return[].concat(this._layers)},i.prototype.view=function(){return this._view},i.prototype.viewer=function(){return this._viewer},i.prototype.visible=function(){return this._viewer.scene()===this},i.prototype.createLayer=function(t){t=t||{};var e=t.textureStoreOpts||{},i=t.layerOpts||{},o=t.source,s=t.geometry,a=this._view,l=this._viewer.stage(),u=new r(o,l,e),h=new n(o,s,a,u,i);return this._layers.push(h),t.pinFirstLevel&&h.pinFirstLevel(),this.emit("layerChange"),h},i.prototype.destroyLayer=function(t){var e=this._layers.indexOf(t);if(0>e)throw new Error("No such layer in scene");this._layers.splice(e,1),this.emit("layerChange"),t.textureStore().destroy(),t.destroy()},i.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])},i.prototype.switchTo=function(t,e){return this._viewer.switchScene(this,t,e)},i.prototype.lookTo=function(t,e,i){if(e=e||{},i=i||l,"object"!==u(t))throw new Error("Target view parameters must be an object");var n=null!=e.transitionDuration?e.transitionDuration:1e3,r=null==e.shortest||e.shortest,o=this._view,s=o.parameters(),a={};h(a,t),h(a,s),r&&o.normalizeToClosest&&o.normalizeToClosest(a,a);var c=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},p=function(){var t=!1;return function(e,i){if(i>=n&&t)return null;var r=Math.min(i/n,1);for(var o in e){var l=s[o],u=a[o];e[o]=l+c(r)*(u-l)}return t=i>=n,e}},d=this._viewer.controls().enabled();this._viewer.controls().disable(),this.startMovement(p,function(){d&&this._viewer.controls().enable(),i()})},i.prototype.startMovement=function(t,e){var i=this._viewer.renderLoop();this._movement&&this.stopMovement();var n=t();if("function"!=typeof n)throw new Error("Bad movement");this._movement=t,this._movementStep=n,this._movementStartTime=a(),this._movementParams={},this._movementCallback=e,i.addEventListener("beforeRender",this._updateMovementHandler),i.renderOnNextFrame()},i.prototype.stopMovement=function(){var t=this._viewer.renderLoop();this._movementCallback&&this._movementCallback(),t.removeEventListener("beforeRender",this._updateMovementHandler),this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null},i.prototype.movement=function(){return this._movement},i.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var t=this._viewer.renderLoop(),e=this._view,i=a()-this._movementStartTime,n=this._movementStep,r=this._movementParams;r=e.parameters(r),r=n(r,i),null==r?this.stopMovement():(e.setParameters(r),t.renderOnNextFrame())},i.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()},e.exports=i},{"./HotspotContainer":15,"./Layer":16,"./TextureStore":20,"./util/clearOwnProperties":90,"./util/defaults":95,"./util/noop":106,"./util/now":107,"./util/type":115,"minimal-event-emitter":13}],20:[function(t,e){"use strict";function i(){}function n(t,e){var n=this,r=y++;n._id=r,n._store=t,n._tile=e,n._asset=null,n._texture=null,n._changeHandler=function(){t.emit("textureInvalid",e)};var o=t.source(),s=t.stage(),a=o.loadAsset.bind(o),l=s.createTexture.bind(s),u=c(h(a),l);t.emit("textureStartLoad",e),f&&console.log("loading",r,e),n._cancel=u(s,e,function(o,s,a,l){return n._cancel=null,o?(a&&a.destroy(),l&&l.destroy(),void(o instanceof i?(t.emit("textureCancel",e),f&&console.log("cancel",r,e)):(t.emit("textureError",e,o),f&&console.log("error",r,e)))):(n._texture=l,a.isDynamic()?(n._asset=a,a.addEventListener("change",n._changeHandler)):a.destroy(),t.emit("textureLoad",e),f&&console.log("load",r,e),void 0)})}function r(t,e,i){i=u(i||{},v),this._source=t,this._stage=e,this._state=m.IDLE,this._delimCount=0,this._itemMap=new o,this._visible=new s,this._previouslyVisible=new a(i.previouslyVisibleCacheSize),this._pinMap=new o,this._newVisible=new s,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}var o=t("./collections/Map"),s=t("./collections/Set"),a=t("./collections/LruSet"),l=t("minimal-event-emitter"),u=t("./util/defaults"),h=t("./util/retry"),c=t("./util/chain"),p=t("./util/inherits"),d=t("./util/clearOwnProperties"),f="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.textureStore,m={IDLE:0,START:1,MARK:2,END:3},v={previouslyVisibleCacheSize:512},y=0;p(i,Error),n.prototype.asset=function(){return this._asset},n.prototype.texture=function(){return this._texture},n.prototype.destroy=function(){var t=this._id,e=this._store,n=this._tile,r=this._asset,o=this._texture,s=this._cancel;return s?void s(new i("Texture load cancelled")):(r&&(r.removeEventListener("change",this._changeHandler),r.destroy()),o&&o.destroy(),e.emit("textureUnload",n),f&&console.log("unload",t,n),d(this),void 0)},l(n),l(r),r.prototype.destroy=function(){this.clear(),d(this)},r.prototype.stage=function(){return this._stage},r.prototype.source=function(){return this._source},r.prototype.clear=function(){var t=this;t._evicted.length=0,t._itemMap.forEach(function(e){t._evicted.push(e)}),t._evicted.forEach(function(e){t._unloadTile(e)}),t._itemMap.clear(),t._visible.clear(),t._previouslyVisible.clear(),t._pinMap.clear(),t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},r.prototype.clearNotPinned=function(){var t=this;t._evicted.length=0,t._itemMap.forEach(function(e){t._pinMap.has(e)||t._evicted.push(e)}),t._evicted.forEach(function(e){t._unloadTile(e)}),t._visible.clear(),t._previouslyVisible.clear(),t._evicted.length=0},r.prototype.startFrame=function(){if(this._state!==m.IDLE&&this._state!==m.START)throw new Error("TextureStore: startFrame called out of sequence");this._state=m.START,this._delimCount++},r.prototype.markTile=function(t){if(this._state!==m.START&&this._state!==m.MARK)throw new Error("TextureStore: markTile called out of sequence");this._state=m.MARK;var e=this._itemMap.get(t),i=e&&e.texture(),n=e&&e.asset();i&&n&&i.refresh(t,n),this._newVisible.add(t)},r.prototype.endFrame=function(){if(this._state!==m.START&&this._state!==m.MARK&&this._state!==m.END)throw new Error("TextureStore: endFrame called out of sequence");this._state=m.END,--this._delimCount||(this._update(),this._state=m.IDLE)},r.prototype._update=function(){var t=this;t._noLongerVisible.length=0,t._visible.forEach(function(e){t._newVisible.has(e)||t._noLongerVisible.push(e)}),t._visibleAgain.length=0,t._newVisible.forEach(function(e){t._previouslyVisible.has(e)&&t._visibleAgain.push(e)}),t._visibleAgain.forEach(function(e){t._previouslyVisible.remove(e)}),t._evicted.length=0,t._noLongerVisible.forEach(function(e){var i=t._itemMap.get(e);if(i&&i.texture()){var n=t._previouslyVisible.add(e);null!=n&&t._evicted.push(n)}else i&&t._unloadTile(e)}),t._evicted.forEach(function(e){t._pinMap.has(e)||t._unloadTile(e)}),t._newVisible.forEach(function(e){t._itemMap.get(e)||t._loadTile(e)});var e=t._visible;t._visible=t._newVisible,t._newVisible=e,t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},r.prototype._loadTile=function(t){if(this._itemMap.has(t))throw new Error("TextureStore: loading texture already in cache");var e=new n(this,t);this._itemMap.set(t,e)},r.prototype._unloadTile=function(t){var e=this._itemMap.del(t);if(!e)throw new Error("TextureStore: unloading texture not in cache");e.destroy()},r.prototype.asset=function(t){var e=this._itemMap.get(t);return e?e.asset():null},r.prototype.texture=function(t){var e=this._itemMap.get(t);return e?e.texture():null},r.prototype.pin=function(t){var e=(this._pinMap.get(t)||0)+1;return this._pinMap.set(t,e),this._itemMap.has(t)||this._loadTile(t),e},r.prototype.unpin=function(t){var e=this._pinMap.get(t);if(!e)throw new Error("TextureStore: unpin when not pinned");return e--,e>0?this._pinMap.set(t,e):(this._pinMap.del(t),this._visible.has(t)||this._previouslyVisible.has(t)||this._unloadTile(t)),e},r.prototype.query=function(t){var e=this._itemMap.get(t),i=this._pinMap.get(t)||0;return{visible:this._visible.has(t),previouslyVisible:this._previouslyVisible.has(t),hasAsset:null!=e&&null!=e.asset(),hasTexture:null!=e&&null!=e.texture(),pinned:0!==i,pinCount:i}},e.exports=r},{"./collections/LruSet":29,"./collections/Map":30,"./collections/Set":31,"./util/chain":88,"./util/clearOwnProperties":90,"./util/defaults":95,"./util/inherits":103,"./util/retry":113,"minimal-event-emitter":13}],21:[function(t,e){"use strict";function i(){this._stack=[],this._visited=new n,this._vertices=null}var n=t("./collections/Set");i.prototype.search=function(t,e,i){var n=this._stack,r=this._visited,o=this._vertices,s=0;for(this._clear(),n.push(e);n.length>0;){var a=n.pop();if(!r.has(a)&&t.intersects(a.vertices(o))){r.add(a);for(var l=a.neighbors(),u=0;u<l.length;u++)n.push(l[u]);i.push(a),s++}}return this._vertices=o,this._clear(),s},i.prototype._clear=function(){this._stack.length=0,this._visited.clear()},e.exports=i},{"./collections/Set":31}],22:[function(t,e){"use strict";function i(t){t=r(t||{},s),this._duration=t.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}var n=t("minimal-event-emitter"),r=t("./util/defaults"),o=t("./util/now"),s={duration:1/0};n(i),i.prototype.start=function(){this._startTime=o(),null==this._handle&&this._duration<1/0&&this._setup(this._duration)},i.prototype.started=function(){return null!=this._startTime},i.prototype.stop=function(){this._startTime=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},i.prototype._setup=function(t){this._handle=setTimeout(this._check,t)},i.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null},i.prototype._check=function(){var t=o(),e=t-this._startTime,i=this._duration-e;this._teardown(),0>=i?(this.emit("timeout"),this._startTime=null):1/0>i&&this._setup(i)},i.prototype.duration=function(){return this._duration},i.prototype.setDuration=function(t){this._duration=t,null!=this._startTime&&this._check()},e.exports=i},{"./util/defaults":95,"./util/now":107,"minimal-event-emitter":13}],23:[function(t,e){"use strict";function i(t,e){e=e||{},this._domElement=t,y(t);var i;if(e.stageType){if(!(i=x[e.stageType]))throw new Error("Unknown stage type: "+e.stageType)}else{for(var n=0;n<w.length;n++)if(w[n].supported()){i=w[n];break}if(!i)throw new Error("None of the stage types are supported")}this._stage=new i(e.stage),v(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),g(this._controlContainer),_(this._controlContainer),r.ios&&this._controlContainer.addEventListener("touchmove",function(t){t.preventDefault()});var o=document.createElement("div");g(o),_(o),T(o),this._controlContainer.appendChild(o),t.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new s(this._stage),this._controls=new a,this._controlMethods=m(this._controls,this._controlContainer,e.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=f.get(this._controlContainer,"touch"),this._hammerManagerMouse=f.get(this._controlContainer,"mouse"),this._dragCursor=new d(this._controls,"mouseViewDrag",t,e.cursors&&e.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new u,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._enterIdleHandler=this._enterIdle.bind(this),this._idleTimer.addEventListener("timeout",this._enterIdleHandler),this._leaveIdleHandler=this._leaveIdle.bind(this),this._controls.addEventListener("active",this._leaveIdleHandler),this.addEventListener("sceneChange",this._leaveIdleHandler),this._idleMovement=null}function n(t,e){e.listLayers().forEach(function(e){e.mergeEffects({opacity:t})}),e._hotspotContainer.domElement().style.opacity=t}var r=t("bowser"),o=t("minimal-event-emitter"),s=t("./RenderLoop"),a=t("./controls/Controls"),l=t("./Scene"),u=t("./Timer"),h=t("./stages/WebGl"),c=t("./stages/Css"),p=t("./stages/Flash"),d=t("./controls/ControlCursor"),f=t("./controls/HammerGestures"),m=t("./controls/registerDefaultControls"),v=t("./renderers/registerDefaultRenderers"),y=t("./util/dom").setOverflowHidden,g=t("./util/dom").setAbsolute,_=t("./util/dom").setFullSize,T=t("./util/dom").setBlocking,S=t("./util/tween"),b=t("./util/noop"),M=t("./util/clearOwnProperties"),x={webgl:h,css:c,flash:p},w=[h,c,p];o(i),i.prototype.destroy=function(){window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy();for(var t in this._controlMethods)this._controlMethods[t].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),M(this)},i.prototype.updateSize=function(){var t=this._size;t.width=this._domElement.clientWidth,t.height=this._domElement.clientHeight,this._stage.setSize(t)},i.prototype.stage=function(){return this._stage},i.prototype.renderLoop=function(){return this._renderLoop},i.prototype.controls=function(){return this._controls},i.prototype.domElement=function(){return this._domElement},i.prototype.createScene=function(t){t=t||{};var e=this.createEmptyScene({view:t.view});return e.createLayer({source:t.source,geometry:t.geometry,pinFirstLevel:t.pinFirstLevel,textureStoreOpts:t.textureStoreOpts,layerOpts:t.layerOpts}),e},i.prototype.createEmptyScene=function(t){t=t||{};var e=new l(this,t.view);return this._scenes.push(e),e},i.prototype._updateSceneLayers=function(){var t,e,i=this._stage,n=this._currentScene,r=this._replacedScene,o=i.listLayers(),s=[];if(r&&(s=s.concat(r.listLayers())),n&&(s=s.concat(n.listLayers())),1!==Math.abs(o.length-s.length))throw new Error("Stage and scene out of sync");if(s.length<o.length)for(t=0;t<o.length;t++)if(e=o[t],s.indexOf(e)<0){this._removeLayerFromStage(e);break}if(s.length>o.length)for(t=0;t<s.length;t++)e=s[t],o.indexOf(e)<0&&this._addLayerToStage(e,t)},i.prototype._addLayerToStage=function(t,e){t.pinFirstLevel(),this._stage.addLayer(t,e)},i.prototype._removeLayerFromStage=function(t){this._stage.removeLayer(t),t.unpinFirstLevel(),t.textureStore().clearNotPinned()},i.prototype._addSceneEventListeners=function(t){t.addEventListener("layerChange",this._layerChangeHandler),t.addEventListener("viewChange",this._viewChangeHandler)},i.prototype._removeSceneEventListeners=function(t){t.removeEventListener("layerChange",this._layerChangeHandler),t.removeEventListener("viewChange",this._viewChangeHandler)},i.prototype.destroyScene=function(t){var e=this._scenes.indexOf(t);if(0>e)throw new Error("No such scene in viewer");var i,n;if(this._currentScene===t){for(this._removeSceneEventListeners(t),n=t.listLayers(),i=0;i<n.length;i++)this._removeLayerFromStage(n[i]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===t){for(this._removeSceneEventListeners(t),n=t.listLayers(),i=0;i<n.length;i++)this._removeLayerFromStage(n[i]);this._replacedScene=null}this._scenes.splice(e,1),t.destroy()},i.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])},i.prototype.hasScene=function(t){return this._scenes.indexOf(t)>=0},i.prototype.listScenes=function(){return[].concat(this._scenes)},i.prototype.scene=function(){return this._currentScene},i.prototype.view=function(){var t=this._currentScene;return t?t.view():null},i.prototype.lookTo=function(t,e,i){var n=this._currentScene;n&&n.lookTo(t,e,i)},i.prototype.startMovement=function(t,e){var i=this._currentScene;i&&i.startMovement(t,e)},i.prototype.stopMovement=function(){var t=this._currentScene;t&&t.stopMovement()},i.prototype.setIdleMovement=function(t,e){this._idleTimer.setDuration(t),this._idleMovement=e},i.prototype.breakIdleMovement=function(){this._leaveIdle(),this._resetIdleTimer()},i.prototype._resetIdleTimer=function(){this._idleTimer.start()},i.prototype._enterIdle=function(){var t=this._currentScene,e=this._idleMovement;t&&e&&t.startMovement(e)},i.prototype._leaveIdle=function(){var t=this._currentScene;t&&t.movement()===this._idleMovement&&t.stopMovement()},i.prototype.switchScene=function(t,e,i){function r(e){d(e,t,l)}function o(){if(s._replacedScene){s._removeSceneEventListeners(s._replacedScene),u=s._replacedScene.listLayers();for(var t=0;t<u.length;t++)s._removeLayerFromStage(u[t]);s._replacedScene=null}s._cancelCurrentTween=null,i()}var s=this;e=e||{},i=i||b;var a=this._stage,l=this._currentScene;if(l===t)return void i();if(this._scenes.indexOf(t)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var u=l?l.listLayers():[],h=t.listLayers(),c=a.listLayers();if(l&&(c.length!==u.length||c.length>1&&c[0]!=u[0]))throw new Error("Stage not in sync with viewer");for(var p=null!=e.transitionDuration?e.transitionDuration:1e3,d=null!=e.transitionUpdate?e.transitionUpdate:n,f=0;f<h.length;f++)this._addLayerToStage(h[f]);this._cancelCurrentTween=S(p,r,o),this._currentScene=t,this._replacedScene=l,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(t)},e.exports=i},{"./RenderLoop":18,"./Scene":19,"./Timer":22,"./controls/ControlCursor":36,"./controls/Controls":37,"./controls/HammerGestures":41,"./controls/registerDefaultControls":48,"./renderers/registerDefaultRenderers":69,"./stages/Css":76,"./stages/Flash":77,"./stages/WebGl":80,"./util/clearOwnProperties":90,"./util/dom":99,"./util/noop":106,"./util/tween":114,bowser:1,"minimal-event-emitter":13}],24:[function(t,e){"use strict";function i(t){this.constructor.super_.call(this,t),this._timestamp=0}var n=t("./Static"),r=t("../util/inherits"),o=t("minimal-event-emitter"),s=t("../util/clearOwnProperties");r(i,n),o(i),i.prototype.destroy=function(){s(this)},i.prototype.timestamp=function(){return this._timestamp},i.prototype.isDynamic=function(){return!0},i.prototype.markDirty=function(){this._timestamp++,this.emit("change")},e.exports=i},{"../util/clearOwnProperties":90,"../util/inherits":103,"./Static":26,"minimal-event-emitter":13}],25:[function(t,e){"use strict";function i(t,e){this._flashElement=t,this._imageId=e}var n=t("minimal-event-emitter"),r=t("../util/clearOwnProperties");n(i),i.prototype.destroy=function(){this._flashElement.unloadImage(this._imageId),r(this)},i.prototype.element=function(){return this._imageId},i.prototype.width=function(){return 0},i.prototype.height=function(){return 0},i.prototype.timestamp=function(){return 0},i.prototype.isDynamic=function(){return!1},e.exports=i},{"../util/clearOwnProperties":90,"minimal-event-emitter":13}],26:[function(t,e){"use strict";function i(t){var e=!1;for(var i in s)if(n[i]&&t instanceof n[i]){e=!0,this._widthProp=s[i][0],this._heightProp=s[i][1];break}if(!e)throw new Error("Unsupported pixel source");this._element=t}var n=t("../util/global"),r=t("minimal-event-emitter"),o=t("../util/clearOwnProperties"),s={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};r(i),i.prototype.destroy=function(){o(this)},i.prototype.element=function(){return this._element},i.prototype.width=function(){return this._element[this._widthProp]},i.prototype.height=function(){return this._element[this._heightProp]},i.prototype.timestamp=function(){return 0},i.prototype.isDynamic=function(){return!1},e.exports=i},{"../util/clearOwnProperties":90,"../util/global":101,"minimal-event-emitter":13}],27:[function(t,e){"use strict";function i(t){t=n(t||{},r);var e=t.yawSpeed,i=t.pitchSpeed,o=t.fovSpeed,s=t.yawAccel,a=t.pitchAccel,l=t.fovAccel,u=t.targetPitch,h=t.targetFov;return function(){var t,n,r,c,p=0,d=0,f=0,m=0,v=0,y=0,g=0;return function(_,T){if(t=(T-p)/1e3,v=Math.min(d+t*s,e),n=v*t,_.yaw=_.yaw+n,null!=u&&_.pitch!==u){var S=.5*f*f/a;y=Math.abs(u-_.pitch)>S?Math.min(f+t*a,i):Math.max(f-t*a,0),r=y*t,u<_.pitch&&(_.pitch=Math.max(u,_.pitch-r)),u>_.pitch&&(_.pitch=Math.min(u,_.pitch+r))}if(null!=h&&_.fov!==u){var b=.5*m*m/l;g=Math.abs(h-_.fov)>b?Math.min(m+t*l,o):Math.max(m-t*l,0),c=g*t,h<_.fov&&(_.fov=Math.max(h,_.fov-c)),h>_.fov&&(_.fov=Math.min(h,_.fov+c))}return p=T,d=v,f=y,m=g,_}}}var n=t("./util/defaults"),r={yawSpeed:.1,pitchSpeed:.1,fovSpeed:.1,yawAccel:.01,pitchAccel:.01,fovAccel:.01,targetPitch:0,targetFov:null};e.exports=i},{"./util/defaults":95}],28:[function(t,e){"use strict";function i(t){if(!isFinite(t)||Math.floor(t)!==t||0>t)throw new Error("LruMap: invalid capacity");this._capacity=t,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}var n=t("../util/mod");i.prototype._index=function(t){return n(this._start+t,this._capacity)},i.prototype.get=function(t){for(var e=0;e<this._size;e++){var i=this._keys[this._index(e)];if(t.equals(i))return this._values[this._index(e)]}return null},i.prototype.set=function(t,e){if(0===this._capacity)return t;this.del(t);var i=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=t,this._values[this._index(this._size)]=e,this._size<this._capacity?this._size++:this._start=this._index(1),i},i.prototype.del=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)])){for(var i=this._values[this._index(e)],n=e;n<this._size-1;n++)this._keys[this._index(n)]=this._keys[this._index(n+1)],this._values[this._index(n)]=this._values[this._index(n+1)];return this._size--,i}return null},i.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)]))return!0;return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0},i.prototype.forEach=function(t){for(var e=0,i=0;i<this._size;i++)t(this._keys[this._index(i)],this._values[this._index(i)]),e+=1;return e},e.exports=i},{"../util/mod":105}],29:[function(t,e){"use strict";function i(t){if(!isFinite(t)||Math.floor(t)!==t||0>t)throw new Error("LruSet: invalid capacity");this._capacity=t,this._elements=new Array(this._capacity),this._start=0,this._size=0}var n=t("../util/mod");i.prototype._index=function(t){return n(this._start+t,this._capacity)},i.prototype.add=function(t){if(0===this._capacity)return t;this.remove(t);var e=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=t,this._size<this._capacity?this._size++:this._start=this._index(1),e},i.prototype.remove=function(t){for(var e=0;e<this._size;e++){var i=this._elements[this._index(e)];if(t.equals(i)){for(var n=e;n<this._size-1;n++)this._elements[this._index(n)]=this._elements[this._index(n+1)];return this._size--,i}}return null},i.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._elements[this._index(e)]))return!0;return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0},i.prototype.forEach=function(t){for(var e=0,i=0;i<this._size;i++)t(this._elements[this._index(i)]),e+=1;return e},e.exports=i},{"../util/mod":105}],30:[function(t,e){"use strict";function i(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||1>t))throw new Error("Map: invalid capacity");this._capacity=t||r,this._keyBuckets=[],this._valBuckets=[];for(var e=0;e<this._capacity;e++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}var n=t("../util/mod"),r=64;i.prototype.get=function(t){for(var e=n(t.hash(),this._capacity),i=this._keyBuckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return this._valBuckets[e][r]}return null},i.prototype.set=function(t,e){for(var i=n(t.hash(),this._capacity),r=this._keyBuckets[i],o=this._valBuckets[i],s=0;s<r.length;s++){var a=r[s];if(t.equals(a)){var l=o[s];return r[s]=t,o[s]=e,l}}return r.push(t),o.push(e),this._size++,null},i.prototype.del=function(t){for(var e=n(t.hash(),this._capacity),i=this._keyBuckets[e],r=this._valBuckets[e],o=0;o<i.length;o++){var s=i[o];if(t.equals(s)){for(var a=r[o],l=o;l<i.length-1;l++)i[l]=i[l+1],r[l]=r[l+1];return i.length=i.length-1,r.length=r.length-1,this._size--,a}}return null},i.prototype.has=function(t){for(var e=n(t.hash(),this._capacity),i=this._keyBuckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return!0}return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._keyBuckets[t].length=0,this._valBuckets[t].length=0;this._size=0},i.prototype.forEach=function(t){for(var e=0,i=0;i<this._capacity;i++)for(var n=this._keyBuckets[i],r=this._valBuckets[i],o=0;o<n.length;o++)t(n[o],r[o]),e+=1;return e},e.exports=i},{"../util/mod":105}],31:[function(t,e){"use strict";function i(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||1>t))throw new Error("Set: invalid capacity");this._capacity=this._capacity||r,this._buckets=[];for(var e=0;e<this._capacity;e++)this._buckets.push([]);this._size=0}var n=t("../util/mod"),r=64;i.prototype.add=function(t){for(var e=n(t.hash(),this._capacity),i=this._buckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return i[r]=t,o}return i.push(t),this._size++,null},i.prototype.remove=function(t){for(var e=n(t.hash(),this._capacity),i=this._buckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o)){for(var s=r;s<i.length-1;s++)i[s]=i[s+1];return i.length=i.length-1,this._size--,o}}return null},i.prototype.has=function(t){for(var e=n(t.hash(),this._capacity),i=this._buckets[e],r=0;r<i.length;r++){var o=i[r];if(t.equals(o))return!0}return!1},i.prototype.size=function(){return this._size},i.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._buckets[t].length=0;this._size=0},i.prototype.forEach=function(t){for(var e=0,i=0;i<this._capacity;i++)for(var n=this._buckets[i],r=0;r<n.length;r++)t(n[r]),e+=1;return e},e.exports=i},{"../util/mod":105}],32:[function(t,e){"use strict";function i(t){this._concurrency=t&&t.concurrency||1,this._paused=t&&!!t.paused||!1,this._pool=[];for(var e=0;e<this._concurrency;e++)this._pool.push(new n(t));this._next=0}var n=t("./WorkQueue"),r=t("../util/mod");i.prototype.length=function(){for(var t=0,e=0;e<this._pool.length;e++)t+=this._pool[e].length();return t},i.prototype.push=function(t,e){var i=this._next,n=this._pool[i].push(t,e);return this._next=r(this._next+1,this._concurrency),n},i.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var t=0;t<this._concurrency;t++)this._pool[t].pause()}},i.prototype.resume=function(){if(this._paused){this._paused=!1;for(var t=0;t<this._concurrency;t++)this._pool[t].resume()}},e.exports=i},{"../util/mod":105,"./WorkQueue":33}],33:[function(t,e){"use strict";function i(t,e){this.fn=t,this.cb=e,this.cfn=null}function n(t){this._queue=[],this._delay=t&&t.delay||0,this._paused=t&&!!t.paused||!1,this._currentTask=null,this._lastFinished=null}var r=t("../util/now");n.prototype.length=function(){return this._queue.length},n.prototype.push=function(t,e){var n=new i(t,e),r=this._cancel.bind(this,n);return this._queue.push(n),this._next(),r},n.prototype.pause=function(){this._paused||(this._paused=!0)},n.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())},n.prototype._start=function(t){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=t;var e=this._finish.bind(this,t);if(t.cfn=t.fn(e),"function"!=typeof t.cfn)throw new Error("WorkQueue: function is not cancellable")},n.prototype._finish=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask!==t)throw new Error("WorkQueue: called finish on wrong task");t.cb.apply(null,e),this._currentTask=null,this._lastFinished=r(),this._next()},n.prototype._cancel=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask===t)t.cfn.apply(null,e);else{var i=this._queue.indexOf(t);i>=0&&(this._queue.splice(i,1),t.cb.apply(null,e))}},n.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(null!=this._lastFinished){var t=r()-this._lastFinished,e=this._delay-t;if(e>0)return void setTimeout(this._next.bind(this),e)}var i=this._queue.shift();this._start(i)}},e.exports=n},{"../util/now":107}],34:[function(t,e){"use strict";function i(t){var e=t||{};return e.colorOffset=e.colorOffset||s.create(),e.colorMatrix=e.colorMatrix||a.create(),e}function n(t,e,i){r(i,t,e.colorMatrix),s.add(i,i,e.colorOffset)}function r(t,e,i){var n=e[0],r=e[1],o=e[2],s=e[3];return t[0]=i[0]*n+i[1]*r+i[2]*o+i[3]*s,t[1]=i[4]*n+i[5]*r+i[6]*o+i[7]*s,t[2]=i[8]*n+i[9]*r+i[10]*o+i[11]*s,t[3]=i[12]*n+i[13]*r+i[14]*o+i[15]*s,t}function o(t,e){for(var i=t.width,r=t.height,o=t.data,a=0;i*r>a;a++)s.set(l,o[4*a+0]/255,o[4*a+1]/255,o[4*a+2]/255,o[4*a+3]/255),n(l,e,l),o[4*a+0]=255*l[0],o[4*a+1]=255*l[1],o[4*a+2]=255*l[2],o[4*a+3]=255*l[3]}var s=t("gl-matrix").vec4,a=t("gl-matrix").mat4,l=s.create();e.exports={identity:i,applyToPixel:n,applyToImageData:o}},{"gl-matrix":2}],35:[function(t,e){"use strict";function i(t){t=t||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=t.nowForTesting||o,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/now"),s=t("../util/clearOwnProperties");n(i),i.prototype.add=function(t){if(!this.has(t)){var e={};this._parameters.forEach(function(t){e[t]={dynamics:new r,time:null}});var i=this._updateDynamics.bind(this,e),n={instance:t,dynamics:e,parameterDynamicsHandler:i};t.addEventListener("parameterDynamics",i),this._methods.push(n)}},i.prototype.remove=function(t){var e=this._indexOfInstance(t);if(e>=0){var i=this._methods.splice(e,1)[0];i.instance.removeEventListener("parameterDynamics",i.parameterDynamicsHandler)}},i.prototype.has=function(t){return this._indexOfInstance(t)>=0},i.prototype._indexOfInstance=function(t){for(var e=0;e<this._methods.length;e++)if(this._methods[e].instance===t)return e;return-1},i.prototype.list=function(){for(var t=[],e=0;e<this._methods.length;e++)t.push(this._methods[e].instance);return t},i.prototype._updateDynamics=function(t,e,i){var n=t[e];if(!n)throw new Error("Unknown control parameter "+e);var r=this._now();n.dynamics.update(i,(r-n.time)/1e3),n.time=r,this.emit("change")},i.prototype._resetComposedOffsets=function(){for(var t=0;t<this._parameters.length;t++)this._composedOffsets[this._parameters[t]]=0},i.prototype.offsets=function(){var t,e=!1,i=this._now();this._resetComposedOffsets();for(var n=0;n<this._methods.length;n++)for(var r=this._methods[n].dynamics,o=0;o<this._parameters.length;o++){t=this._parameters[o];var s=r[t],a=s.dynamics;null!=a.offset&&(this._composedOffsets[t]+=a.offset,a.offset=null);var l=(i-s.time)/1e3,u=a.offsetFromVelocity(l);u&&(this._composedOffsets[t]+=u);var h=a.velocityAfter(l);a.velocity=h,h&&(e=!0),s.time=i}return this._composeReturn.changing=e,this._composeReturn},i.prototype.destroy=function(){for(var t=this.list(),e=0;e<t.length;e++)this.remove(t[e]);s(this)},e.exports=i},{"../util/clearOwnProperties":90,"../util/now":107,"./Dynamics":39,"minimal-event-emitter":13}],36:[function(t,e){"use strict";function i(t,e,i,r){r=n(r||{},o),this._element=i,this._controls=t,this._id=e,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,r.active),this._setInactiveCursor=this._setCursor.bind(this,r.inactive),this._setDisabledCursor=this._setCursor.bind(this,r.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),t.addEventListener("methodEnabled",this._updateAttachmentHandler),t.addEventListener("methodDisabled",this._updateAttachmentHandler),t.addEventListener("enabled",this._updateAttachmentHandler),t.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}var n=t("../util/defaults"),r=t("../util/clearOwnProperties"),o={active:"move",inactive:"default",disabled:"default"};i.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),r(this)},i.prototype._updateAttachment=function(){var t=this._controls,e=this._id;t.enabled()&&t.method(e).enabled?this._attachToControlMethod(t.method(e)):this._detachFromControlMethod(t.method(e))},i.prototype._attachToControlMethod=function(t){this._attached||(t.instance.addEventListener("active",this._setActiveCursor),t.instance.addEventListener("inactive",this._setInactiveCursor),t.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)},i.prototype._detachFromControlMethod=function(t){this._attached&&(t.instance.removeEventListener("active",this._setActiveCursor),t.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)},i.prototype._setCursor=function(t){this._element.style.cursor=t},e.exports=i},{"../util/clearOwnProperties":90,"../util/defaults":95}],37:[function(t,e){"use strict";function i(t){t=t||{},this._methods={},this._methodGroups={},this._composer=new r,this._enabled=!t||!t.enabled||!!t.enabled,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}var n=t("minimal-event-emitter"),r=t("./Composer"),o=t("../util/clearOwnProperties"),s="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;n(i),i.prototype.destroy=function(){this.detach(),this._composer.destroy(),o(this)},i.prototype.methods=function(){var t={};for(var e in this._methods)t[e]=this._methods[e];return t},i.prototype.method=function(t){return this._methods[t]},i.prototype.registerMethod=function(t,e,i){if(this._methods[t])throw new Error("Control method already registered with id "+t);this._methods[t]={instance:e,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,t),inactiveHandler:this._handleInactive.bind(this,t)},i&&this.enableMethod(t,e)},i.prototype.unregisterMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&this.disableMethod(t),delete this._methods[t]},i.prototype.enableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled||(e.enabled=!0,e.active&&this._incrementActiveCount(),this._listen(t),this._updateComposer(),this.emit("methodEnabled",t))},i.prototype.disableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&(e.enabled=!1,e.active&&this._decrementActiveCount(),this._unlisten(t),this._updateComposer(),this.emit("methodDisabled",t))},i.prototype.addMethodGroup=function(t,e){this._methodGroups[t]=e},i.prototype.removeMethodGroup=function(t){delete this._methodGroups[t]},i.prototype.methodGroups=function(){var t={};for(var e in this._methodGroups)t[e]=this._methodGroups[e];return t},i.prototype.enableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach(function(t){e.enableMethod(t)})},i.prototype.disableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach(function(t){e.disableMethod(t)})},i.prototype.enabled=function(){return this._enabled},i.prototype.enable=function(){this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer()},i.prototype.disable=function(){this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer()},i.prototype.attach=function(t){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=t,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=t.renderOnNextFrame.bind(t),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)},i.prototype.detach=function(){this._attachedRenderLoop&&(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)},i.prototype.attached=function(){return null!=this._attachedRenderLoop},i.prototype._listen=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.addEventListener("active",e.activeHandler),e.instance.addEventListener("inactive",e.inactiveHandler)},i.prototype._unlisten=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.removeEventListener("active",e.activeHandler),e.instance.removeEventListener("inactive",e.inactiveHandler)},i.prototype._handleActive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active||(e.active=!0,this._incrementActiveCount())},i.prototype._handleInactive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active&&(e.active=!1,this._decrementActiveCount())},i.prototype._incrementActiveCount=function(){this._activeCount++,s&&this._checkActiveCount(),this._enabled&&1===this._activeCount&&this.emit("active")},i.prototype._decrementActiveCount=function(){this._activeCount--,s&&this._checkActiveCount(),this._enabled&&0===this._activeCount&&this.emit("inactive")},i.prototype._checkActiveCount=function(){var t=0;for(var e in this._methods){var i=this._methods[e];i.enabled&&i.active&&t++}if(t!=this._activeCount)throw new Error("Bad control state")},i.prototype._updateComposer=function(){var t=this._composer;for(var e in this._methods){var i=this._methods[e],n=this._enabled&&i.enabled;n&&!t.has(i.instance)&&t.add(i.instance),!n&&t.has(i.instance)&&t.remove(i.instance)}},i.prototype._updateViewsWithControls=function(){var t=this._composer.offsets();t.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var e=this._attachedRenderLoop.stage().listLayers(),i=0;i<e.length;i++){var n=e[i].view();this.updatedViews_.indexOf(n)<0&&(e[i].view().updateWithControlParameters(t.offsets),this.updatedViews_.push(n))}},e.exports=i},{"../util/clearOwnProperties":90,"./Composer":35,"minimal-event-emitter":13}],38:[function(t,e){"use strict";function i(t,e,i){this._element=t,this._opts=s(i||{},u),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new r,y:new r},this._hammer=o.get(t,e),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleEnd.bind(this)),this._hammer.on("pancancel",this._handleEnd.bind(this))}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("./HammerGestures"),s=t("../util/defaults"),a=t("./util").maxFriction,l=t("../util/clearOwnProperties"),u={friction:6,maxFrictionTime:.3},h="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;n(i),i.prototype.destroy=function(){this._hammer.release(),l(this)},i.prototype._handleHammerEvent=function(t){if(t.isFirst){if(h&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(t.isFinal){if(h&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}},i.prototype._handleStart=function(t){t.preventDefault(),this._startEvent=t},i.prototype._handleMove=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsMove(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))},i.prototype._handleEnd=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1},i.prototype._updateDynamicsMove=function(t){var e=t.deltaX,i=t.deltaY,n=this._lastEvent||this._startEvent;n&&(e-=n.deltaX,i-=n.deltaY);var r=this._element.getBoundingClientRect(),o=r.right-r.left,s=r.bottom-r.top;e/=o,i/=s,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-e,this._dynamics.y.offset=-i,this._lastEvent=t};var c=[null,null];i.prototype._updateDynamicsRelease=function(t){var e=this._element.getBoundingClientRect(),i=e.right-e.left,n=e.bottom-e.top,r=1e3*t.velocityX/i,o=1e3*t.velocityY/n;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=r,this._dynamics.y.velocity=o,a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,c),this._dynamics.x.friction=c[0],this._dynamics.y.friction=c[1]},e.exports=i},{"../util/clearOwnProperties":90,"../util/defaults":95,"./Dynamics":39,"./HammerGestures":41,"./util":49,"minimal-event-emitter":13}],39:[function(t,e){"use strict";function i(){this.velocity=null,this.friction=null,this.offset=null}function n(t,e){return 0>t?Math.min(0,t+e):t>0?Math.max(0,t-e):0}i.equals=function(t,e){return t.velocity===e.velocity&&t.friction===e.friction&&t.offset===e.offset},i.prototype.equals=function(t){return i.equals(this,t)},i.prototype.update=function(t,e){t.offset&&(this.offset=this.offset||0,this.offset+=t.offset);var i=this.offsetFromVelocity(e);i&&(this.offset=this.offset||0,this.offset+=i),this.velocity=t.velocity,this.friction=t.friction},i.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null},i.prototype.velocityAfter=function(t){return this.velocity?this.friction?n(this.velocity,this.friction*t):this.velocity:null},i.prototype.offsetFromVelocity=function(t){t=Math.min(t,this.nullVelocityTime());var e=this.velocityAfter(t);return(this.velocity+e)/2*t},i.prototype.nullVelocityTime=function(){return null==this.velocity?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)},e.exports=i},{}],40:[function(t,e){"use strict";function i(t,e,i,n){if(!t)throw new Error("ElementPressControlMethod: element must be defined");if(!e)throw new Error("ElementPressControlMethod: parameter must be defined");if(!i)throw new Error("ElementPressControlMethod: velocity must be defined");if(!n)throw new Error("ElementPressControlMethod: friction must be defined");this._element=t,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),t.addEventListener("mousedown",this._pressHandler),t.addEventListener("mouseup",this._releaseHandler),t.addEventListener("mouseleave",this._releaseHandler),t.addEventListener("touchstart",this._pressHandler),t.addEventListener("touchmove",this._releaseHandler),t.addEventListener("touchend",this._releaseHandler),this._parameter=e,this._velocity=i,this._friction=n,this._dynamics=new r,this._pressing=!1}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/clearOwnProperties");n(i),i.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),o(this)},i.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")},i.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1},e.exports=i},{"../util/clearOwnProperties":90,"./Dynamics":39,"minimal-event-emitter":13}],41:[function(t,e){"use strict";function i(t,e){return t[l]||(t[l]=a++),e+t[l]}function n(){this._managers={},this._refCount={}}function r(t,e,i,n){this._manager=e,this._element=i,this._type=n,this._hammerGestures=t,this._eventHandlers=[]}var o=t("hammerjs"),s=t("bowser"),a=1,l="MarzipanoHammerElementId";n.prototype.get=function(t,e){var n=i(t,e);return this._managers[n]||(this._managers[n]=this._createManager(t,e),this._refCount[n]=0),this._refCount[n]++,new r(this,this._managers[n],t,e)},n.prototype._createManager=function(t,e){var i=new o.Manager(t);return"mouse"===e?i.add(new o.Pan({direction:o.DIRECTION_ALL,threshold:0})):"touch"!==e&&"pen"!==e&&"kinect"!==e||(i.add(new o.Pan({direction:o.DIRECTION_ALL,threshold:20,pointers:1})),s.msie&&parseFloat(s.version)<10||i.add(new o.Pinch)),i},n.prototype._releaseHandle=function(t,e){var n=i(t,e);this._refCount[n]&&(--this._refCount[n]||(this._managers[n].destroy(),delete this._managers[n],delete this._refCount[n]))},r.prototype.on=function(t,e){var i=this._type,n=function(t){i===t.pointerType&&e(t)};this._eventHandlers.push({events:t,handler:n}),this._manager.on(t,n)},r.prototype.release=function(){for(var t=0;t<this._eventHandlers.length;t++){var e=this._eventHandlers[t];this._manager.off(e.events,e.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null},r.prototype.manager=function(){return this._manager},e.exports=new n},{bowser:1,hammerjs:12}],42:[function(t,e){"use strict";function i(t,e,i,n,o){if(!t)throw new Error("KeyControlMethod: keyCode must be defined");if(!e)throw new Error("KeyControlMethod: parameter must be defined");if(!i)throw new Error("KeyControlMethod: velocity must be defined");if(!n)throw new Error("KeyControlMethod: friction must be defined");o=o||document,this._keyCode=t,this._parameter=e,this._velocity=i,this._friction=n,this._element=o,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new r,this._pressing=!1}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/clearOwnProperties");n(i),i.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),o(this)},i.prototype._handlePress=function(t){t.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))},i.prototype._handleRelease=function(t){t.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)},i.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1},e.exports=i},{"../util/clearOwnProperties":90,"./Dynamics":39,"minimal-event-emitter":13}],43:[function(t,e){"use strict";function i(t,e){this._hammer=o.get(t,e),this._lastEvent=null,this._active=!1,this._dynamics=new r,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("./HammerGestures"),s=t("../util/clearOwnProperties");n(i),i.prototype.destroy=function(){this._hammer.release(),s(this)},i.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))},i.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))},i.prototype._handleEvent=function(t){var e=t.scale;this._lastEvent&&(e/=this._lastEvent.scale),this._dynamics.offset=-1*(e-1),this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=t},e.exports=i},{"../util/clearOwnProperties":90,"./Dynamics":39,"./HammerGestures":41,"minimal-event-emitter":13}],44:[function(t,e){"use strict";function i(t,e,i){this._element=t,this._opts=s(i||{},u),this._active=!1,this._hammer=o.get(t,e),this._dynamics={x:new r,y:new r},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("./HammerGestures"),s=t("../util/defaults"),a=t("./util").maxFriction,l=t("../util/clearOwnProperties"),u={speed:8,friction:6,maxFrictionTime:.3};n(i),i.prototype.destroy=function(){this._hammer.release(),l(this)},i.prototype._handleStart=function(t){t.preventDefault(),this._active||(this._active=!0,this.emit("active"))},i.prototype._handleMove=function(t){t.preventDefault(),this._updateDynamics(t,!1)},i.prototype._handleRelease=function(t){t.preventDefault(),this._updateDynamics(t,!0),this._active&&(this._active=!1,this.emit("inactive"))};var h=[null,null];i.prototype._updateDynamics=function(t,e){var i=this._element.getBoundingClientRect(),n=i.right-i.left,r=i.bottom-i.top,o=Math.max(n,r),s=t.deltaX/o*this._opts.speed,l=t.deltaY/o*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=s,this._dynamics.y.velocity=l,e&&(a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,h),this._dynamics.x.friction=h[0],this._dynamics.y.friction=h[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)},e.exports=i},{"../util/clearOwnProperties":90,"../util/defaults":95,"./Dynamics":39,"./HammerGestures":41,"./util":49,"minimal-event-emitter":13}],45:[function(t,e){"use strict";function i(t,e){this._opts=a(e||{},u),this._dynamics=new o,this._eventList=[];var i=this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing;this._wheelListener=new s(t,i.bind(this))}function n(t){var e=1==t.deltaMode?20:1;return t.deltaY*e}var r=t("minimal-event-emitter"),o=t("./Dynamics"),s=t("./WheelListener"),a=t("../util/defaults"),l=t("../util/clearOwnProperties"),u={frictionTime:.2,zoomDelta:.001};r(i),i.prototype.destroy=function(){this._wheelListener.destroy(),l(this)},i.prototype.withoutSmoothing=function(t){this._dynamics.offset=n(t)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},i.prototype.withSmoothing=function(t){var e=t.timeStamp;for(this._eventList.push(t);this._eventList[0].timeStamp<e-1e3*this._opts.frictionTime;)this._eventList.shift(0);for(var i=0,r=0;r<this._eventList.length;r++)i+=n(this._eventList[r])*this._opts.zoomDelta/this._opts.frictionTime;this._dynamics.velocity=i,this._dynamics.friction=Math.abs(i)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},e.exports=i},{"../util/clearOwnProperties":90,"../util/defaults":95,"./Dynamics":39,"./WheelListener":47,"minimal-event-emitter":13}],46:[function(t,e){"use strict";function i(t){if(!t)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=t,this._dynamics=new r}var n=t("minimal-event-emitter"),r=t("./Dynamics"),o=t("../util/clearOwnProperties");n(i),i.prototype.destroy=function(){o(this)},i.prototype.setVelocity=function(t){this._dynamics.velocity=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},i.prototype.setFriction=function(t){this._dynamics.friction=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},e.exports=i},{"../util/clearOwnProperties":90,"./Dynamics":39,"minimal-event-emitter":13}],47:[function(t,e){"use strict";function i(t,e,i){var o=r();if("wheel"===o)this._fun=e,this._elem=t,this._elem.addEventListener("wheel",this._fun,i);else{if("mousewheel"!==o)throw new Error("Browser does not support mouse wheel events");this._fun=n(e),this._elem=t,this._elem.addEventListener("mousewheel",this._fun,i)}}function n(t){return function(e){e||(e=window.event);var i={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:1,deltaX:0,deltaZ:0,timeStamp:e.timeStamp||Date.now(),preventDefault:e.preventDefault.bind(e)};return i.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(i.deltaX=-.025*e.wheelDeltaX),t(i)}}function r(){return void 0!==s?s:s="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":null}var o=t("../util/clearOwnProperties");i.prototype.destroy=function(){this._elem.removeEventListener(r(),this._fun),o(this)};var s;e.exports=i},{"../util/clearOwnProperties":90}],48:[function(t,e){"use strict";function i(t,e,i){i=n(i||{},u);var h={mouseViewDrag:new r(e,"mouse"),mouseViewQtvr:new o(e,"mouse"),touchView:new r(e,"touch"),pinch:new a(e,"touch"),leftArrowKey:new l(37,"x",-.7,3),rightArrowKey:new l(39,"x",.7,3),upArrowKey:new l(38,"y",-.7,3),downArrowKey:new l(40,"y",.7,3),plusKey:new l(107,"zoom",-.7,3),minusKey:new l(109,"zoom",.7,3),wKey:new l(87,"y",-.7,3),aKey:new l(65,"x",-.7,3),sKey:new l(83,"y",.7,3),dKey:new l(68,"x",.7,3),qKey:new l(81,"roll",.7,3),eKey:new l(69,"roll",-.7,3)};!1!==i.scrollZoom&&(h.scrollZoom=new s(e));var c={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]},p=["scrollZoom","touchView","pinch"];switch(i.mouseViewMode){case"drag":p.push("mouseViewDrag");break;case"qtvr":p.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+i.mouseViewMode)}for(var d in h){var f=h[d];t.registerMethod(d,f),p.indexOf(d)>=0&&t.enableMethod(d)}for(var m in c){var v=c[m];t.addMethodGroup(m,v)}return h}var n=t("../util/defaults"),r=t("./Drag"),o=t("./Qtvr"),s=t("./ScrollZoom"),a=t("./PinchZoom"),l=t("./Key"),u={mouseViewMode:"drag"};e.exports=i},{"../util/defaults":95,"./Drag":38,"./Key":42,"./PinchZoom":43,"./Qtvr":44,"./ScrollZoom":45}],49:[function(t,e){"use strict";function i(t,e,i,r,o){var s=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));t=Math.max(t,s/r),n(e,i,t,o),o[0]=Math.abs(o[0]),o[1]=Math.abs(o[1])}function n(t,e,i,n){var r=Math.atan(e/t);n[0]=i*Math.cos(r),n[1]=i*Math.sin(r)}e.exports={maxFriction:i,changeVectorNorm:n}},{}],50:[function(t,e){"use strict";function i(t,e,i,n){e&&v.rotateZ(t,t,S,e),i&&v.rotateX(t,t,S,i),n&&v.rotateY(t,t,S,n)}function n(t,e,i,n,r){this.face=t,this.x=e,this.y=i,this.z=n,this._geometry=r,this._level=r.levelList[n]}function r(t){if(this.constructor.super_.call(this,t),this._size=t.size,this._tileSize=t.tileSize,this._size%this._tileSize!=0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}function o(t){if("array"!==m(t))throw new Error("Level list must be an array");this.levelList=c(t,r),this.selectableLevelList=p(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new l(this),this._neighborsCache=new u(g),this._vec=y.create(),this._viewSize={}}for(var s=t("../util/inherits"),a=t("../util/hash"),l=t("../TileSearcher"),u=t("../collections/LruMap"),h=t("./Level"),c=t("./common").makeLevelList,p=t("./common").makeSelectableLevelList,d=t("../util/clamp"),f=t("../util/cmp"),m=t("../util/type"),v=t("gl-matrix").vec3,y=t("gl-matrix").vec4,g=64,_="fudlrb",T={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},S=v.create(),b={},M=0;M<_.length;M++){var x=_[M],w=T[x],E=v.fromValues(0,0,-1);i(E,0,w.x,w.y),b[x]=E}var P={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},A=[[0,1],[1,0],[0,-1],[-1,0]];n.prototype.rotX=function(){return T[this.face].x},n.prototype.rotY=function(){return T[this.face].y},n.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5},n.prototype.centerY=function(){return.5-(this.y+.5)/this._level.numVerticalTiles()},n.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()},n.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()},n.prototype.width=function(){return this._level.tileWidth()},n.prototype.height=function(){return this._level.tileHeight()},n.prototype.levelWidth=function(){return this._level.width()},n.prototype.levelHeight=function(){return this._level.height()},n.prototype.atTopLevel=function(){return 0===this.z},n.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},n.prototype.atTopEdge=function(){return 0===this.y},n.prototype.atBottomEdge=function(){return this.y===this._level.numVerticalTiles()-1},n.prototype.atLeftEdge=function(){return 0===this.x},n.prototype.atRightEdge=function(){return this.x===this._level.numHorizontalTiles()-1},n.prototype.padTop=function(){return this.atTopEdge()&&/[fu]/.test(this.face)},n.prototype.padBottom=function(){return!this.atBottomEdge()||/[fd]/.test(this.face)},n.prototype.padLeft=function(){return this.atLeftEdge()&&/[flud]/.test(this.face)},n.prototype.padRight=function(){return!this.atRightEdge()||/[frud]/.test(this.face)},n.prototype.vertices=function(t){function e(t,e,r){v.set(t,e,r,-.5),i(t,0,n.x,n.y)}t||(t=[v.create(),v.create(),v.create(),v.create()]);var n=T[this.face],r=this.centerX()-this.scaleX()/2,o=this.centerX()+this.scaleX()/2,s=this.centerY()-this.scaleY()/2,a=this.centerY()+this.scaleY()/2;return e(t[0],r,a),e(t[1],o,a),e(t[2],o,s),e(t[3],r,s),t},n.prototype.parent=function(){if(this.atTopLevel())return null;var t=this.face,e=this.z,i=this.x,r=this.y,o=this._geometry,s=o.levelList[e],a=o.levelList[e-1];return new n(t,Math.floor(i/s.numHorizontalTiles()*a.numHorizontalTiles()),Math.floor(r/s.numVerticalTiles()*a.numVerticalTiles()),e-1,o)},n.prototype.children=function(t){if(this.atBottomLevel())return null;var e=this.face,i=this.z,r=this.x,o=this.y,s=this._geometry,a=s.levelList[i],l=s.levelList[i+1],u=l.numHorizontalTiles()/a.numHorizontalTiles(),h=l.numVerticalTiles()/a.numVerticalTiles();t=t||[];for(var c=0;u>c;c++)for(var p=0;h>p;p++){var d=u*r+c,f=h*o+p,m=i+1;t.push(new n(e,d,f,m,s))}return t},n.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,r=e.get(this);if(r)return r;for(var o=t._vec,s=this.face,a=this.x,l=this.y,u=this.z,h=this._level,c=h.numHorizontalTiles(),p=h.numVerticalTiles(),f=[],m=0;m<A.length;m++){var y=A[m][0],g=A[m][1],_=a+y,S=l+g,b=u,M=s;if(0>_||_>=c||0>S||S>=p){var x=this.centerX(),w=this.centerY();0>_?(v.set(o,-.5,w,-.5),M=P[s][0]):_>=c?(v.set(o,.5,w,-.5),M=P[s][1]):0>S?(v.set(o,x,.5,-.5),M=P[s][2]):S>=p&&(v.set(o,x,-.5,-.5),M=P[s][3]);var E;E=T[s],i(o,0,E.x,E.y),E=T[M],i(o,0,-E.x,-E.y),_=d(Math.floor((.5+o[0])*c),0,c-1),S=d(Math.floor((.5-o[1])*p),0,p-1)}f.push(new n(M,_,S,b,t))}return e.set(this,f),f},n.prototype.hash=function(){return a(_.indexOf(this.face),this.z,this.y,this.x)},n.prototype.equals=function(t){return this.geometry===t.geometry&&this.face===t.face&&this.z===t.z&&this.y===t.y&&this.x===t.x},n.prototype.cmp=function(t){return f(this.z,t.z)||f(_.indexOf(this.face),_.indexOf(t.face))||f(this.y,t.y)||f(this.x,t.x)},n.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"},s(r,h),r.prototype.width=function(){return this._size},r.prototype.height=function(){return this._size},r.prototype.tileWidth=function(){return this._tileSize},r.prototype.tileHeight=function(){return this._tileSize},r.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),n=this.tileWidth(),r=this.tileHeight(),o=this.numHorizontalTiles(),s=this.numVerticalTiles(),a=t.width(),l=t.height(),u=t.tileWidth(),h=t.tileHeight(),c=t.numHorizontalTiles(),p=t.numVerticalTiles();if(e%a!=0)throw new Error("Level width must be multiple of parent level: "+e+" vs. "+a);if(i%l!=0)throw new Error("Level height must be multiple of parent level: "+i+" vs. "+l);if(o%c!=0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+o+" ("+e+"/"+n+") vs. "+c+" ("+a+"/"+u+")");if(s%p!=0)throw new Error("Number of vertical tiles must be multiple of parent level: "+s+" ("+i+"/"+r+") vs. "+p+" ("+l+"/"+h+")")},o.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},o.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,o=t.numVerticalTiles()-1;e=e||[];for(var s=0;s<_.length;s++)for(var a=_[s],l=0;r>=l;l++)for(var u=0;o>=u;u++)e.push(new n(a,l,u,i,this));return e},o.prototype._closestTile=function(t,e){var r=this._vec;y.set(r,0,0,1,1),y.transformMat4(r,r,t.inverseProjection());var o=1/0,s=null;for(var a in b){var l=b[a],u=1-v.dot(l,r);o>u&&(o=u,s=a)}for(var h=Math.max(Math.abs(r[0]),Math.abs(r[1]),Math.abs(r[2]))/.5,c=0;3>c;c++)r[c]=r[c]/h;var p=T[s];i(r,0,-p.x,-p.y);var f=this.levelList.indexOf(e),m=e.numHorizontalTiles(),g=e.numVerticalTiles();return new n(s,d(Math.floor((.5+r[0])*m),0,m-1),d(Math.floor((.5-r[1])*g),0,g-1),f,this)},o.prototype.visibleTiles=function(t,e,i){var n=this._viewSize,r=this._tileSearcher;if(i=i||[],t.size(n),0===n.width||0===n.height)return i;var o=this._closestTile(t,e);if(!r.search(t,o,i))throw new Error("Starting tile is not visible");return i},o.Tile=o.prototype.Tile=n,o.type=o.prototype.type="cube",n.type=n.prototype.type="cube",e.exports=o},{"../TileSearcher":21,"../collections/LruMap":28,"../util/clamp":89,"../util/cmp":91,"../util/hash":102,"../util/inherits":103,"../util/type":115,"./Level":53,"./common":54,"gl-matrix":2}],51:[function(t,e){"use strict";function i(t,e){this.z=t,this._geometry=e,this._level=e.levelList[t]}function n(t){this.constructor.super_.call(this,t),this._width=t.width}function r(t){if("array"!==h(t))throw new Error("Level list must be an array");this.levelList=l.makeLevelList(t,n),this.selectableLevelList=l.makeSelectableLevelList(this.levelList)}var o=t("../util/inherits"),s=t("../util/hash"),a=t("../util/cmp"),l=t("./common"),u=t("./Level"),h=t("../util/type");i.prototype.rotX=function(){return 0},i.prototype.rotY=function(){return 0},i.prototype.centerX=function(){return.5},i.prototype.centerY=function(){return.5},i.prototype.scaleX=function(){return 1},i.prototype.scaleY=function(){return 1},i.prototype.width=function(){return this._level.tileWidth()},i.prototype.height=function(){return this._level.tileHeight()},i.prototype.levelWidth=function(){return this._level.width()},i.prototype.levelHeight=function(){return this._level.height()},i.prototype.atTopLevel=function(){return 0===this.z},i.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},i.prototype.atTopEdge=function(){return!0},i.prototype.atBottomEdge=function(){return!0},i.prototype.atLeftEdge=function(){return!0},i.prototype.atRightEdge=function(){return!0},i.prototype.padTop=function(){return!1},i.prototype.padBottom=function(){return!1},i.prototype.padLeft=function(){return!1},i.prototype.padRight=function(){return!1},i.prototype.parent=function(){return this.atTopLevel()?null:new i(this.z-1,this._geometry)},i.prototype.children=function(t){return this.atBottomLevel()?null:(t=t||[],t.push(new i(this.z+1,this._geometry)),t)},i.prototype.neighbors=function(){return[]},i.prototype.hash=function(){return s(this.z)},i.prototype.equals=function(t){return this.geometry===t.geometry&&this.z===t.z},i.prototype.cmp=function(t){return a(this.z,t.z)},i.prototype.str=function(){return"EquirectTile("+tile.z+")"},o(n,u),n.prototype.width=function(){return this._width},n.prototype.height=function(){return this._width/2},n.prototype.tileWidth=function(){return this._width},n.prototype.tileHeight=function(){return this._width/2},r.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},r.prototype.levelTiles=function(t,e){var n=this.levelList.indexOf(t);return e=e||[],e.push(new i(n,this)),e},r.prototype.visibleTiles=function(t,e,n){var r=new i(this.levelList.indexOf(e),this);n=n||[],n.length=0,n.push(r)},r.Tile=r.prototype.Tile=i,r.type=r.prototype.type="equirect",i.type=i.prototype.type="equirect",e.exports=r},{"../util/cmp":91,"../util/hash":102,"../util/inherits":103,"../util/type":115,"./Level":53,"./common":54}],52:[function(t,e){"use strict";function i(t,e,i,n){this.x=t,this.y=e,this.z=i,this._geometry=n,this._level=n.levelList[i]}function n(t){this.constructor.super_.call(this,t),this._width=t.width,this._height=t.height,this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight}function r(t){if("array"!==m(t))throw new Error("Level list must be an array");this.levelList=h(t,n),this.selectableLevelList=c(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new a(this),this._neighborsCache=new l(g),this._vec=y.create(),this._viewSize={}}var o=t("../util/inherits"),s=t("../util/hash"),a=t("../TileSearcher"),l=t("../collections/LruMap"),u=t("./Level"),h=t("./common").makeLevelList,c=t("./common").makeSelectableLevelList,p=t("../util/clamp"),d=t("../util/mod"),f=t("../util/cmp"),m=t("../util/type"),v=t("gl-matrix").vec2,y=t("gl-matrix").vec4,g=64,_=[[0,1],[1,0],[0,-1],[-1,0]];i.prototype.rotX=function(){return 0},i.prototype.rotY=function(){return 0},i.prototype.centerX=function(){var t=this._level.width(),e=this._level.tileWidth();return(this.x*e+.5*this.width())/t-.5},i.prototype.centerY=function(){var t=this._level.height(),e=this._level.tileHeight();return.5-(this.y*e+.5*this.height())/t},i.prototype.scaleX=function(){var t=this._level.width();return this.width()/t},i.prototype.scaleY=function(){var t=this._level.height();return this.height()/t},i.prototype.width=function(){var t=this._level.width(),e=this._level.tileWidth();return this.atRightEdge()?d(t,e)||e:e},i.prototype.height=function(){var t=this._level.height(),e=this._level.tileHeight();return this.atBottomEdge()?d(t,e)||e:e},i.prototype.levelWidth=function(){return this._level.width()},i.prototype.levelHeight=function(){return this._level.height()},i.prototype.atTopLevel=function(){return 0===this.z},i.prototype.atBottomLevel=function(){return this.z===this._geometry.levelList.length-1},i.prototype.atTopEdge=function(){return 0===this.y},i.prototype.atBottomEdge=function(){return this.y===this._level.numVerticalTiles()-1},i.prototype.atLeftEdge=function(){return 0===this.x},i.prototype.atRightEdge=function(){return this.x===this._level.numHorizontalTiles()-1},i.prototype.padTop=function(){return!1},i.prototype.padBottom=function(){return!this.atBottomEdge()},i.prototype.padLeft=function(){return!1},i.prototype.padRight=function(){return!this.atRightEdge()},i.prototype.vertices=function(t){t||(t=[v.create(),v.create(),v.create(),v.create()]);var e=this.centerX()-this.scaleX()/2,i=this.centerX()+this.scaleX()/2,n=this.centerY()-this.scaleY()/2,r=this.centerY()+this.scaleY()/2;return v.set(t[0],e,r),v.set(t[1],i,r),v.set(t[2],i,n),v.set(t[3],e,n),t},i.prototype.parent=function(){if(this.atTopLevel())return null;var t=this._geometry,e=this.z-1;return new i(Math.floor(this.x/2),Math.floor(this.y/2),e,t)},i.prototype.children=function(t){if(this.atBottomLevel())return null;var e=this._geometry,n=this.z+1;return t=t||[],t.push(new i(2*this.x,2*this.y,n,e)),t.push(new i(2*this.x,2*this.y+1,n,e)),t.push(new i(2*this.x+1,2*this.y,n,e)),t.push(new i(2*this.x+1,2*this.y+1,n,e)),t},i.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,n=e.get(this);if(n)return n;for(var r=this.x,o=this.y,s=this.z,a=this._level,l=a.numHorizontalTiles()-1,u=a.numVerticalTiles()-1,h=[],c=0;c<_.length;c++){var p=_[c][0],d=_[c][1],f=r+p,m=o+d,v=s;f>=0&&l>=f&&m>=0&&u>=m&&h.push(new i(f,m,v,t))}return e.set(this,h),h},i.prototype.hash=function(){return s(this.z,this.y,this.x)},i.prototype.equals=function(t){return this.geometry===t.geometry&&this.z===t.z&&this.y===t.y&&this.x===t.x},i.prototype.cmp=function(t){return f(this.z,t.z)||f(this.y,t.y)||f(this.x,t.x)},i.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"},o(n,u),n.prototype.width=function(){return this._width},n.prototype.height=function(){return this._height},n.prototype.tileWidth=function(){return this._tileWidth},n.prototype.tileHeight=function(){return this._tileHeight},n.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),n=this.tileWidth(),r=this.tileHeight(),o=t.width(),s=t.height(),a=t.tileWidth(),l=t.tileHeight();return e%o!=0?new Error("Level width must be multiple of parent level: "+e+" vs. "+o):i%s!=0?new Error("Level height must be multiple of parent level: "+i+" vs. "+s):n%a!=0?new Error("Level tile width must be multiple of parent level: "+n+" vs. "+a):r%l!=0?new Error("Level tile height must be multiple of parent level: "+r+" vs. "+l):void 0},r.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},r.prototype.levelTiles=function(t,e){var n=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,o=t.numVerticalTiles()-1;e||(e=[]);for(var s=0;r>=s;s++)for(var a=0;o>=a;a++)e.push(new i(s,a,n,this));return e},r.prototype._closestTile=function(t,e){var n=this._vec;y.set(n,0,0,1,1),y.transformMat4(n,n,t.inverseProjection());var r=.5+n[0],o=.5-n[1],s=this.levelList.indexOf(e),a=e.width(),l=e.height(),u=e.tileWidth(),h=e.tileHeight(),c=e.numHorizontalTiles(),d=e.numVerticalTiles();return new i(p(Math.floor(r*a/u),0,c-1),p(Math.floor(o*l/h),0,d-1),s,this)},r.prototype.visibleTiles=function(t,e,i){var n=this._viewSize,r=this._tileSearcher;if(i=i||[],t.size(n),0===n.width||0===n.height)return i;var o=this._closestTile(t,e);if(!r.search(t,o,i))throw new Error("Starting tile is not visible");return i},r.Tile=r.prototype.Tile=i,r.type=r.prototype.type="flat",i.type=i.prototype.type="flat",e.exports=r},{"../TileSearcher":21,"../collections/LruMap":28,"../util/clamp":89,"../util/cmp":91,"../util/hash":102,"../util/inherits":103,"../util/mod":105,"../util/type":115,"./Level":53,"./common":54,"gl-matrix":2}],53:[function(t,e){"use strict";function i(t){this._fallbackOnly=!!t.fallbackOnly}i.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())},i.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())},i.prototype.fallbackOnly=function(){return this._fallbackOnly},e.exports=i},{}],54:[function(t,e){"use strict";function i(t,e){for(var i=[],n=0;n<t.length;n++)i.push(new e(t[n]));return i.sort(function(t,e){return r(t.width(),e.width())}),i}function n(t){for(var e=[],i=0;i<t.length;i++)t[i]._fallbackOnly||e.push(t[i]);if(!e.length)throw new Error("No selectable levels in list");return e}var r=t("../util/cmp");e.exports={makeLevelList:i,makeSelectableLevelList:n}},{"../util/cmp":91}],55:[function(t,e){"use strict";e.exports={WebGlStage:t("./stages/WebGl"),CssStage:t("./stages/Css"),FlashStage:t("./stages/Flash"),WebGlCubeRenderer:t("./renderers/WebGlCube"),WebGlFlatRenderer:t("./renderers/WebGlFlat"),WebGlEquirectRenderer:t("./renderers/WebGlEquirect"),CssCubeRenderer:t("./renderers/CssCube"),CssFlatRenderer:t("./renderers/CssFlat"),FlashCubeRenderer:t("./renderers/FlashCube"),FlashFlatRenderer:t("./renderers/FlashFlat"),registerDefaultRenderers:t("./renderers/registerDefaultRenderers"),CubeGeometry:t("./geometries/Cube"),FlatGeometry:t("./geometries/Flat"),EquirectGeometry:t("./geometries/Equirect"),RectilinearView:t("./views/Rectilinear"),FlatView:t("./views/Flat"),ImageUrlSource:t("./sources/ImageUrl"),SingleAssetSource:t("./sources/SingleAsset"),StaticAsset:t("./assets/Static"),DynamicAsset:t("./assets/Dynamic"),TextureStore:t("./TextureStore"),Layer:t("./Layer"),RenderLoop:t("./RenderLoop"),KeyControlMethod:t("./controls/Key"),DragControlMethod:t("./controls/Drag"),QtvrControlMethod:t("./controls/Qtvr"),ScrollZoomControlMethod:t("./controls/ScrollZoom"),PinchZoomControlMethod:t("./controls/PinchZoom"),VelocityControlMethod:t("./controls/Velocity"),ElementPressControlMethod:t("./controls/ElementPress"),Controls:t("./controls/Controls"),Dynamics:t("./controls/Dynamics"),Viewer:t("./Viewer"),Scene:t("./Scene"),Hotspot:t("./Hotspot"),HotspotContainer:t("./HotspotContainer"),colorEffects:t("./colorEffects"),registerDefaultControls:t("./controls/registerDefaultControls"),autorotate:t("./autorotate"),util:{async:t("./util/async"),cancelize:t("./util/cancelize"),chain:t("./util/chain"),clamp:t("./util/clamp"),clearOwnProperties:t("./util/clearOwnProperties"),cmp:t("./util/cmp"),compose:t("./util/compose"),convertFov:t("./util/convertFov"),decimal:t("./util/decimal"),defaults:t("./util/defaults"),defer:t("./util/defer"),degToRad:t("./util/degToRad"),delay:t("./util/delay"),dom:t("./util/dom"),extend:t("./util/extend"),hash:t("./util/hash"),inherits:t("./util/inherits"),mod:t("./util/mod"),noop:t("./util/noop"),now:t("./util/now"),once:t("./util/once"),pixelRatio:t("./util/pixelRatio"),radToDeg:t("./util/radToDeg"),real:t("./util/real"),retry:t("./util/retry"),tween:t("./util/tween"),type:t("./util/type")},dependencies:{bowser:t("bowser"),glMatrix:t("gl-matrix"),eventEmitter:t("minimal-event-emitter"),hammerjs:t("hammerjs")}}},{"./Hotspot":14,"./HotspotContainer":15,"./Layer":16,"./RenderLoop":18,"./Scene":19,"./TextureStore":20,"./Viewer":23,"./assets/Dynamic":24,"./assets/Static":26,"./autorotate":27,"./colorEffects":34,"./controls/Controls":37,"./controls/Drag":38,"./controls/Dynamics":39,"./controls/ElementPress":40,"./controls/Key":42,"./controls/PinchZoom":43,"./controls/Qtvr":44,"./controls/ScrollZoom":45,"./controls/Velocity":46,"./controls/registerDefaultControls":48,"./geometries/Cube":50,"./geometries/Equirect":51,"./geometries/Flat":52,"./renderers/CssCube":59,"./renderers/CssFlat":60,"./renderers/FlashCube":62,"./renderers/FlashFlat":63,"./renderers/WebGlCube":66,"./renderers/WebGlEquirect":67,"./renderers/WebGlFlat":68,"./renderers/registerDefaultRenderers":69,"./sources/ImageUrl":74,"./sources/SingleAsset":75,"./stages/Css":76,"./stages/Flash":77,"./stages/WebGl":80,"./util/async":85,"./util/cancelize":87,"./util/chain":88,"./util/clamp":89,"./util/clearOwnProperties":90,"./util/cmp":91,"./util/compose":92,"./util/convertFov":93,"./util/decimal":94,"./util/defaults":95,"./util/defer":96,"./util/degToRad":97,"./util/delay":98,"./util/dom":99,"./util/extend":100,"./util/hash":102,"./util/inherits":103,"./util/mod":105,"./util/noop":106,"./util/now":107,"./util/once":108,"./util/pixelRatio":109,"./util/radToDeg":111,"./util/real":112,"./util/retry":113,"./util/tween":114,"./util/type":115,"./views/Flat":116,"./views/Rectilinear":117,bowser:1,"gl-matrix":2,hammerjs:12,"minimal-event-emitter":13}],56:[function(t,e){"use strict";function i(t){if("flash"!==t.type)throw new Error("Stage type incompatible with loader");this._stage=t}var n=t("../assets/Flash"),r=t("../NetworkError"),o=t("../util/once");i.prototype.loadImage=function(t,e,i){function s(e,o){o===f&&(l.removeFlashCallbackListener("imageLoaded",s),e?i(new r("Network error: "+t)):i(null,new n(u,f)))}function a(){u.cancelImage(f),l.removeFlashCallbackListener("imageLoaded",s),i.apply(null,arguments)}var l=this._stage,u=l.flashElement(),h=e&&e.x||0,c=e&&e.y||0,p=e&&e.width||1,d=e&&e.height||1,f=u.loadImage(t,p,d,h,c);return i=o(i),l.addFlashCallbackListener("imageLoaded",s),a},e.exports=i},{"../NetworkError":17,"../assets/Flash":25,"../util/once":108}],57:[function(t,e){"use strict";function i(t){if("webgl"!==t.type&&"css"!==t.type)throw new Error("Stage type incompatible with loader");this._stage=t}var n=t("../assets/Static"),r=t("../NetworkError"),o=t("../util/once");i.prototype.loadImage=function(t,e,i){function s(){a.onload=a.onerror=null,a.src="",i.apply(null,arguments)}var a=new Image;a.crossOrigin="anonymous";var l=e&&e.x||0,u=e&&e.y||0,h=e&&e.width||1,c=e&&e.height||1;return i=o(i),a.onload=function(){if(0===l&&0===u&&1===h&&1===c)i(null,new n(a));else{l*=a.naturalWidth,u*=a.naturalHeight,h*=a.naturalWidth,c*=a.naturalHeight;var t=document.createElement("canvas");t.width=h,t.height=c,t.getContext("2d").drawImage(a,l,u,h,c,0,0,h,c),i(null,new n(t))}},a.onerror=function(){i(new r("Network error: "+t))},a.src=t,s},e.exports=i},{"../NetworkError":17,"../assets/Static":26,"../util/once":108}],58:[function(t,e){"use strict";function i(t,e){return t.cmp(e)}function n(t,e){this._root=t,this._browserQuirks=e;var i=document.createElement("div");t.appendChild(i),i.style.position="absolute",s(i),a(i),this._browserQuirks.useNullTransform&&l(i),this.domElement=i,this._oldTileList=[],this._newTileList=[],this._textureMap=new r}var r=t("../collections/Map"),o=t("../util/decimal"),s=t("../util/dom").setOverflowHidden,a=t("../util/dom").setNoPointerEvents,l=t("../util/dom").setNullTransform,u=t("../util/dom").setTransform,h=t("../util/clearOwnProperties"),c="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.css;n.prototype.destroy=function(){this._root.removeChild(this.domElement),h(this)},n.prototype.startLayer=function(t,e){var i=this.domElement,n=this._root.clientWidth,r=this._root.clientHeight;i.style.left=o(n*e.left)+"px",i.style.top=o(r*e.top)+"px",i.style.width=o(n*e.width)+"px",i.style.height=o(r*e.height)+"px";var s=1,a=t.effects();a&&null!=a.opacity&&(s=a.opacity),i.style.opacity=s,this._newTileList.length=0,this._textureMap.clear()},n.prototype.renderTile=function(t,e){this._newTileList.push(t),this._textureMap.set(t,e)},n.prototype.endLayer=function(t){var e,n,r,o,s,a,l,h,p=this.domElement,d=this._oldTileList,f=this._newTileList,m=this._textureMap,v=t.view();if(p.children.length!==d.length)throw new Error("DOM not in sync with tile list");for(f.sort(i),e=0,r=d[e],l=p.firstChild,n=0;n<f.length;n++){for(o=f[n];e<d.length&&!(r.cmp(o)>=0);)h=l.nextSibling,p.removeChild(l),l=h,r=d[++e];if(s=m.get(o),!(a=s?s._canvas:null))throw new Error("Rendering tile with missing texture");if(r&&0===r.cmp(o)){if(a!=l)throw new Error("DOM not in sync with tile list");l=l.nextSibling,r=d[++e]}else p.insertBefore(a,l);u(a,this.calculateTransform(o,s,v)),c&&a.setAttribute("data-tile",o.str())}for(;l;)h=l.nextSibling,p.removeChild(l),l=h;if(p.children.length!==f.length)throw new Error("DOM not in sync with tile list");var y=this._oldTileList;this._oldTileList=this._newTileList,this._newTileList=y},e.exports=n},{"../collections/Map":30,"../util/clearOwnProperties":90,"../util/decimal":94,"../util/dom":99}],59:[function(t,e){"use strict";function i(t,e){this.constructor.super_.call(this,t,e,n)}var n=t("../geometries/Cube").Tile,r=t("./CssBase"),o=t("../util/decimal");t("../util/inherits")(i,r),i.prototype.calculateTransform=function(t,e,i){var n=this._browserQuirks.padSize,r=this._browserQuirks.reverseLevelDepth,s=this._browserQuirks.perspectiveNudge,a="",l=r?256-t.z:t.levelWidth(),u=i.size(),h=u.width,c=u.height;a+="translate3d("+o(h/2)+"px, "+o(c/2)+"px, 0px) ";var p=.5*c/Math.tan(i.fov()/2),d=p+s;a+="perspective("+o(p)+"px) translateZ("+o(d)+"px) ";var f=-i.roll(),m=-i.pitch(),v=i.yaw();a+="rotateZ("+o(f)+"rad) rotateX("+o(m)+"rad) rotateY("+o(v)+"rad) ";var y=-t.rotX(),g=t.rotY();a+="rotateX("+o(y)+"rad) rotateY("+o(g)+"rad) ";var _=t.centerX()-t.scaleX()/2,T=-(t.centerY()+t.scaleY()/2),S=_*l,b=T*l,M=-l/2;if(a+="translate3d("+o(S)+"px, "+o(b)+"px, "+o(M)+"px) ",r){var x=l*t.scaleX()/t.width(),w=l*t.scaleY()/t.height();a+="scale("+o(x)+", "+o(w)+") "}var E=t.padLeft()?n:0,P=t.padTop()?n:0;return 0===E&&0===P||(a+="translate3d("+o(-E)+"px, "+o(-P)+"px, 0) "),a},e.exports=i},{"../geometries/Cube":50,"../util/decimal":94,"../util/inherits":103,"./CssBase":58}],60:[function(t,e){"use strict";function i(t,e){this.constructor.super_.call(this,t,e,n)}var n=t("../geometries/Flat").Tile,r=t("./CssBase"),o=t("../util/decimal");t("../util/inherits")(i,r),i.prototype.calculateTransform=function(t,e,i){var n=this._browserQuirks.padSize,r="",s=i.width(),a=i.height();r+="translateX("+o(s/2)+"px) translateY("+o(a/2)+"px) ";var l=s/i._zoomX(),u=a/i._zoomY(),h=t.centerX()-t.scaleX()/2+.5,c=.5-t.centerY()-t.scaleY()/2,p=h*l,d=c*u;r+="translateX("+o(p)+"px) translateY("+o(d)+"px) ";var f=-i.x()*l,m=-i.y()*u;r+="translateX("+o(f)+"px) translateY("+o(m)+"px) ";var v=t.padLeft()?n:0,y=t.padTop()?n:0;0===v&&0===y||(r+="translateX("+o(-v)+"px) translateY("+o(-y)+"px) ");var g=l/t.levelWidth(),_=u/t.levelHeight();return r+="scale("+o(g)+", "+o(_)+") "},e.exports=i},{"../geometries/Flat":52,"../util/decimal":94,"../util/inherits":103,"./CssBase":58}],61:[function(t,e){"use strict";function i(t,e){return t.cmp(e)}function n(t,e,i){this._flashElement=t,this._layerId=e,this._quirks=i,this._tileList=[],this._textureMap=new r,this._layerCreated=!1}var r=t("../collections/Map"),o=t("../util/clearOwnProperties");n.prototype.destroy=function(){this._layerCreated&&this._flashElement.destroyLayer(this._layerId),o(this)},n.prototype.startLayer=function(){this._flashElement.isReady&&this._flashElement.isReady()&&(this._layerCreated||(this._flashElement.createLayer(this._layerId),this._layerCreated=!0),this._tileList.length=0,this._textureMap.clear())},n.prototype.renderTile=function(t,e){this._tileList.push(t),this._textureMap.set(t,e)},n.prototype.endLayer=function(t,e){this._flashElement.isReady&&this._flashElement.isReady()&&(this._tileList.sort(i),this._renderOnFlash(t,e))},e.exports=n},{"../collections/Map":30,"../util/clearOwnProperties":90}],62:[function(t,e){"use strict";function i(t,e,i){this.constructor.super_.call(this,t,e,i,r),this._flashTileList=[]}var n=t("./FlashBase"),r=t("../geometries/Cube").Tile,o=t("../util/inherits"),s=t("../util/radToDeg");o(i,n),i.prototype._renderOnFlash=function(t,e){var i=this._flashElement,n=this._layerId,r=this._quirks.padSize,o=this._tileList,a=this._textureMap,l=this._flashTileList;l.length=0;for(var u=0;u<o.length;u++){var h=o[u],c=a.get(h);if(!c)throw new Error("Rendering tile with missing texture");var p=h.padTop()?r:0,d=h.padBottom()?r:0,f=h.padLeft()?r:0,m=h.padRight()?r:0;l.push({textureId:c._textureId,face:h.face,width:h.width(),height:h.height(),centerX:h.centerX(),centerY:h.centerY(),rotX:s(h.rotX()),rotY:s(h.rotY()),levelSize:h.levelWidth(),padTop:p,padBottom:d,padLeft:f,padRight:m})}var v=this._flashElement.clientWidth,y=this._flashElement.clientHeight,g=v*e.x,_=y*e.y,T=v*e.width,S=y*e.height,b=1,M=t.effects();M&&null!=M.opacity&&(b=M.opacity);var x=t.view(),w=x.yaw(),E=x.pitch(),P=x.roll(),A=x.fov();i.drawCubeTiles(n,T,S,g,_,b,w,E,P,A,l)},e.exports=i},{"../geometries/Cube":50,"../util/inherits":103,"../util/radToDeg":111,"./FlashBase":61}],63:[function(t,e){"use strict";function i(t,e,i){this.constructor.super_.call(this,t,e,i,r),this._flashTileList=[]}var n=t("./FlashBase"),r=t("../geometries/Flat").Tile;t("../util/inherits")(i,n),i.prototype._renderOnFlash=function(t,e){var i=this._flashElement,n=this._layerId,r=this._quirks.padSize,o=this._tileList,s=this._textureMap,a=this._flashTileList;a.length=0;for(var l=0;l<o.length;l++){var u=o[l],h=s.get(u);if(!h)throw new Error("Rendering tile with missing texture");var c=u.padTop()?r:0,p=u.padBottom()?r:0,d=u.padLeft()?r:0,f=u.padRight()?r:0;a.push({textureId:h._textureId,width:u.width(),height:u.height(),centerX:u.centerX(),centerY:u.centerY(),scaleX:u.scaleX(),scaleY:u.scaleY(),levelWidth:u.levelWidth(),levelHeight:u.levelHeight(),padTop:c,padBottom:p,padLeft:d,padRight:f})}var m=this._flashElement.clientWidth,v=this._flashElement.clientHeight,y=m*e.x,g=v*e.y,_=m*e.width,T=v*e.height,S=1,b=t.effects();b&&null!=b.opacity&&(S=b.opacity);var M=t.view(),x=M.x(),w=M.y(),E=M._zoomX(),P=M._zoomY();i.drawFlatTiles(n,_,T,y,g,S,x,w,E,P,a)},e.exports=i},{"../geometries/Flat":52,"../util/inherits":103,"./FlashBase":61}],64:[function(t,e){"use strict";function i(t){this.gl=t,this.projMatrix=n.create(),this.viewportMatrix=n.create(),this.translateVector=r.create(),this.scaleVector=r.create(),this.constantBuffers=a(t,_,T,S),this.shaderProgram=u(t,y,g,b,M)}var n=t("gl-matrix").mat4,r=t("gl-matrix").vec3,o=t("../util/clearOwnProperties"),s=t("./WebGlCommon"),a=s.createConstantBuffers,l=s.destroyConstantBuffers,u=s.createShaderProgram,h=s.destroyShaderProgram,c=s.enableAttributes,p=s.disableAttributes,d=s.setViewport,f=s.setupPixelEffectUniforms,m=s.setDepth,v=s.setTexture,y=t("../shaders/vertexNormal"),g=t("../shaders/fragmentNormal"),_=[0,1,2,0,2,3],T=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],S=[0,0,1,0,1,1,0,1],b=["aVertexPosition","aTextureCoord"],M=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];i.prototype.destroy=function(){l(this.gl,this.constantBuffers),h(this.gl,this.shaderProgram),o(this)},i.prototype.startLayer=function(t,e){var i=this.gl,n=this.shaderProgram,r=this.constantBuffers,o=this.viewportMatrix;i.useProgram(n),c(i,n),d(i,t,e,o),i.uniformMatrix4fv(n.uViewportMatrix,!1,o),i.bindBuffer(i.ARRAY_BUFFER,r.vertexPositions),i.vertexAttribPointer(n.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,r.textureCoords),i.vertexAttribPointer(n.aTextureCoord,2,i.FLOAT,i.FALSE,0,0),f(i,t.effects(),{opacity:n.uOpacity,colorOffset:n.uColorOffset,colorMatrix:n.uColorMatrix})},i.prototype.endLayer=function(){var t=this.gl,e=this.shaderProgram;p(t,e)},i.prototype.renderTile=function(t,e,i,r){var o=this.gl,s=this.shaderProgram,a=this.constantBuffers,l=this.projMatrix,u=this.translateVector,h=this.scaleVector;u[0]=t.centerX(),u[1]=t.centerY(),u[2]=-.5,h[0]=t.scaleX(),h[1]=t.scaleY(),h[2]=1,n.copy(l,i.view().projection()),n.rotateX(l,l,t.rotX()),n.rotateY(l,l,t.rotY()),n.translate(l,l,u),n.scale(l,l,h),o.uniformMatrix4fv(s.uProjMatrix,!1,l),m(o,s,r,t.z),v(o,s,e),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a.vertexIndices),o.drawElements(o.TRIANGLES,_.length,o.UNSIGNED_SHORT,0)},e.exports=i},{"../shaders/fragmentNormal":71,"../shaders/vertexNormal":73,"../util/clearOwnProperties":90,"./WebGlCommon":65,"gl-matrix":2}],65:[function(t,e){"use strict";function i(t,e,i){var n=t.createShader(e);if(t.shaderSource(n,i),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw t.getShaderInfoLog(n);return n}function n(t,e,n,r,o){var s=i(t,t.VERTEX_SHADER,e),a=i(t,t.FRAGMENT_SHADER,n),l=t.createProgram();if(t.attachShader(l,s),t.attachShader(l,a),t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))throw t.getProgramInfoLog(l);for(var u=0;u<r.length;u++){var h=r[u];if(l[h]=t.getAttribLocation(l,h),-1===l[h])throw new Error("Shader program has no "+h+" attribute")}for(var c=0;c<o.length;c++){var p=o[c];if(l[p]=t.getUniformLocation(l,p),-1===l[p])throw new Error("Shader program has no "+p+" uniform")}return l}function r(t,e){for(var i=t.getAttachedShaders(e),n=0;n<i.length;n++){var r=i[n];t.detachShader(e,r),t.deleteShader(r)}t.deleteProgram(e)}function o(t,e,i,n){var r=t.createBuffer();return t.bindBuffer(e,r),t.bufferData(e,n,i),r}function s(t,e,i,n){return{vertexIndices:o(t,t.ELEMENT_ARRAY_BUFFER,t.STATIC_DRAW,new Uint16Array(e)),vertexPositions:o(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(i)),textureCoords:o(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(n))}}function a(t,e){t.deleteBuffer(e.vertexIndices),t.deleteBuffer(e.vertexPositions),t.deleteBuffer(e.textureCoords)}function l(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;i>n;n++)t.enableVertexAttribArray(n)}function u(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;i>n;n++)t.disableVertexAttribArray(n)}function h(t,e,i){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i._texture),t.uniform1i(e.uSampler,0)}function c(t,e,i,n){var r=((i+1)*m-n)/(m*f);t.uniform1f(e.uDepth,r)}function p(t,e,i){var n=T;e&&null!=e.opacity&&(n=e.opacity),t.uniform1f(i.opacity,n);var r=S;e&&e.colorOffset&&(r=e.colorOffset),t.uniform4fv(i.colorOffset,r);var o=b;e&&e.colorMatrix&&(o=e.colorMatrix),t.uniformMatrix4fv(i.colorMatrix,!1,o)}function d(t,e,i,n){if(0===i.x&&1===i.width&&0===i.y&&1===i.height)return t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),void _.identity(n);var r=i.x,o=v(r,0,1),s=o-r,a=1-o,l=v(i.width-s,0,a),u=i.width-l,h=1-i.height-i.y,c=v(h,0,1),p=c-h,d=1-c,f=v(i.height-p,0,d),m=i.height-f;g.set(x,i.width/l,i.height/f,1),g.set(M,(u-s)/l,(m-p)/f,0),_.identity(n),_.translate(n,n,M),_.scale(n,n,x),t.viewport(t.drawingBufferWidth*o,t.drawingBufferHeight*c,t.drawingBufferWidth*l,t.drawingBufferHeight*f)}var f=256,m=256,v=t("../util/clamp"),y=t("gl-matrix").vec4,g=t("gl-matrix").vec3,_=t("gl-matrix").mat4,T=1,S=y.create(),b=_.create();_.identity(b);var M=g.create(),x=g.create();e.exports={createShaderProgram:n,destroyShaderProgram:r,createConstantBuffers:s,destroyConstantBuffers:a,enableAttributes:l,disableAttributes:u,setTexture:h,setDepth:c,setViewport:d,setupPixelEffectUniforms:p}},{"../util/clamp":89,"gl-matrix":2}],66:[function(t,e){"use strict";function i(){this.constructor.super_.apply(this,arguments)}var n=t("./WebGlBase");t("../util/inherits")(i,n),e.exports=i},{"../util/inherits":103,"./WebGlBase":64}],67:[function(t,e){"use strict";function i(t){this.gl=t,this.invProjMatrix=n.create(),this.viewportMatrix=n.create(),this.constantBuffers=s(t,g,_,T),this.shaderProgram=l(t,v,y,S,b)}var n=t("gl-matrix").mat4,r=t("../util/clearOwnProperties"),o=t("./WebGlCommon"),s=o.createConstantBuffers,a=o.destroyConstantBuffers,l=o.createShaderProgram,u=o.destroyShaderProgram,h=o.enableAttributes,c=o.disableAttributes,p=o.setViewport,d=o.setupPixelEffectUniforms,f=o.setDepth,m=o.setTexture,v=t("../shaders/vertexEquirect"),y=t("../shaders/fragmentEquirect"),g=[0,1,2,0,2,3],_=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],T=[0,0,1,0,1,1,0,1],S=["aVertexPosition"],b=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];i.prototype.destroy=function(){a(this.gl,this.constantBuffers),u(this.gl,this.shaderProgram),r(this)},i.prototype.startLayer=function(t,e){var i=this.gl,r=this.shaderProgram,o=this.constantBuffers,s=this.invProjMatrix,a=this.viewportMatrix;i.useProgram(r),h(i,r),p(i,t,e,a),i.uniformMatrix4fv(r.uViewportMatrix,!1,a),i.bindBuffer(i.ARRAY_BUFFER,o.vertexPositions),i.vertexAttribPointer(r.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,o.textureCoords),n.copy(s,t.view().projection()),n.invert(s,s),i.uniformMatrix4fv(r.uInvProjMatrix,!1,s);var l=t.effects().textureCrop||{},u=null!=l.x?l.x:0,c=null!=l.y?l.y:0,f=null!=l.width?l.width:1,m=null!=l.height?l.height:1;i.uniform1f(r.uTextureX,u),i.uniform1f(r.uTextureY,c),i.uniform1f(r.uTextureWidth,f),i.uniform1f(r.uTextureHeight,m),d(i,t.effects(),{opacity:r.uOpacity,colorOffset:r.uColorOffset,colorMatrix:r.uColorMatrix})},i.prototype.endLayer=function(){var t=this.gl,e=this.shaderProgram;c(t,e)},i.prototype.renderTile=function(t,e,i,n){var r=this.gl,o=this.shaderProgram,s=this.constantBuffers;f(r,o,n,t.z),m(r,o,e),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,s.vertexIndices),r.drawElements(r.TRIANGLES,g.length,r.UNSIGNED_SHORT,0)},e.exports=i},{"../shaders/fragmentEquirect":70,"../shaders/vertexEquirect":72,"../util/clearOwnProperties":90,"./WebGlCommon":65,"gl-matrix":2}],68:[function(t,e){"use strict";function i(){this.constructor.super_.apply(this,arguments)}var n=t("./WebGlBase");t("../util/inherits")(i,n),e.exports=i},{"../util/inherits":103,"./WebGlBase":64}],69:[function(t,e){"use strict";function i(t){switch(t.type){case"webgl":t.registerRenderer("flat","flat",r),t.registerRenderer("cube","rectilinear",n),t.registerRenderer("equirect","rectilinear",o);break;case"css":t.registerRenderer("flat","flat",a),t.registerRenderer("cube","rectilinear",s);break;case"flash":t.registerRenderer("flat","flat",u),t.registerRenderer("cube","rectilinear",l);break;default:throw new Error("Unknown stage type: "+t.type)}}var n=t("./WebGlCube"),r=t("./WebGlFlat"),o=t("./WebGlEquirect"),s=t("./CssCube"),a=t("./CssFlat"),l=t("./FlashCube"),u=t("./FlashFlat");e.exports=i},{"./CssCube":59,"./CssFlat":60,"./FlashCube":62,"./FlashFlat":63,"./WebGlCube":66,"./WebGlEquirect":67,"./WebGlFlat":68}],70:[function(t,e){"use strict";e.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},{}],71:[function(t,e){"use strict";e.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},{}],72:[function(t,e){"use strict";e.exports=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join("\n")},{}],73:[function(t,e){"use strict";e.exports=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join("\n")},{}],74:[function(t,e){"use strict";function i(t,e){e=e||{},this._loadPool=new s({concurrency:e.concurrency||h}),this._retryDelay=e.retryDelay||c,this._retryMap={},this._sourceFromTile=t}function n(t){var e="\\{("+t+")\\}";return new RegExp(e,"g")}var r=t("minimal-event-emitter"),o=t("../NetworkError"),s=t("../collections/WorkPool"),a=t("../util/chain"),l=t("../util/delay"),u=(t("../util/now"),{x:"x",y:"y",z:"z",f:"face"}),h=4,c=1e4;r(i),i.prototype.loadAsset=function(t,e,i){var n,r=this,s=this._retryDelay,u=this._retryMap,h=this._sourceFromTile(e),c=h.url,p=h.rect,d=t.loadImage.bind(t,c,p),f=function(t){return r._loadPool.push(d,function(i,n){i?(i instanceof o&&(u[c]=v(),r.emit("networkError",n,i)),t(i,e)):(delete u[c],t(null,e,n))})},m=u[c];if(null!=m){var v=v(),y=v-m;s>y?n=s-y:(n=0,delete u[c])}var g=l.bind(null,n);return a(g,f)(i)},i.fromString=function(t,e){function r(e){var i=t;for(var r in u){var o=u[r],s=n(r),a=e.hasOwnProperty(o)?e[o]:"";i=i.replace(s,a)}return{url:i}}function o(t){return 0===t.z?s(t):r(t)}function s(t){var i=a.indexOf(t.face)/6;return{url:e.cubeMapPreviewUrl,rect:{x:0,y:i,width:1,height:1/6}}}e=e||{};var a=e&&e.cubeMapPreviewFaceOrder||"bdflru";return new i(e.cubeMapPreviewUrl?o:r,e)},e.exports=i},{"../NetworkError":17,"../collections/WorkPool":32,"../util/chain":88,"../util/delay":98,"../util/now":107,"minimal-event-emitter":13}],75:[function(t,e){"use strict";function i(t){this._asset=t}i.prototype.asset=function(){return this._asset},i.prototype.loadAsset=function(t,e,i){function n(){clearTimeout(o),i.apply(null,arguments)}var r=this,o=setTimeout(function(){i(null,e,r._asset)},0);return n},e.exports=i},{}],76:[function(t,e){"use strict";function i(t){this.constructor.super_.call(this,t),this._loader=new o(this),this._domElement=document.createElement("div"),u(this._domElement),h(this._domElement)}function n(t,e,i){var n=document.createElement("canvas");u(n),c(n),this._canvas=n,this._timestamp=null,this.refresh(e,i)}var r=t("./Stage"),o=t("../loaders/HtmlImage"),s=t("../support/Css"),a=t("bowser"),l=t("../util/inherits"),u=t("../util/dom").setAbsolute,h=t("../util/dom").setFullSize,c=t("../util/dom").setNullTransformOrigin,p=t("../util/clearOwnProperties"),d={padSize:a.ios?0:3,reverseLevelDepth:a.ios,useNullTransform:a.ios,perspectiveNudge:a.webkit||a.gecko?.001:0};l(i,r),i.prototype.destroy=function(){this.constructor.super_.prototype.destroy.call(this)},i.supported=function(){return s()},i.prototype.domElement=function(){return this._domElement},i.prototype.setSizeForType=function(){},i.prototype.loadImage=function(t,e,i){return this._loader.loadImage(t,e,i)},i.prototype.validateLayer=function(){},i.prototype.createRenderer=function(t){return new t(this._domElement,d)},i.prototype.destroyRenderer=function(t){t.destroy()},i.prototype.startFrame=function(){},i.prototype.endFrame=function(){},i.prototype.takeSnapshot=function(){throw new Error("CssStage: takeSnapshot not implemented")},i.type=i.prototype.type="css",n.prototype.refresh=function(t,e){var i=e.timestamp();if(i!==this._timestamp){this._timestamp=i;var n=this._canvas,r=n.getContext("2d"),o=e.element(),s=t.width(),a=t.height(),l=d.padSize,u=t.padTop()?l:0,h=t.padBottom()?l:0,c=t.padLeft()?l:0,p=t.padRight()?l:0;n.width=c+s+p,n.height=u+a+h,r.drawImage(o,c,u,s,a);var f;for(f=0;u>f;f++)r.drawImage(n,c,u,s,1,c,f,s,1);for(f=0;c>f;f++)r.drawImage(n,c,u,1,a,f,u,1,a);for(f=0;h>f;f++)r.drawImage(n,c,u+a-1,s,1,c,u+a+f,s,1);for(f=0;p>f;f++)r.drawImage(n,c+s-1,u,1,a,c+s+f,u,1,a)}},n.prototype.destroy=function(){p(this)},i.TextureClass=i.prototype.TextureClass=n,e.exports=i},{"../loaders/HtmlImage":57,"../support/Css":81,"../util/clearOwnProperties":90,"../util/dom":99,"../util/inherits":103,"./Stage":79,bowser:1}],77:[function(t,e){"use strict";function i(){return window[g].__next++}function n(t){if(this.constructor.super_.call(this,t),this._wmode=t&&t.wmode||v,this._swfPath=t&&t.swfPath||y,!y)throw new Error("Missing SWF path");this._flashStageId=i(),this._callbacksObj=window[g][this._flashStageId]={},this._stageCallbacksObjVarName=g+"["+this._flashStageId+"]",this._callbackListeners={};for(var e=0;e<_.length;e++)this._callbacksObj[_[e]]=this._callListeners(_[e]);this._loader=new a(this),this._loadImageQueue=new u,this._loadImageQueue.pause(),this._flashReady=!1,this._nextLayerId=0;var n=r(this._swfPath,this._flashStageId,this._stageCallbacksObjVarName);this._domElement=n.root,this._blockingElement=n.blocking,this._flashElement=n.flash,this._checkReadyTimer=setInterval(this._checkReady.bind(this),50)}function r(t,e,i){var n=document.createElement("div");p(n),d(n);var r="marzipano-flash-stage-"+e,o='<object id="'+r+'" name="'+r+'" type="application/x-shockwave-flash" data="'+t+'">',s="";s+='<param name="movie" value="'+t+'" />',s+='<param name="allowscriptaccess" value="always" />',s+='<param name="flashvars" value="callbacksObjName='+i+'" />',s+='<param name="wmode" value="transparent" />',o+=s,o+="</object>";var a=document.createElement("div");a.innerHTML=o;var l=a.firstChild;p(l),d(l),n.appendChild(l);var u=document.createElement("div");return p(u),d(u),f(u),n.appendChild(u),{root:n,flash:l,blocking:u}}function o(t,e,i){var n=i.element(),r=e.width(),o=e.height(),s=T.padSize,a=e.padTop()?s:0,l=e.padBottom()?s:0,u=e.padLeft()?s:0,h=e.padRight()?s:0,c=t._flashElement.createTexture(n,r,o,a,l,u,h);this._stage=t,this._textureId=c}var s=t("./Stage"),a=t("../loaders/FlashImage"),l=t("../support/Flash"),u=t("../collections/WorkQueue"),h=t("../util/inherits"),c=t("../util/defer"),p=t("../util/dom").setAbsolute,d=t("../util/dom").setFullSize,f=t("../util/dom").setBlocking,m=t("../util/clearOwnProperties"),v="transparent",y=function(){var t=document.currentScript;if(!t){var e=document.getElementsByTagName("script");t=e.length?e[e.length-1]:null}if(!t)return null;var i=t.src,n=i.lastIndexOf("/");return(i=n>=0?i.slice(0,n+1):"")+"marzipano.swf"}(),g="MarzipanoFlashCallbackMap";g in window||(window[g]={__next:0});var _=["imageLoaded"],T={padSize:3};h(n,s),n.prototype.destroy=function(){window[g][this._flashStageId]=null,null!=this._checkReadyTimer&&clearInterval(this._checkReadyTimer),this.constructor.super_.prototype.destroy.call(this)},n.supported=function(){return l()},n.prototype.domElement=function(){return this._domElement},n.prototype.flashElement=function(){return this._flashElement},n.prototype.setSizeForType=function(){},n.prototype.loadImage=function(t,e,i){var n=this._loader.loadImage.bind(this._loader,t,e);return this._loadImageQueue.push(n,i)},n.prototype.validateLayer=function(){},n.prototype.addFlashCallbackListener=function(t,e){this._callbackListeners[t]=this._callbackListeners[t]||[],this._callbackListeners[t].push(e)},n.prototype.removeFlashCallbackListener=function(t,e){var i=this._callbackListeners[t]||[],n=i.indexOf(e);n>=0&&i.splice(n,1)},n.prototype._callListeners=function(t){var e=this;return function(){for(var i=e._callbackListeners[t]||[],n=0;n<i.length;n++)c(i[n],arguments)}},n.prototype._checkReady=function(){return!!(this._flashElement&&this._flashElement.isReady&&this._flashElement.isReady())&&(this._flashReady=!0,clearTimeout(this._checkReadyTimer),this._checkReadyTimer=null,this._loadImageQueue.resume(),this.emit("renderInvalid"),!0)},n.prototype.createRenderer=function(t){return new t(this._flashElement,++this._nextLayerId,T)},n.prototype.destroyRenderer=function(t){t.destroy()},n.prototype.startFrame=function(){},n.prototype.endFrame=function(){},n.prototype.takeSnapshot=function(t){"object"==typeof t&&null!=t||(t={});var e=t.quality;if(void 0===e&&(e=75),"number"!=typeof e||0>e||e>100)throw new Error("FlashStage: Snapshot quality needs to be a number between 0 and 100");return this._flashElement.takeSnapshot(e)},n.type=n.prototype.type="flash",o.prototype.refresh=function(){},o.prototype.destroy=function(){this._stage._flashElement.destroyTexture(this._textureId),m(this)},n.TextureClass=n.prototype.TextureClass=o,e.exports=n},{"../collections/WorkQueue":33,"../loaders/FlashImage":56,"../support/Flash":82,"../util/clearOwnProperties":90,"../util/defer":96,"../util/dom":99,"../util/inherits":103,"./Stage":79}],78:[function(t,e){"use strict";function i(){this._renderers={}}i.prototype.set=function(t,e,i){this._renderers[t]||(this._renderers[t]={}),this._renderers[t][e]=i},i.prototype.get=function(t,e){return this._renderers[t]&&this._renderers[t][e]||null},e.exports=i},{}],79:[function(t,e){"use strict";function i(t,e){return t.cmp(e)}function n(t,e){return-t.cmp(e)}function r(t){this._progressive=!(!t||!t.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new s,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new c}var o=t("minimal-event-emitter"),s=t("../collections/WorkQueue"),a=t("../util/calcRect"),l=t("../util/async"),u=t("../util/cancelize"),h=t("../util/clearOwnProperties"),c=t("./RendererRegistry");o(r),r.prototype.destroy=function(){this.removeAllLayers(),h(this)},r.prototype.registerRenderer=function(t,e,i){return this._rendererRegistry.set(t,e,i)},r.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")},r.prototype.width=function(){return this._width},r.prototype.height=function(){return this._height},r.prototype.size=function(t){return t=t||{},t.width=this._width,t.height=this._height,t},r.prototype.setSize=function(t){this._width=t.width,this._height=t.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()},r.prototype.setSizeForType=function(){throw new Error("Stage implementation must override setSizeForType")},r.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")},r.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")},r.prototype.validateLayer=function(){throw new Error("Stage implementation must override validateLayer")},r.prototype.listLayers=function(){return[].concat(this._layers)},r.prototype.hasLayer=function(t){return this._layers.indexOf(t)>=0},r.prototype.addLayer=function(t,e){if(this._layers.indexOf(t)>=0)throw new Error("Layer already in stage");if(null==e&&(e=this._layers.length),0>e||e>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(t);var i=t.geometry().type,n=t.view().type,r=this._rendererRegistry.get(i,n);if(!r)throw new Error("No "+this.type+" renderer avaiable for "+i+" geometry and "+n+" view");var o=this.createRenderer(r);this._layers.splice(e,0,t),this._renderers.splice(e,0,o),t.addEventListener("viewChange",this._emitRenderInvalid),t.addEventListener("effectsChange",this._emitRenderInvalid),t.addEventListener("fixedLevelChange",this._emitRenderInvalid),t.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},r.prototype.moveLayer=function(t,e){var i=this._layers.indexOf(t);if(0>i)throw new Error("No such layer in stage");if(0>e||e>=this._layers.length)throw new Error("Invalid layer position");t=this._layers.splice(i,1)[0];var n=this._renderers.splice(i,1)[0];this._layers.splice(e,0,t),this._renderers.splice(e,0,n),this._emitRenderInvalid()},r.prototype.removeLayer=function(t){var e=this._layers.indexOf(t);if(0>e)throw new Error("No such layer in stage");var i=this._layers.splice(e,1)[0],n=this._renderers.splice(e,1)[0];this.destroyRenderer(n),i.removeEventListener("viewChange",this._emitRenderInvalid),i.removeEventListener("effectsChange",this._emitRenderInvalid),i.removeEventListener("fixedLevelChange",this._emitRenderInvalid),i.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},r.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])},r.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")},r.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")},r.prototype.render=function(){var t,e,i,n=this._tilesToLoad,r=this._tilesToRender,o=!0,s=this._width,l=this._height,u=this._tmpRect,h=this._tmpSize;if(!(0>=s||0>=l)){for(this.startFrame(),t=0;t<this._layers.length;t++)this._layers[t].textureStore().startFrame();for(t=0;t<this._layers.length;t++){var c,p,d=this._layers[t],f=d.effects(),m=d.view(),v=d.textureStore(),y=this._renderers[t],g=this._layers.length-t;if(a(s,l,f&&f.rect,u),!(u.width<=0||u.height<=0)){for(h.width=u.width*this._width,h.height=u.height*this._height,m.setSize(h),y.startLayer(d,u),i=this._collectTiles(d,v),e=0;e<n.length;e++)c=n[e],v.markTile(c);for(e=0;e<r.length;e++)c=r[e],p=v.texture(c),y.renderTile(c,p,d,g);d.emit("renderComplete",i),i||(o=!1),y.endLayer(d,u)}}for(t=0;t<this._layers.length;t++)this._layers[t].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",o)}},r.prototype._collectTiles=function(t,e){var r=this._tilesToLoad,o=this._tilesToRender,s=this._tmpVisible;r.length=0,o.length=0,s.length=0,t.visibleTiles(s);for(var a=!0,l=0;l<s.length;l++){var u,h=s[l];this._collectTileToLoad(h),e.texture(h)?(u=!1,this._collectTileToRender(h)):(u=this._collectChildren(h,e),a=!1),this._collectParents(h,e,u)}return r.sort(i),o.sort(n),a},r.prototype._collectChildren=function(t,e){var i=this._tmpChildren,n=!0;do{if(i.length=0,!t.children(i))break;n=!1;for(var r=0;r<i.length;r++)t=i[r],e.texture(t)?(this._collectTileToLoad(t),this._collectTileToRender(t)):n=!0}while(n&&1===i.length);return n},r.prototype._collectParents=function(t,e,i){for(var n=this._progressive;(n||i)&&null!=(t=t.parent());){if(i)if(e.texture(t))this._collectTileToRender(t),i=!1;else if(!this._progressive)continue;this._collectTileToLoad(t)||(n=!1)}return i},r.prototype._collectTileToLoad=function(t){return this._collectTileIntoList(t,this._tilesToLoad)},r.prototype._collectTileToRender=function(t){return this._collectTileIntoList(t,this._tilesToRender)},r.prototype._collectTileIntoList=function(t,e){for(var i=!1,n=0;n<e.length;n++)if(t.equals(e[n])){i=!0;break}return i||e.push(t),!i},r.prototype.createTexture=function(t,e,i){function n(){return new r.TextureClass(r,t,e)}var r=this,o=u(l(n));return this._createTextureWorkQueue.push(o,function(n,r){i(n,t,e,r)})},e.exports=r},{"../collections/WorkQueue":33,"../util/async":85,"../util/calcRect":86,"../util/cancelize":87,"../util/clearOwnProperties":90,"./RendererRegistry":78,"minimal-event-emitter":13}],80:[function(t,e){"use strict";function i(t,e){var i={alpha:!0,premultipliedAlpha:!0,antialias:!(!e||!e.antialias),preserveDrawingBuffer:!(!e||!e.preserveDrawingBuffer)};m&&"undefined"!=typeof WebGLDebugUtils&&(console.log("Using WebGL lost context simulator"),t=WebGLDebugUtils.makeLostContextSimulatingCanvas(t));var n=t.getContext&&(t.getContext("webgl",i)||t.getContext("experimental-webgl",i));if(!n)throw new Error("Could not get WebGL context");return m&&"undefined"!=typeof WebGLDebugUtils&&(n=WebGLDebugUtils.makeDebugContext(n),console.log("Using WebGL debug context")),n}function n(t){t=t||{};var e=this;this.constructor.super_.call(this,t),this._generateMipmaps=null!=t.generateMipmaps&&t.generateMipmaps,this._loader=new s(this),this._domElement=document.createElement("canvas"),p(this._domElement),d(this._domElement),this._gl=i(this._domElement,t),this._handleContextLoss=function(){e.emit("webglcontextlost"),e._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}function r(t,e,i){this._stage=t,this._gl=t._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(e,i)}var o=t("./Stage"),s=t("../loaders/HtmlImage"),a=t("../support/WebGl"),l=t("bowser"),u=t("../util/inherits"),h=t("../util/pixelRatio"),c=t("../util/ispot"),p=t("../util/dom").setAbsolute,d=t("../util/dom").setFullSize,f=t("../util/clearOwnProperties"),m="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.webGl,v={videoUseTexImage2D:l.chrome};u(n,o),n.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)},n.supported=function(){return a()},n.prototype.domElement=function(){return this._domElement},n.prototype.webGlContext=function(){return this._gl},n.prototype.setSizeForType=function(){var t=h();this._domElement.width=t*this._width,this._domElement.height=t*this._height},n.prototype.loadImage=function(t,e,i){return this._loader.loadImage(t,e,i)},n.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)},n.prototype.validateLayer=function(t){var e=t.geometry().maxTileSize(),i=this.maxTextureSize();if(e>i)throw new Error("Layer has level with tile size larger than maximum texture size ("+e+" vs. "+i+")")},n.prototype.createRenderer=function(t){for(var e=this._rendererInstances,i=0;i<e.length;i++)if(e[i]instanceof t)return e[i];var n=new t(this._gl);return e.push(n),n},n.prototype.destroyRenderer=function(t){var e=this._rendererInstances;if(this._renderers.indexOf(t)<0){t.destroy();var i=e.indexOf(t);i>=0&&e.splice(i,1)}},n.prototype.startFrame=function(){var t=this._gl;if(!t)throw new Error("Bad WebGL context - maybe context was lost?");t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)},n.prototype.endFrame=function(){},n.prototype.takeSnapshot=function(t){"object"==typeof t&&null!=t||(t={});var e=t.quality;if(void 0===e&&(e=75),"number"!=typeof e||0>e||e>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",e/100)},n.type=n.prototype.type="webgl",r.prototype.refresh=function(t,e){var i,n=this._gl,r=this._stage,o=e.timestamp();if(o!==this._timestamp){var s=e.element(),a=e.width(),l=e.height();if(a!==this._width||l!==this._height){var u=r.maxTextureSize();if(a>u)throw new Error("Texture width larger than max size ("+a+" vs. "+u+")");if(l>u)throw new Error("Texture height larger than max size ("+l+" vs. "+u+")");this._texture&&n.deleteTexture(i),i=this._texture=n.createTexture(),n.bindTexture(n.TEXTURE_2D,i),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,s)}else i=this._texture,n.bindTexture(n.TEXTURE_2D,i),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),s instanceof HTMLVideoElement&&v.videoUseTexImage2D?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,s):n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,s);r._generateMipmaps&&c(a)&&c(l)?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR),n.generateMipmap(n.TEXTURE_2D)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR)),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null),this._timestamp=o,this._width=a,this._height=l}},r.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),f(this)},n.TextureClass=n.prototype.TextureClass=r,e.exports=n},{"../loaders/HtmlImage":57,"../support/WebGl":83,"../util/clearOwnProperties":90,"../util/dom":99,"../util/inherits":103,"../util/ispot":104,"../util/pixelRatio":109,"./Stage":79,bowser:1}],81:[function(t,e){"use strict";function i(){var t=o("perspective"),e=document.createElement("div"),i="undefined"!=typeof e.style[t];if(i&&"WebkitPerspective"===t){var n="__marzipano_test_css3d_support__",r=document.createElement("style");r.textContent="@media(-webkit-transform-3d){#"+n+"{height: 3px;})",document.getElementsByTagName("head")[0].appendChild(r),e.id=n,document.body.appendChild(e),i=e.offsetHeight>0,r.parentNode.removeChild(r),e.parentNode.removeChild(e)}return i}function n(){return void 0!==r?r:r=i()}var r,o=t("../util/dom").prefixProperty;e.exports=n},{"../util/dom":99}],82:[function(t,e){"use strict";function i(){var t=null,e=navigator.plugins,i=navigator.mimeTypes,n=null;if(e&&e["Shockwave Flash"]&&i&&i["application/x-shockwave-flash"]&&i["application/x-shockwave-flash"].enabledPlugin)n=e["Shockwave Flash"].description,n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),t=[0,0,0],t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10),t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10),t[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;else if(window.ActiveXObject)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");r&&(n=r.GetVariable("$version"))&&(n=n.split(" ")[1].split(","),t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}catch(o){}return t}function n(){var t=i();return t&&(t[0]>=11||10===t[0]&&t[1]>=1)}function r(){return void 0!==o?o:o=n()}var o;e.exports=r},{}],83:[function(t,e){"use strict";function i(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}function n(){return void 0!==r?r:r=i()}var r;e.exports=n},{}],84:[function(t,e){"use strict";function i(){var t=document.createElement("a").style;t.cssText="pointer-events:auto";var e="auto"===t.pointerEvents,i=o.msie&&parseFloat(o.version)<11;return e&&!i}function n(){return void 0!==r?r:r=i()}var r,o=t("bowser");e.exports=n},{bowser:1}],85:[function(t,e){"use strict";function i(t){return function(e){var i,n;try{n=t()}catch(r){i=r}finally{i?e(i):e(null,n)}}}e.exports=i},{}],86:[function(t,e){"use strict";function i(t,e,i,n){n=n||{};var r;r=null!=i&&null!=i.absoluteWidth?i.absoluteWidth/t:null!=i&&null!=i.relativeWidth?i.relativeWidth:1;var o;o=i&&null!=i.absoluteHeight?i.absoluteHeight/e:null!=i&&null!=i.relativeHeight?i.relativeHeight:1;var s;s=null!=i&&null!=i.absoluteX?i.absoluteX/t:null!=i&&null!=i.relativeX?i.relativeX:0;var a;return a=null!=i&&null!=i.absoluteY?i.absoluteY/e:null!=i&&null!=i.relativeY?i.relativeY:0,n.x=s,n.y=a,n.width=r,n.height=o,n}e.exports=i},{}],87:[function(t,e){"use strict";function i(t){return function(){function e(){r.apply(null,arguments)}if(!arguments.length)throw new Error("cancelized: expected at least one argument");var i=Array.prototype.slice.call(arguments,0),r=i[i.length-1]=n(i[i.length-1]);return t.apply(null,i),e}}var n=t("./once");e.exports=i},{"./once":108}],88:[function(t,e){"use strict";function i(){var t=Array.prototype.slice.call(arguments,0);return function(){function e(){if(arguments[0])return o=s=null,void l.apply(null,arguments);if(!r.length)return o=s=null,void l.apply(null,arguments);o=r.shift();var t=o,i=Array.prototype.slice.call(arguments,1);i.push(e);var n=o.apply(null,i);if(t===o){if("function"!=typeof n)throw new Error("chain: chaining on non-cancellable function");s=n}}function i(){s&&s.apply(null,arguments)}var r=t.slice(0),o=null,s=null,a=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],l=arguments.length?arguments[arguments.length-1]:n;return a.unshift(null),e.apply(null,a),i}}var n=t("./noop");e.exports=i},{"./noop":106}],89:[function(t,e){"use strict";function i(t,e,i){return Math.min(Math.max(t,e),i)}e.exports=i},{}],90:[function(t,e){"use strict";function i(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=void 0)}e.exports=i},{}],91:[function(t,e){"use strict";function i(t,e){return e>t?-1:t>e?1:0}e.exports=i},{}],92:[function(t,e){"use strict";function i(){var t=arguments;return function(e){for(var i=e,n=0;n<t.length;n++)i=t[n].call(null,i);return i}}e.exports=i},{}],93:[function(t,e){"use strict";function i(t,e,i){return 2*Math.atan(i*Math.tan(t/2)/e)}function n(t,e,n){return i(t,e,n)}function r(t,e,n){return i(t,e,Math.sqrt(e*e+n*n))}function o(t,e,n){return i(t,n,e)}function s(t,e,n){return i(t,n,Math.sqrt(e*e+n*n))}function a(t,e,n){return i(t,Math.sqrt(e*e+n*n),e)}function l(t,e,n){return i(t,Math.sqrt(e*e+n*n),n)}e.exports={convert:i,htov:n,htod:r,vtoh:o,vtod:s,dtoh:a,dtov:l}},{}],94:[function(t,e){"use strict";function i(t){return t.toPrecision(15)}e.exports=i},{}],95:[function(t,e){"use strict";function i(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}e.exports=i},{}],96:[function(t,e){"use strict";function i(t,e){function i(){e&&e.length>0?t.apply(null,e):t()}setTimeout(i,0)}e.exports=i},{}],97:[function(t,e){"use strict";function i(t){return t*Math.PI/180}e.exports=i},{}],98:[function(t,e){"use strict";function i(t,e){function i(){null!=r&&(r=null,e(null))}function n(){null!=r&&(clearTimeout(r),r=null,e.apply(null,arguments))}var r=null;return r=setTimeout(i,t),n}e.exports=i},{}],99:[function(t,e){"use strict";function i(t){for(var e=document.documentElement.style,i=["Moz","Webkit","Khtml","O","ms"],n=0;n<i.length;n++){var r=i[n],o=t[0].toUpperCase()+t.slice(1),s=r+o;if(s in e)return s}return t}function n(t){var e=i(t);return function(t){return t.style[e]}}function r(t){var e=i(t);return function(t,i){return t.style[e]=i}}function o(t){v(t,"translateZ(0)")}function s(t){y(t,"0 0 0")}function a(t){t.style.position="absolute"}function l(t,e,i){t.style.left=e+"px",t.style.top=i+"px"}function u(t,e,i){t.style.width=e+"px",t.style.height=i+"px"}function h(t){t.style.width=t.style.height=0}function c(t){t.style.width=t.style.height="100%"}function p(t){t.style.overflow="hidden"}function d(t){t.style.overflow="visible"}function f(t){t.style.pointerEvents="none"}function m(t){t.style.backgroundColor="#000",t.style.opacity="0",t.style.filter="alpha(opacity=0)"}var v=r("transform"),y=r("transformOrigin");e.exports={prefixProperty:i,getWithVendorPrefix:n,setWithVendorPrefix:r,setTransform:v,setTransformOrigin:y,setNullTransform:o,setNullTransformOrigin:s,setAbsolute:a,setPixelPosition:l,setPixelSize:u,setNullSize:h,setFullSize:c,setOverflowHidden:p,setOverflowVisible:d,setNoPointerEvents:f,setBlocking:m}},{}],100:[function(t,e){"use strict";function i(t,e){for(var i in e)t[i]=e[i];return t}e.exports=i},{}],101:[function(t,e){(function(t){"use strict";var i=function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==t?t:null}();e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],102:[function(t,e){"use strict";function i(){for(var t=0,e=0;e<arguments.length;e++){var i=arguments[e];t+=i,t+=i<<10,t^=i>>6}return t+=t<<3,t^=t>>11,t+=t<<15,t>=0?t:-t}e.exports=i},{}],103:[function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}e.exports=i},{}],104:[function(t,e){"use strict";function i(t){return 0==(t&t-1)}e.exports=i},{}],105:[function(t,e){"use strict";function i(t,e){return(+t%(e=+e)+e)%e}e.exports=i},{}],106:[function(t,e){"use strict";function i(){}e.exports=i},{}],107:[function(t,e){"use strict";e.exports=function(){return"undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()}}()},{}],108:[function(t,e){"use strict";function i(t){var e,i=!1;return function(){return i||(i=!0,e=t.apply(null,arguments)),e}}e.exports=i},{}],109:[function(t,e){"use strict";function i(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t&&t.deviceXDPI&&t.logicalXDPI)return t.deviceXDPI/t.logicalXDPI;if(t&&t.systemXDPI&&t.logicalXDPI)return t.systemXDPI/t.logicalXDPI}return n}var n=1;e.exports=i},{}],110:[function(t,e){"use strict";function i(t,e,i,a){if(a=a||"",n()){var l="translateX("+s(e)+"px) translateY("+s(i)+"px) translateZ(0) "+a;r(t,l)}else o(t,e,i)}var n=t("../support/Css"),r=t("./dom").setTransform,o=t("./dom").setPixelPosition,s=t("./decimal");e.exports=i},{"../support/Css":81,"./decimal":94,"./dom":99}],111:[function(t,e){"use strict";function i(t){return 180*t/Math.PI}e.exports=i},{}],112:[function(t,e){"use strict";function i(t){return"number"==typeof t&&isFinite(t)}e.exports=i},{}],113:[function(t,e){"use strict";function i(t){return function(){function e(){!arguments[0]||s?r.apply(null,arguments):o=t.apply(null,i)}var i=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],r=arguments.length?arguments[arguments.length-1]:n,o=null,s=!1;return i.push(e),e(!0),function(){s=!0,o.apply(null,arguments)}}}var n=t("./noop");e.exports=i},{"./noop":106}],114:[function(t,e){"use strict";function i(t,e,i){function r(){if(!o){var a=(n()-s)/t;1>a?(e(a),requestAnimationFrame(r)):(e(1),i())}}var o=!1,s=n();return e(0),requestAnimationFrame(r),function(){o=!0,i.apply(null,arguments)}}var n=t("./now");e.exports=i},{"./now":107}],115:[function(t,e){"use strict";function i(t){var e=typeof t;if("object"===e){if(null===t)return"null";if("[object Array]"===Object.prototype.toString.call(t))return"array";if("[object RegExp]"===Object.prototype.toString.call(t))return"regexp"}return e}e.exports=i},{}],116:[function(t,e){"use strict";function i(t,e){if(!t||null==t.mediaAspectRatio)throw new Error("mediaAspectRatio must be defined");this._x=t&&null!=t.x?t.x:p,this._y=t&&null!=t.y?t.y:d,this._zoom=t&&null!=t.zoom?t.zoom:f,this._mediaAspectRatio=t.mediaAspectRatio,this._width=t&&null!=t.width?t.width:h,this._height=t&&null!=t.height?t.height:c,this._limiter=e||null,this._projMatrix=r.create(),this._invProjMatrix=r.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=o.create(),this._update()}var n=t("minimal-event-emitter"),r=t("gl-matrix").mat4,o=t("gl-matrix").vec4,s=t("../util/pixelRatio"),a=t("../util/real"),l=t("../util/clamp"),u=t("../util/clearOwnProperties"),h=0,c=0,p=.5,d=.5,f=1,m=[1,0,1,0],v=[-1,-1,1,1];n(i),i.prototype.destroy=function(){u(this)},i.prototype.x=function(){return this._x},i.prototype.y=function(){return this._y},i.prototype.zoom=function(){return this._zoom},i.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio},i.prototype.width=function(){return this._width},i.prototype.height=function(){return this._height},i.prototype.size=function(t){return t=t||{},t.width=this._width,t.height=this._height,t},i.prototype.parameters=function(t){return t=t||{},t.x=this._x,t.y=this._y,t.zoom=this._zoom,t.mediaAspectRatio=this._mediaAspectRatio,t},i.prototype.limiter=function(){return this._limiter},i.prototype.setX=function(t){this._resetParams(),this._params.x=t,this._update(this._params)},i.prototype.setY=function(t){this._resetParams(),this._params.y=t,this._update(this._params)},i.prototype.setZoom=function(t){this._resetParams(),this._params.zoom=t,this._update(this._params)},i.prototype.offsetX=function(t){this.setX(this._x+t)},i.prototype.offsetY=function(t){this.setY(this._y+t)},i.prototype.offsetZoom=function(t){this.setZoom(this._zoom+t)},i.prototype.setMediaAspectRatio=function(t){this._resetParams(),this._params.mediaAspectRatio=t,this._update(this._params)},i.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},i.prototype.setParameters=function(t){this._resetParams(),this._params.x=t.x,this._params.y=t.y,this._params.zoom=t.zoom,this._params.mediaAspectRatio=t.mediaAspectRatio,this._update(this._params)},i.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},i.prototype._resetParams=function(){var t=this._params;t.x=null,t.y=null,t.zoom=null,t.mediaAspectRatio=null,t.width=null,t.height=null},i.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._x,i=this._y,n=this._zoom,r=this._mediaAspectRatio,o=this._width,s=this._height;if(t.x=null!=t.x?t.x:e,t.y=null!=t.y?t.y:i,t.zoom=null!=t.zoom?t.zoom:n,t.mediaAspectRatio=null!=t.mediaAspectRatio?t.mediaAspectRatio:r,t.width=null!=t.width?t.width:o,t.height=null!=t.height?t.height:s,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var u=t.x,h=t.y,c=t.zoom,p=t.mediaAspectRatio,d=t.width,f=t.height;if(!(a(u)&&a(h)&&a(c)&&a(p)&&a(d)&&a(f)))throw new Error("Bad view - suspect a broken limiter");c=l(c,1e-6,1/0),this._x=u,this._y=h,this._zoom=c,this._mediaAspectRatio=p,this._width=d,this._height=f,u===e&&h===i&&c===n&&p===r&&d===o&&f===s||(this._projectionChanged=!0,this.emit("change")),d===o&&f===s||this.emit("resize")},i.prototype._zoomX=function(){return this._zoom},i.prototype._zoomY=function(){var t=this._mediaAspectRatio,e=this._width/this._height,i=this._zoom,n=i*t/e;return isNaN(n)&&(n=i),n},i.prototype.updateWithControlParameters=function(t){var e=this.zoom(),i=this._zoomX(),n=this._zoomY();this.offsetX(t.axisScaledX*i+t.x*e),this.offsetY(t.axisScaledY*n+t.y*e),this.offsetZoom(t.zoom*e)},i.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,i=this._frustum;if(this._projectionChanged){var n=this._x,o=this._y,s=this._zoomX(),a=this._zoomY(),l=i[0]=.5-o+.5*a,u=i[1]=n-.5+.5*s,h=i[2]=.5-o-.5*a,c=i[3]=n-.5-.5*s;r.ortho(t,c,u,h,l,-1,1),r.invert(e,t),this._projectionChanged=!1}},i.prototype.projection=function(){return this._updateProjection(),this._projMatrix},i.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},i.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,i=0;i<e.length;i++){for(var n=e[i],r=m[i],o=v[i],s=!1,a=0;a<t.length;a++){var l=t[a];if(0>o&&l[r]<n||o>0&&l[r]>n){s=!0;break}}if(!s)return!1}return!0},i.prototype.selectLevel=function(t){for(var e=s()*this.width(),i=this._zoom,n=0;n<t.length;n++){var r=t[n];if(i*r.width()>=e)return r}return t[t.length-1]},i.prototype.coordinatesToScreen=function(t,e){var i=this._vec;e||(e={});var n=this._width,r=this._height;if(0>=n||0>=r)return e.x=null,e.y=null,null;var s=t&&null!=t.x?t.x:p,a=t&&null!=t.y?t.y:d;o.set(i,s-.5,.5-a,-1,1),o.transformMat4(i,i,this.projection());for(var l=0;3>l;l++)i[l]/=i[3];return e.x=n*(i[0]+1)/2,e.y=r*(1-i[1])/2,e},i.prototype.screenToCoordinates=function(t,e){var i=this._vec;e||(e={});var n=this._width,r=this._height,s=2*t.x/n-1,a=1-2*t.y/r;return o.set(i,s,a,1,1),o.transformMat4(i,i,this.inverseProjection()),e.x=.5+i[0],e.y=.5-i[1],e},i.limit={x:function(t,e){return function(i){return i.x=l(i.x,t,e),i}},y:function(t,e){return function(i){return i.y=l(i.y,t,e),i}},zoom:function(t,e){return function(i){return i.zoom=l(i.zoom,t,e),i}},resolution:function(t){return function(e){if(e.width<=0||e.height<=0)return e;var i=e.width,n=s()*i/t;return e.zoom=l(e.zoom,n,1/0),e}},visibleX:function(t,e){return function(i){var n=e-t;i.zoom>n&&(i.zoom=n);var r=t+.5*i.zoom,o=e-.5*i.zoom;return i.x=l(i.x,r,o),i}},visibleY:function(t,e){return function(i){if(i.width<=0||i.height<=0)return i;var n=i.width/i.height,r=n/i.mediaAspectRatio,o=(e-t)*r;i.zoom>o&&(i.zoom=o);var s=t+.5*i.zoom/r,a=e-.5*i.zoom/r;return i.y=l(i.y,s,a),i}},letterbox:function(){return function(t){if(t.width<=0||t.height<=0)return t;var e=t.width/t.height,i=e/t.mediaAspectRatio;t.mediaAspectRatio>=e&&(t.zoom=Math.min(t.zoom,1)),t.mediaAspectRatio<=e&&(t.zoom=Math.min(t.zoom,i));var n,r;t.zoom>1?n=r=.5:(n=0+.5*t.zoom/1,r=1-.5*t.zoom/1);var o,s;return t.zoom>i?o=s=.5:(o=0+.5*t.zoom/i,s=1-.5*t.zoom/i),t.x=l(t.x,n,r),t.y=l(t.y,o,s),t}}},i.type=i.prototype.type="flat",e.exports=i},{"../util/clamp":89,"../util/clearOwnProperties":90,"../util/pixelRatio":109,"../util/real":112,"gl-matrix":2,"minimal-event-emitter":13}],117:[function(t,e){"use strict";function i(t,e){this._yaw=t&&null!=t.yaw?t.yaw:v,this._pitch=t&&null!=t.pitch?t.pitch:y,this._roll=t&&null!=t.roll?t.roll:g,this._fov=t&&null!=t.fov?t.fov:_,this._width=t&&null!=t.width?t.width:f,this._height=t&&null!=t.height?t.height:m,this._projectionCenterX=t&&null!=t.projectionCenterX?t.projectionCenterX:T,this._projectionCenterY=t&&null!=t.projectionCenterY?t.projectionCenterY:S,this._limiter=e||null,this._projMatrix=r.create(),this._invProjMatrix=r.create(),this._frustum=[o.create(),o.create(),o.create(),o.create(),o.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=o.create(),this._update()}var n=t("minimal-event-emitter"),r=t("gl-matrix").mat4,o=t("gl-matrix").vec4,s=t("../util/pixelRatio"),a=t("../util/convertFov"),l=t("../util/mod"),u=t("../util/real"),h=t("../util/clamp"),c=t("../util/decimal"),p=t("../util/compose"),d=t("../util/clearOwnProperties"),f=0,m=0,v=0,y=0,g=0,_=Math.PI/4,T=0,S=0;n(i),i.prototype.destroy=function(){d(this)},i.prototype.yaw=function(){return this._yaw},i.prototype.pitch=function(){return this._pitch},i.prototype.roll=function(){return this._roll},i.prototype.projectionCenterX=function(){return this._projectionCenterX},i.prototype.projectionCenterY=function(){return this._projectionCenterY},i.prototype.fov=function(){return this._fov},i.prototype.width=function(){return this._width},i.prototype.height=function(){return this._height},i.prototype.size=function(t){return t=t||{},t.width=this._width,t.height=this._height,t},i.prototype.parameters=function(t){return t=t||{},t.yaw=this._yaw,t.pitch=this._pitch,t.roll=this._roll,t.fov=this._fov,t},i.prototype.limiter=function(){return this._limiter},i.prototype.setYaw=function(t){this._resetParams(),this._params.yaw=t,this._update(this._params)},i.prototype.setPitch=function(t){this._resetParams(),this._params.pitch=t,this._update(this._params)},i.prototype.setRoll=function(t){this._resetParams(),this._params.roll=t,this._update(this._params)},i.prototype.setFov=function(t){this._resetParams(),this._params.fov=t,this._update(this._params)},i.prototype.setProjectionCenterX=function(t){this._resetParams(),this._params.projectionCenterX=t,this._update(this._params)},i.prototype.setProjectionCenterY=function(t){this._resetParams(),this._params.projectionCenterY=t,this._update(this._params)},i.prototype.offsetYaw=function(t){this.setYaw(this._yaw+t)},i.prototype.offsetPitch=function(t){this.setPitch(this._pitch+t)},i.prototype.offsetRoll=function(t){this.setRoll(this._roll+t)},i.prototype.offsetFov=function(t){this.setFov(this._fov+t)},i.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},i.prototype.setParameters=function(t){this._resetParams(),this._params.yaw=t.yaw,this._params.pitch=t.pitch,this._params.roll=t.roll,this._params.fov=t.fov,this._params.projectionCenterX=t.projectionCenterX,this._params.projectionCenterY=t.projectionCenterY,this._update(this._params)},i.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},i.prototype._resetParams=function(){var t=this._params;t.yaw=null,t.pitch=null,t.roll=null,t.fov=null,t.width=null,t.height=null},i.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._yaw,i=this._pitch,n=this._roll,r=this._fov,o=this._projectionCenterX,s=this._projectionCenterY,a=this._width,l=this._height;if(t.yaw=null!=t.yaw?t.yaw:e,t.pitch=null!=t.pitch?t.pitch:i,t.roll=null!=t.roll?t.roll:n,t.fov=null!=t.fov?t.fov:r,t.width=null!=t.width?t.width:a,t.height=null!=t.height?t.height:l,t.projectionCenterX=null!=t.projectionCenterX?t.projectionCenterX:o,t.projectionCenterY=null!=t.projectionCenterY?t.projectionCenterY:s,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");t=this._normalize(t);var h=t.yaw,c=t.pitch,p=t.roll,d=t.fov,f=t.width,m=t.height,v=t.projectionCenterX,y=t.projectionCenterY;if(!(u(h)&&u(c)&&u(p)&&u(d)&&u(f)&&u(m)&&u(v)&&u(y)))throw new Error("Bad view - suspect a broken limiter");this._yaw=h,this._pitch=c,this._roll=p,this._fov=d,this._width=f,this._height=m,this._projectionCenterX=v,this._projectionCenterY=y,h===e&&c===i&&p===n&&d===r&&f===a&&m===l&&v===o&&y===s||(this._projectionChanged=!0,this.emit("change")),f===a&&m===l||this.emit("resize")},i.prototype._normalize=function(t){this._normalizeCoordinates(t);var e=a.htov(Math.PI,t.width,t.height),i=isNaN(e)?Math.PI:Math.min(Math.PI,e);return t.fov=h(t.fov,1e-6,i-1e-6),t},i.prototype._normalizeCoordinates=function(t){return"yaw"in t&&(t.yaw=l(t.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in t&&(t.pitch=l(t.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in t&&(t.roll=l(t.roll-Math.PI,-2*Math.PI)+Math.PI),t},i.prototype.normalizeToClosest=function(t,e){var i=this._yaw,n=this._pitch,r=t.yaw,o=t.pitch,s=r-2*Math.PI,a=r+2*Math.PI;Math.abs(s-i)<Math.abs(r-i)?r=s:Math.abs(a-i)<Math.abs(r-i)&&(r=a);var l=o-2*Math.PI,u=o+2*Math.PI;return Math.abs(l-n)<Math.abs(o-n)?o=l:Math.abs(l-n)<Math.abs(o-n)&&(o=u),e=e||{},e.yaw=r,e.pitch=o,e},i.prototype.updateWithControlParameters=function(t){var e=this._fov,i=a.vtoh(e,this._width,this._height);isNaN(i)&&(i=e),this.offsetYaw(t.axisScaledX*i+2*t.x*i+t.yaw),this.offsetPitch(t.axisScaledY*e+2*t.y*i+t.pitch),this.offsetRoll(-t.roll),this.offsetFov(t.zoom*e)},i.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,i=this._frustum;if(this._projectionChanged){var n=this._width,o=this._height,s=this._fov,l=a.vtoh(s,n,o),u=n/o,h=this._projectionCenterX,c=this._projectionCenterY;if(0!==h||0!==c){var p=Math.atan(2*h*Math.tan(l/2)),d=Math.atan(2*c*Math.tan(s/2)),f=this._fovs;f.leftDegrees=180*(l/2+p)/Math.PI,f.rightDegrees=180*(l/2-p)/Math.PI,f.upDegrees=180*(s/2+d)/Math.PI,f.downDegrees=180*(s/2-d)/Math.PI,r.perspectiveFromFieldOfView(t,f,-1,1)}else r.perspective(t,s,u,-1,1);r.rotateZ(t,t,this._roll),r.rotateX(t,t,this._pitch),r.rotateY(t,t,this._yaw),r.invert(e,t),this._matrixToFrustum(t,i),this._projectionChanged=!1}},i.prototype._matrixToFrustum=function(t,e){o.set(e[0],t[3]+t[0],t[7]+t[4],t[11]+t[8],0),o.set(e[1],t[3]-t[0],t[7]-t[4],t[11]-t[8],0),o.set(e[2],t[3]+t[1],t[7]+t[5],t[11]+t[9],0),o.set(e[3],t[3]-t[1],t[7]-t[5],t[11]-t[9],0),o.set(e[4],t[3]+t[2],t[7]+t[6],t[11]+t[10],0)},i.prototype.projection=function(){return this._updateProjection(),this._projMatrix},i.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},i.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,i=this._tmpVec,n=0;n<e.length;n++){for(var r=e[n],s=!1,a=0;a<t.length;a++){var l=t[a];o.set(i,l[0],l[1],l[2],0),o.dot(r,i)>=0&&(s=!0)}if(!s)return!1}return!0},i.prototype.selectLevel=function(t){for(var e=s()*this._height,i=Math.tan(.5*this._fov),n=0;n<t.length;n++){var r=t[n];if(i*r.height()>=e)return r}return t[t.length-1]},i.prototype.coordinatesToScreen=function(t,e){var i=this._tmpVec;e||(e={});var n=this._width,r=this._height;if(0>=n||0>=r)return e.x=null,e.y=null,null;var s=t.yaw,a=t.pitch,l=Math.sin(s)*Math.cos(a),u=-Math.sin(t.pitch),h=-Math.cos(s)*Math.cos(a);return o.set(i,l,u,h,1),o.transformMat4(i,i,this.projection()),i[3]>=0?(e.x=n*(i[0]/i[3]+1)/2,e.y=r*(1-i[1]/i[3])/2,e):(e.x=null,e.y=null,null)},i.prototype.screenToCoordinates=function(t,e){var i=this._tmpVec;e||(e={});var n=this._width,r=this._height,s=2*t.x/n-1,a=1-2*t.y/r;o.set(i,s,a,1,1),o.transformMat4(i,i,this.inverseProjection());var l=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return e.yaw=Math.atan2(i[0],-i[2]),e.pitch=Math.acos(i[1]/l)-Math.PI/2,this._normalizeCoordinates(e),e},i.prototype.coordinatesToPerspectiveTransform=function(t,e,i){i=i||"";var n=this._height,r=this._width,o=this._fov,s=.5*n/Math.tan(o/2),a="";return a+="translateX("+c(r/2)+"px) ",a+="translateY("+c(n/2)+"px) ",a+="translateX(-50%) translateY(-50%) ",a+="perspective("+c(s)+"px) ",a+="translateZ("+c(s)+"px) ",a+="rotateZ("+c(-this._roll)+"rad) ",a+="rotateX("+c(-this._pitch)+"rad) ",a+="rotateY("+c(this._yaw)+"rad) ",a+="rotateY("+c(-t.yaw)+"rad) ",a+="rotateX("+c(t.pitch)+"rad) ",a+="translateZ("+c(-e)+"px) ",a+=i+" "},i.limit={yaw:function(t,e){return function(i){return i.yaw=h(i.yaw,t,e),i}},pitch:function(t,e){return function(i){return i.pitch=h(i.pitch,t,e),i}},roll:function(t,e){return function(i){return i.roll=h(i.roll,t,e),i}},hfov:function(t,e){return function(i){var n=i.width,r=i.height;if(n>0&&r>0){var o=a.htov(t,n,r),s=a.htov(e,n,r);i.fov=h(i.fov,o,s)}return i}},vfov:function(t,e){return function(i){return i.fov=h(i.fov,t,e),i}},resolution:function(t){return function(e){var i=e.height;if(i){var n=s()*i,r=2*Math.atan(n/t);e.fov=h(e.fov,r,1/0)}return e}},traditional:function(t,e,n){return n=null!=n?n:e,p(i.limit.resolution(t),i.limit.vfov(0,e),i.limit.hfov(0,n),i.limit.pitch(-Math.PI/2,Math.PI/2))}},i.type=i.prototype.type="rectilinear",e.exports=i},{"../util/clamp":89,"../util/clearOwnProperties":90,"../util/compose":92,"../util/convertFov":93,"../util/decimal":94,"../util/mod":105,"../util/pixelRatio":109,"../util/real":112,"gl-matrix":2,"minimal-event-emitter":13}]},{},[55])(55)}),function(){"use strict";var t="undefined"!=typeof window&&"undefined"!=typeof window.document?window.document:{},e="undefined"!=typeof module&&module.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=i.length,o={};r>n;n++)if(e=i[n],e&&e[1]in t){for(n=0;n<e.length;n++)o[i[0][n]]=e[n];return o}return!1}(),r={change:n.fullscreenchange,error:n.fullscreenerror},o={request:function(e){return new Promise(function(r){var o=n.requestFullscreen,s=function(){this.off("change",s),r()}.bind(this);e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[o]():e[o](i?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",s)}.bind(this))},exit:function(){return new Promise(function(e){if(!this.isFullscreen)return void e();var i=function(){this.off("change",i),e()}.bind(this);t[n.exitFullscreen](),this.on("change",i)}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(e,i){var n=r[e];n&&t.addEventListener(n,i,!1)},off:function(e,i){var n=r[e];n&&t.removeEventListener(n,i,!1)},raw:n};return n?(Object.defineProperties(o,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),void(e?(module.exports=o,module.exports.default=o):window.screenfull=o)):void(e?module.exports=!1:window.screenfull=!1)}(),Marzipano.dependencies.eventEmitter(DeviceOrientationControlMethod),DeviceOrientationControlMethod.prototype.destroy=function(){this._dynamics=null,window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this._deviceOrientationHandler),this._deviceOrientationHandler=null,this._previous=null,this._current=null,this._tmp=null,this._getPitchCallbacks=null},DeviceOrientationControlMethod.prototype.getPitch=function(t){this._getPitchCallbacks.push(t)},DeviceOrientationControlMethod.prototype._handleData=function(t){var e=this._previous,i=this._current,n=this._tmp;n.yaw=Marzipano.util.degToRad(t.alpha),n.pitch=Marzipano.util.degToRad(t.beta),n.roll=Marzipano.util.degToRad(t.gamma),rotateEuler(n,i),this._getPitchCallbacks.forEach(function(t){t(null,i.pitch)}),this._getPitchCallbacks.length=0,null!=e.yaw&&null!=e.pitch&&null!=e.roll&&(this._dynamics.yaw.offset=-(i.yaw-e.yaw),this._dynamics.pitch.offset=i.pitch-e.pitch,this.emit("parameterDynamics","yaw",this._dynamics.yaw),this.emit("parameterDynamics","pitch",this._dynamics.pitch)),e.yaw=i.yaw,e.pitch=i.pitch,e.roll=i.roll},function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=function(){function t(t){this.toggleFullscreen=e(this.toggleFullscreen,this),this.loaded=!1,this.startViewer(t),this.bindFullScreen()}return t.prototype.startViewer=function(t){var e,i,n,r,o,s,a,l,u,h;return r=new MobileDetect(window.navigator.userAgent),this.isMobileDevice=!!r.mobile(),h={stageType:"webgl",controls:{mouseViewMode:"drag"}},e=document.getElementById(t.containerId),u=new Marzipano.Viewer(e,h),s=new Marzipano.ImageUrlSource(function(e){return{url:t.images[e.z].url}}),i=new Marzipano.EquirectGeometry(t.images),n=Marzipano.RectilinearView.limit.traditional(8192,120*Math.PI/180),l=new Marzipano.RectilinearView({yaw:0,fov:60*Math.PI/180},n),this.setupControls(u.controls(),l),o=u.createScene({source:s,geometry:i,view:l,pinFirstLevel:!1}),a=o.layer().textureStore(),a.addEventListener("textureLoad",this.removeLoadingScreen),o.switchTo()},t.prototype.setupControls=function(t,e){var i,n,r,o,s;return this.isMobileDevice?($(".btn").addClass("hidden"),i=new DeviceOrientationControlMethod,t.registerMethod("deviceOrientation",i),i.getPitch(function(t,i){return t?void 0:e.setPitch(i)}),void t.enableMethod("deviceOrientation")):(o=document.querySelector("#zoom-in"),s=document.querySelector("#zoom-out"),r=.7,n=3,t.registerMethod("zoomIn",new Marzipano.ElementPressControlMethod(o,"zoom",-r,n),!0),t.registerMethod("zoomOut",new Marzipano.ElementPressControlMethod(s,"zoom",r,n),!0))},t.prototype.bindFullScreen=function(){var t;return this.screenfull=window.screenfull,t=$("#full-screen-toggle"),this.screenfull.enabled||t.addClass("hidden"),t.click(this.toggleFullscreen),this.screenfull.onchange(this.setFullScreenIcon)},t.prototype.toggleFullscreen=function(){return this.screenfull.toggle()},t.prototype.setFullScreenIcon=function(){return window.screenfull.isFullscreen?$("#full-screen-toggle").addClass("enabled"):$("#full-screen-toggle").removeClass("enabled")},t.prototype.removeLoadingScreen=function(){this.loaded||($("#loading").fadeOut(500),this.loaded=!0)},t}(),window.ArtStationPano=t}.call(this);